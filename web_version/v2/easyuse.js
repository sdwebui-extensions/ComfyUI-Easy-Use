!function(){"use strict";try{if("undefined"!=typeof document){var e=document.createElement("style");e.appendChild(document.createTextNode('@charset "UTF-8";.easyuse-model-info{color:#fff;max-width:90vw;font-family:var(--font-family)}.easyuse-model-content{display:flex;flex-direction:column;overflow:hidden}.easyuse-model-header{margin:0 0 15px}.easyuse-model-header-remark{display:flex;align-items:center;margin-top:5px}.easyuse-model-info h2{text-align:left;margin:0}.easyuse-model-info h5{text-align:left;margin:0 15px 0 0;font-weight:400;color:var(--descrip-text)}.easyuse-model-info p{margin:5px 0}.easyuse-model-info a{color:var(--theme-color-light)}.easyuse-model-info a:hover{text-decoration:underline}.easyuse-model-tags-list{display:flex;flex-wrap:wrap;list-style:none;gap:10px;max-height:200px;overflow:auto;margin:10px 0;padding:0}.easyuse-model-tag{background-color:var(--comfy-input-bg);border:2px solid var(--border-color);color:var(--input-text);display:flex;align-items:center;gap:5px;border-radius:5px;padding:2px 5px;cursor:pointer}.easyuse-model-tag--selected span:before{content:"✅";position:absolute;background-color:var(--theme-color-light);left:0;top:0;right:0;bottom:0;text-align:center}.easyuse-model-tag:hover{border:2px solid var(--theme-color-light)}.easyuse-model-tag p{margin:0}.easyuse-model-tag span{text-align:center;border-radius:5px;background-color:var(--theme-color-light);padding:2px;position:relative;min-width:20px;overflow:hidden;color:#fff}.easyuse-model-metadata .comfy-modal-content{max-width:100%}.easyuse-model-metadata label{margin-right:1ch;color:#ccc}.easyuse-model-metadata span{color:var(--theme-color-light)}.easyuse-preview{max-width:660px;margin-right:15px;position:relative}.easyuse-preview-group{position:relative;overflow:hidden;border-radius:.5rem;width:660px}.easyuse-preview-list{display:flex;flex-wrap:nowrap;width:100%;transition:all .5s ease-in-out}.easyuse-preview-list.no-transition{transition:none}.easyuse-preview-slide{display:flex;flex-basis:calc(50% - 5px);flex-grow:0;flex-shrink:0;position:relative;justify-content:center;align-items:center;padding-right:5px;padding-left:0}.easyuse-preview-slide:nth-child(2n){padding-left:5px;padding-right:0}.easyuse-preview-slide-content{position:relative;min-height:150px;width:100%}.easyuse-preview-slide-content .save{position:absolute;right:6px;z-index:12;bottom:6px;display:flex;align-items:center;height:26px;padding:0 9px;color:var(--input-text);font-size:12px;line-height:26px;background:#00000080;border-radius:13px;cursor:pointer;min-width:80px;text-align:center}.easyuse-preview-slide-content .save:hover{filter:brightness(120%);will-change:auto}.easyuse-preview-slide-content img{border-radius:14px;object-position:center center;max-width:100%;max-height:700px;border-style:none;vertical-align:middle}.easyuse-preview button{position:absolute;z-index:10;top:50%;display:flex;align-items:center;justify-content:center;width:30px;height:30px;border-radius:15px;border:1px solid rgba(66,63,78,.15);background-color:#423f4e80;color:#fffc;transition-property:color,background-color,border-color,text-decoration-color,fill,stroke;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s;transform:translateY(-50%)}.easyuse-preview button.left{left:10px}.easyuse-preview button.right{right:10px}.easyuse-model-detail{margin-top:16px;overflow:hidden;border:1px solid var(--border-color);border-radius:8px;width:300px}.easyuse-model-detail-head{height:40px;padding:0 10px;font-weight:500;font-size:14px;font-style:normal;line-height:40px}.easyuse-model-detail-body{box-sizing:border-box;font-size:12px}.easyuse-model-detail-item{display:flex;justify-content:flex-start;border-top:1px solid var(--border-color)}.easyuse-model-detail-item-label{flex-shrink:0;width:88px;padding-top:5px;padding-bottom:5px;padding-left:10px;border-right:1px solid var(--border-color);color:var(--input-text);font-weight:400}.easyuse-model-detail-item-value{display:flex;flex-wrap:wrap;padding:5px 10px;color:var(--input-text)}.easyuse-model-detail-textarea{border-top:1px solid var(--border-color);padding:10px;height:100px;overflow-y:auto;font-size:12px}.easyuse-model-detail-textarea textarea{width:100%;height:100%;border:0;background-color:transparent;color:var(--input-text)}.easyuse-model-detail-textarea textarea::placeholder{color:var(--descrip-text)}.easyuse-model-detail-textarea.empty{display:flex;justify-content:center;align-items:center;color:var(--descrip-text)}.easyuse-model-notes{background-color:#00000040;padding:5px;margin-top:5px}.easyuse-model-notes:empty{display:none}.easyuse-account-user{font-size:10px;color:var(--descrip-text);text-align:center}.easyuse-account-user-info{display:flex;justify-content:space-between;align-items:center;padding-bottom:10px;cursor:pointer}.easyuse-account-user-info .user{display:flex;align-items:center}.easyuse-account-user-info .edit{padding:5px 10px;background:var(--comfy-menu-bg);border-radius:4px}.easyuse-account-user-info:hover{filter:brightness(110%)}.easyuse-account-user-info h5{margin:0;font-size:10px;text-align:left}.easyuse-account-user-info h6{margin:0;font-size:8px;text-align:left;font-weight:300}.easyuse-account-user-info .remark{margin-top:4px}.easyuse-account-user-info .avatar{width:36px;height:36px;background:var(--comfy-input-bg);border-radius:50%;margin-right:5px;display:flex;justify-content:center;align-items:center;font-size:16px;overflow:hidden}.easyuse-account-user-info .avatar img{width:100%;height:100%}.easyuse-account-dialog{width:600px}.easyuse-account-dialog-main a,.easyuse-account-dialog-main a:visited{font-weight:400;color:var(--theme-color-light)}.easyuse-account-dialog-item{display:flex;justify-content:flex-start;align-items:center;padding:10px 0;border-bottom:1px solid var(--border-color)}.easyuse-account-dialog-item input{padding:5px;margin-right:5px}.easyuse-account-dialog-item input.key{flex:1}.easyuse-account-dialog-item button{cursor:pointer;margin-left:5px!important;padding:5px!important;font-size:16px!important}.easyuse-account-dialog-item button:hover{filter:brightness(120%)}.easyuse-account-dialog-item button.choose{background:var(--theme-color)}.easyuse-account-dialog-item button.delete{background:var(--error-color)}.easy-dropdown,.easy-nested-dropdown{position:relative;box-sizing:border-box;background-color:#171717;box-shadow:0 4px 4px #ffffff40;padding:0;margin:0;list-style:none;z-index:1000;overflow:visible;max-height:fit-content;max-width:fit-content}.easy-dropdown{position:absolute;border-radius:0}.easy-dropdown li.item,.easy-nested-dropdown li.item{font-weight:400;min-width:max-content}.easy-dropdown li.folder,.easy-nested-dropdown li.folder{cursor:default;position:relative;border-right:3px solid cyan}.easy-dropdown li.folder:after,.easy-nested-dropdown li.folder:after{content:">";position:absolute;right:2px;font-weight:400}.easy-dropdown li,.easy-nested-dropdown li{padding:4px 10px;cursor:pointer;font-family:system-ui;font-size:.7rem;position:relative}.easy-nested-dropdown{position:absolute;top:0;left:100%;margin:0;border:none;display:none}.easy-dropdown li.selected>.easy-nested-dropdown,.easy-nested-dropdown li.selected>.easy-nested-dropdown{display:block;border:none}.easy-dropdown li.selected,.easy-nested-dropdown li.selected{background-color:#e5e5e5;border:none}:root{--theme-color:var(--primary-bg);--theme-color-light: var(--primary-hover-bg);--success-color: #52c41a;--error-color: #ff4d4f;--warning-color: #faad14;--font-family: Inter, -apple-system, BlinkMacSystemFont, Helvetica Neue, sans-serif;--p-inputtext-background: var(--p-form-field-background);--p-inputtext-disabled-background: var(--p-form-field-disabled-background);--p-inputtext-filled-background: var(--p-form-field-filled-background);--p-inputtext-filled-focus-background: var(--p-form-field-filled-focus-background);--p-inputtext-border-color: var(--p-form-field-border-color);--p-inputtext-hover-border-color: var(--p-form-field-hover-border-color);--p-inputtext-focus-border-color: var(--p-form-field-focus-border-color);--p-inputtext-invalid-border-color: var(--p-form-field-invalid-border-color);--p-inputtext-color: var(--p-form-field-color);--p-inputtext-disabled-color: var(--p-form-field-disabled-color);--p-inputtext-placeholder-color: var(--p-form-field-placeholder-color);--p-inputtext-shadow: var(--p-form-field-shadow);--p-inputtext-padding-x: var(--p-form-field-padding-x);--p-inputtext-padding-y: var(--p-form-field-padding-y);--p-inputtext-border-radius: var(--p-form-field-border-radius);--p-inputtext-focus-ring-width: var(--p-form-field-focus-ring-width);--p-inputtext-focus-ring-style: var(--p-form-field-focus-ring-style);--p-inputtext-focus-ring-color: var(--p-form-field-focus-ring-color);--p-inputtext-focus-ring-offset: var(--p-form-field-focus-ring-offset);--p-inputtext-focus-ring-shadow: var(--p-form-field-focus-ring-shadow);--p-inputtext-transition-duration: var(--p-form-field-transition-duration);--p-inputtext-sm-font-size: .875rem;--p-inputtext-sm-padding-x: .625rem;--p-inputtext-sm-padding-y: .375rem;--p-inputtext-lg-font-size: 1.125rem;--p-inputtext-lg-padding-x: .875rem;--p-inputtext-lg-padding-y: .625rem;--p-tooltip-max-width: 12.5rem;--p-tooltip-gutter: .25rem;--p-tooltip-shadow: var(--p-overlay-popover-shadow);--p-tooltip-padding: .5rem .75rem;--p-tooltip-border-radius: var(--p-overlay-popover-border-radius);--p-tooltip-background: var(--p-surface-700);--p-tooltip-color: var(--p-surface-0)}.comfyui-easyuse-theme,.comfyui-easyuse-primary{color:var(--theme-color-light)}.comfyui-easyuse-theme.point:hover,.comfyui-easyuse-primary.point:hover{opacity:.8}.comfyui-easyuse-success{color:var(--success-color)}.comfyui-easyuse-success.point:hover{opacity:.8}.comfyui-easyuse-error{color:var(--error-color)}.comfyui-easyuse-error.point:hover{opacity:.8}.comfyui-easyuse-warning,.comfyui-easyuse--warn{color:var(--warning-color)}.comfyui-easyuse-warning.point:hover,.comfyui-easyuse--warn.point:hover{opacity:.8}.grid-cols-1{grid-template-columns:repeat(1,minmax(0,1fr))}.grid-cols-12{grid-template-columns:repeat(12,minmax(0,1fr))}.grid-cols-2{grid-template-columns:repeat(2,minmax(0,1fr))}.grid-cols-3{grid-template-columns:repeat(3,minmax(0,1fr))}.flex-row{flex-direction:row}.flex-row-reverse{flex-direction:row-reverse}.flex-col{flex-direction:column}.flex-col-reverse{flex-direction:column-reverse}.flex-wrap{flex-wrap:wrap}.flex-nowrap{flex-wrap:nowrap}.items-start{align-items:flex-start}.items-end{align-items:flex-end}.items-center{align-items:center}.items-stretch{align-items:stretch}.justify-start{justify-content:flex-start}.justify-end{justify-content:flex-end}.justify-center{justify-content:center}.justify-between{justify-content:space-between}.grid{display:grid}.gap-0\\.5{gap:.125rem}.gap-1{gap:.25rem}.gap-10{gap:2.5rem}.gap-12{gap:3rem}.gap-2{gap:.5rem}.gap-2\\.5{gap:.625rem}.gap-20{gap:5rem}.gap-3{gap:.75rem}.gap-3\\.5{gap:.875rem}.gap-4{gap:1rem}.gap-5{gap:1.25rem}.gap-6{gap:1.5rem}.gap-7{gap:1.75rem}.gap-8{gap:2rem}.gap-\\[0\\.28rem\\]{gap:.28rem}.gap-x-2{-moz-column-gap:.5rem;column-gap:.5rem}.gap-x-4{-moz-column-gap:1rem;column-gap:1rem}.gap-y-1{row-gap:.25rem}.gap-y-6{row-gap:1.5rem}@media (min-width: 576px){.sm\\:col-span-4{grid-column:span 4/span 4}.sm\\:col-span-6{grid-column:span 6/span 6}.sm\\:ml-8{margin-left:2rem}.sm\\:mt-0{margin-top:0}.sm\\:flex{display:flex}.sm\\:h-60{height:15rem}.sm\\:\\!w-64{width:16rem!important}.sm\\:w-40{width:10rem}.sm\\:w-44{width:11rem}.sm\\:w-56{width:14rem}.sm\\:w-60{width:15rem}.sm\\:w-64{width:16rem}.sm\\:w-80{width:20rem}.sm\\:w-96{width:24rem}.sm\\:w-\\[30rem\\]{width:30rem}.sm\\:w-auto{width:auto}.sm\\:min-w-\\[30rem\\]{min-width:30rem}.sm\\:flex-row{flex-direction:row}.sm\\:flex-col{flex-direction:column}.sm\\:flex-nowrap{flex-wrap:nowrap}.sm\\:items-start{align-items:flex-start}.sm\\:items-end{align-items:flex-end}.sm\\:items-center{align-items:center}.sm\\:justify-center{justify-content:center}.sm\\:justify-between{justify-content:space-between}.sm\\:gap-2{gap:.5rem}.sm\\:p-20{padding:5rem}.sm\\:px-10{padding-left:2.5rem;padding-right:2.5rem}.sm\\:py-10{padding-bottom:2.5rem;padding-top:2.5rem}.sm\\:py-5{padding-bottom:1.25rem;padding-top:1.25rem}.sm\\:pt-32{padding-top:8rem}.sm\\:text-left{text-align:left}.sm\\:text-sm{font-size:.875rem;line-height:1.25rem}}@media (min-width: 768px){.md\\:-bottom-12{bottom:-3rem}.md\\:-bottom-28{bottom:-7rem}.md\\:-bottom-8{bottom:-2rem}.md\\:-bottom-\\[26rem\\]{bottom:-26rem}.md\\:-left-12{left:-3rem}.md\\:-left-28{left:-7rem}.md\\:-left-32{left:-8rem}.md\\:-left-4{left:-1rem}.md\\:-left-48{left:-12rem}.md\\:-left-\\[22rem\\]{left:-22rem}.md\\:bottom-0{bottom:0}.md\\:left-10{left:2.5rem}.md\\:left-\\[32rem\\]{left:32rem}.md\\:left-\\[42rem\\]{left:42rem}.md\\:top-1\\/2{top:50%}.md\\:top-32{top:8rem}.md\\:top-8{top:2rem}.md\\:col-span-2{grid-column:span 2/span 2}.md\\:col-span-4{grid-column:span 4/span 4}.md\\:col-span-6{grid-column:span 6/span 6}.md\\:ml-auto{margin-left:auto}.md\\:block{display:block}.md\\:flex{display:flex}.md\\:hidden{display:none}.md\\:h-\\[20rem\\]{height:20rem}.md\\:h-\\[32rem\\]{height:32rem}.md\\:\\!w-80{width:20rem!important}.md\\:w-2\\/12{width:16.666667%}.md\\:w-40{width:10rem}.md\\:w-5\\/12{width:41.666667%}.md\\:w-56{width:14rem}.md\\:w-6\\/12{width:50%}.md\\:w-60{width:15rem}.md\\:w-8\\/12{width:66.666667%}.md\\:w-80{width:20rem}.md\\:w-\\[100rem\\]{width:100rem}.md\\:w-\\[26rem\\]{width:26rem}.md\\:w-\\[30rem\\]{width:30rem}.md\\:w-\\[50rem\\]{width:50rem}.md\\:w-\\[52rem\\]{width:52rem}.md\\:w-\\[60rem\\]{width:60rem}.md\\:w-\\[95rem\\]{width:95rem}.md\\:w-screen{width:100vw}.md\\:flex-initial{flex:0 1 auto}.md\\:-translate-y-1\\/2{--tw-translate-y: -50% }.md\\:-translate-y-1\\/2,.md\\:translate-x-0{transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.md\\:translate-x-0{--tw-translate-x: 0px }.md\\:grid-cols-2{grid-template-columns:repeat(2,minmax(0,1fr))}.md\\:flex-row{flex-direction:row}.md\\:flex-col{flex-direction:column}.md\\:items-end{align-items:flex-end}.md\\:items-center{align-items:center}.md\\:justify-start{justify-content:flex-start}.md\\:justify-center{justify-content:center}.md\\:gap-20{gap:5rem}.md\\:gap-4{gap:1rem}.md\\:p-5{padding:1.25rem}.md\\:p-8{padding:2rem}}@media (min-width: 992px){.lg\\:left-20{left:5rem}.lg\\:left-\\[36rem\\]{left:36rem}.lg\\:left-\\[50rem\\]{left:50rem}.lg\\:col-span-1{grid-column:span 1/span 1}.lg\\:col-span-2{grid-column:span 2/span 2}.lg\\:col-span-4{grid-column:span 4/span 4}.lg\\:col-span-6{grid-column:span 6/span 6}.lg\\:mb-0{margin-bottom:0}.lg\\:mt-0{margin-top:0}.lg\\:mt-20{margin-top:5rem}.lg\\:flex{display:flex}.lg\\:hidden{display:none}.lg\\:h-10{height:2.5rem}.lg\\:h-32{height:8rem}.lg\\:h-\\[28rem\\]{height:28rem}.lg\\:\\!w-\\[30rem\\]{width:30rem!important}.lg\\:w-3\\/12{width:25%}.lg\\:w-32{width:8rem}.lg\\:w-\\[28rem\\]{width:28rem}.lg\\:w-\\[64rem\\]{width:64rem}.lg\\:w-fit{width:-moz-fit-content;width:fit-content}.lg\\:max-w-6xl{max-width:72rem}.lg\\:flex-row{flex-direction:row}.lg\\:gap-0{gap:0}.lg\\:rounded-2xl{border-radius:1rem}.lg\\:rounded-3xl{border-radius:1.5rem}.lg\\:rounded-xl{border-radius:.75rem}.lg\\:p-7{padding:1.75rem}.lg\\:px-2{padding-left:.5rem;padding-right:.5rem}.lg\\:px-20{padding-left:5rem;padding-right:5rem}.lg\\:px-56{padding-left:14rem;padding-right:14rem}.lg\\:px-8{padding-left:2rem;padding-right:2rem}.lg\\:px-9{padding-left:2.25rem;padding-right:2.25rem}.lg\\:py-20{padding-bottom:5rem;padding-top:5rem}.lg\\:py-7{padding-bottom:1.75rem;padding-top:1.75rem}.lg\\:pt-0{padding-top:0}.lg\\:text-2xl{font-size:1.5rem;line-height:2rem}.lg\\:text-5xl{font-size:3rem;line-height:1}.lg\\:text-base{font-size:1rem;line-height:1.5rem}.lg\\:text-xl{font-size:1.25rem;line-height:1.75rem}}@media (min-width: 1200px){.xl\\:-left-12{left:-3rem}.xl\\:-left-28{left:-7rem}.xl\\:bottom-0{bottom:0}.xl\\:left-36{left:9rem}.xl\\:left-\\[42rem\\]{left:42rem}.xl\\:left-\\[60rem\\]{left:60rem}.xl\\:col-span-3{grid-column:span 3/span 3}.xl\\:col-span-4{grid-column:span 4/span 4}.xl\\:col-span-6{grid-column:span 6/span 6}.xl\\:block{display:block}.xl\\:flex{display:flex}.xl\\:hidden{display:none}.xl\\:h-\\[36\\.25rem\\]{height:36.25rem}.xl\\:\\!w-40{width:10rem!important}.xl\\:w-3\\/12{width:25%}.xl\\:w-6\\/12{width:50%}.xl\\:w-96{width:24rem}.xl\\:w-\\[29rem\\]{width:29rem}.xl\\:max-w-36{max-width:9rem}.xl\\:grid-cols-4{grid-template-columns:repeat(4,minmax(0,1fr))}.xl\\:flex-row{flex-direction:row}.xl\\:items-start{align-items:flex-start}.xl\\:items-center{align-items:center}.xl\\:gap-1{gap:.25rem}.xl\\:gap-6{gap:1.5rem}.xl\\:text-left{text-align:left}}.comfyui-easyuse-toast{position:fixed;z-index:99999;top:0;left:0;height:0;width:100%;display:flex;flex-direction:column;align-items:center;justify-content:start}.comfyui-easyuse-toast-container{position:relative;height:fit-content;padding:4px;margin-top:-100px;opacity:0;z-index:3;-webkit-transition:all .3s ease-in-out;-khtml-transition:all .3s ease-in-out;-moz-transition:all .3s ease-in-out;-ms-transition:all .3s ease-in-out;-o-transition:all .3s ease-in-out;transition:all .3s ease-in-out}.comfyui-easyuse-toast-container:last-child{z-index:1}.comfyui-easyuse-toast-container.show{opacity:1;margin-top:0!important;transform:translateY(0)}.comfyui-easyuse-toast-container:not(.show){z-index:1}.comfyui-easyuse-toast-container>div{position:relative;background:var(--comfy-menu-bg);color:var(--input-text);height:fit-content;box-shadow:0 0 10px #000000e0;padding:9px 12px;border-radius:var(--border-radius);font-size:14px;pointer-events:all;display:-webkit-box;display:-moz-box;display:-ms-flexbox;display:-webkit-flex;display:flex;-webkit-justify-content:center;-khtml-justify-content:center;-moz-justify-content:center;-ms-justify-content:center;-o-justify-content:center;justify-content:center;-webkit-align-items:center;-khtml-align-items:center;-moz-align-items:center;-ms-align-items:center;-o-align-items:center;align-items:center}.comfyui-easyuse-toast-container>div>span{display:-webkit-box;display:-moz-box;display:-ms-flexbox;display:-webkit-flex;display:flex;-webkit-justify-content:center;-khtml-justify-content:center;-moz-justify-content:center;-ms-justify-content:center;-o-justify-content:center;justify-content:center;-webkit-align-items:center;-khtml-align-items:center;-moz-align-items:center;-ms-align-items:center;-o-align-items:center;align-items:center}.comfyui-easyuse-toast-container>div>span i{font-size:16px;margin-right:8px}.comfyui-easyuse-toast-container>div>span i.loading{animation:loading-rotate 1s linear infinite}.comfyui-easyuse-toast-container a{cursor:pointer;text-decoration:underline;color:var(--theme-color-light);margin-left:4px;display:inline-block;line-height:1}.comfyui-easyuse-toast-container a:hover{color:var(--theme-color-light);text-decoration:none}@keyframes loading-rotate{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.comfyui-easyuse-selector{position:relative}.comfyui-easyuse-selector.hide{display:none}.comfyui-easyuse-selector__header{--height:26px;display:-webkit-box;display:-moz-box;display:-ms-flexbox;display:-webkit-flex;display:flex;-webkit-justify-content:space-between;-khtml-justify-content:space-between;-moz-justify-content:space-between;-ms-justify-content:space-between;-o-justify-content:space-between;justify-content:space-between;-webkit-align-items:center;-khtml-align-items:center;-moz-align-items:center;-ms-align-items:center;-o-align-items:center;align-items:center;height:var(--height);padding-bottom:10px;border-bottom:1px solid var(--border-color-solid)}.comfyui-easyuse-selector__header_button{height:var(--height);width:var(--height);border-radius:var(--border-radius);border:1px solid var(--border-color);font-size:11px;background:var(--bg-color);box-shadow:none;cursor:pointer;display:-webkit-box;display:-moz-box;display:-ms-flexbox;display:-webkit-flex;display:flex;-webkit-justify-content:center;-khtml-justify-content:center;-moz-justify-content:center;-ms-justify-content:center;-o-justify-content:center;justify-content:center;-webkit-align-items:center;-khtml-align-items:center;-moz-align-items:center;-ms-align-items:center;-o-align-items:center;align-items:center}.comfyui-easyuse-selector__header_button:hover{filter:brightness(1.2)}.comfyui-easyuse-selector__header_button:hover i{color:var(--error-color)}.comfyui-easyuse-selector__header_button i{font-size:16px;color:var(--input-text);-webkit-transition:all .3s ease-in-out;-khtml-transition:all .3s ease-in-out;-moz-transition:all .3s ease-in-out;-ms-transition:all .3s ease-in-out;-o-transition:all .3s ease-in-out;transition:all .3s ease-in-out}.comfyui-easyuse-selector__header_search{flex:1;margin-left:10px;border-radius:var(--border-radius);border:1px solid var(--border-color);font-size:11px;background:var(--bg-color);padding:0 8px;height:var(--height);display:-webkit-box;display:-moz-box;display:-ms-flexbox;display:-webkit-flex;display:flex;-webkit-align-items:center;-khtml-align-items:center;-moz-align-items:center;-ms-align-items:center;-o-align-items:center;align-items:center}.comfyui-easyuse-selector__header_search i{font-size:16px}.comfyui-easyuse-selector__header_search .search{vertical-align:middle;margin-left:5px;outline:none;resize:none;border:none;-webkit-appearance:none;-moz-appearance:none;appearance:none;box-shadow:none;overflow-y:scroll;background:transparent;width:100%;line-height:var(--height);font-size:12px;color:var(--input-text);-webkit-box-flex:1;-ms-flex:1;-webkit-flex:1;flex:1}.comfyui-easyuse-selector__content{list-style:none;padding:0;margin:0;min-height:150px;height:calc(100% - 28px);overflow-y:auto;overflow-x:hidden}.comfyui-easyuse-selector-item{display:inline-block;position:relative}.comfyui-easyuse-selector-item__tag{display:inline-block;vertical-align:middle;margin-top:8px;margin-right:8px;padding:4px;color:var(--input-text);background-color:var(--bg-color);border-radius:var(--border-radius);border:1px solid var(--border-color);font-size:11px;cursor:pointer;overflow:hidden;position:relative}.comfyui-easyuse-selector-item__tag:hover{filter:brightness(1.2)}.comfyui-easyuse-selector-item__tag.hide{display:none}.comfyui-easyuse-selector-item__tag input{--ring-color: transparent;position:relative;box-shadow:none;border:1px solid var(--border-color);border-radius:2px;background:linear-gradient(135deg,var(--comfy-menu-bg) 0%,var(--comfy-input-bg) 60%)}.comfyui-easyuse-selector-item__tag input[type=checkbox]{display:inline-block;flex-shrink:0;vertical-align:middle;-webkit-appearance:none;-moz-appearance:none;appearance:none;border:1px solid var(--border-color);background-origin:border-box;padding:0;width:1rem;height:1rem;border-radius:4px;color:var(--theme-color-light);-webkit-user-select:none;user-select:none}.comfyui-easyuse-selector-item__tag input[type=checkbox]:checked{border:1px solid var(--theme-color-light);background-color:var(--theme-color-light);background-image:url("data:image/svg+xml,%3csvg viewBox=\'0 0 16 16\' fill=\'white\' xmlns=\'http://www.w3.org/2000/svg\'%3e%3cpath d=\'M12.207 4.793a1 1 0 010 1.414l-5 5a1 1 0 01-1.414 0l-2-2a1 1 0 011.414-1.414L6.5 9.086l4.293-4.293a1 1 0 011.414 0z\'/%3e%3c/svg%3e")}.comfyui-easyuse-selector-item__tag input span{margin:0 4px;vertical-align:middle}.comfyui-easyuse-selector-preview{position:absolute;left:-180px;top:-110px;z-index:2;border:1px solid var(--border-color);border-radius:var(--border-radius);background:var(--comfy-menu-bg);-webkit-backdrop-filter:saturate(180%) blur(40px);-khtml-backdrop-filter:saturate(180%) blur(40px);-moz-backdrop-filter:saturate(180%) blur(40px);-ms-backdrop-filter:saturate(180%) blur(40px);-o-backdrop-filter:saturate(180%) blur(40px);backdrop-filter:saturate(180%) blur(40px);overflow:hidden}.comfyui-easyuse-selector-preview img{width:150px;height:150px}.comfyui-easyuse-selector-preview__text{font-size:12px;padding:5px 10px;max-width:130px;color:var(--input-text)}.comfyui-easyuse-selector-preview__text h6{line-height:1.15;font-size:10px;margin:10px 0}.comfyui-easyuse-dialog{max-width:600px}.comfyui-easyuse-dialog-title{font-size:18px;font-weight:700;text-align:center;color:var(--input-text);margin:0}.comfyui-easyuse-dialog-images{margin-top:10px;display:flex;flex-wrap:wrap;width:100%;box-sizing:border-box}.comfyui-easyuse-dialog-images img{width:50%;height:auto;cursor:pointer;box-sizing:border-box;filter:brightness(80%)}.comfyui-easyuse-dialog-images img:hover{filter:brightness(100%)}.comfyui-easyuse-dialog-images.selected{border:4px solid var(--success-color)}.comfyui-easyuse-dialog-hidden{display:none;height:0}.comfyui-easyuse-contextmenu{--height: 26px;--padding: 8px;font-family:var(--font-family);position:fixed;top:0;left:0;width:100%;max-width:200px;min-width:100px;min-height:100px;padding:var(--padding) 0;box-shadow:0 0 10px #00000040;background-color:var(--tr-odd-bg-color);border-radius:var(--border-radius);z-index:10;will-change:transform}.comfyui-easyuse-contextmenu-item-divider{height:1px;width:100%;background-color:var(--border-color);margin:var(--padding) 0}.comfyui-easyuse-contextmenu-item-content{height:var(--height);padding:0 12px;cursor:pointer;display:-webkit-box;display:-moz-box;display:-ms-flexbox;display:-webkit-flex;display:flex;-webkit-justify-content:space-between;-khtml-justify-content:space-between;-moz-justify-content:space-between;-ms-justify-content:space-between;-o-justify-content:space-between;justify-content:space-between;-webkit-align-items:center;-khtml-align-items:center;-moz-align-items:center;-ms-align-items:center;-o-align-items:center;align-items:center}.comfyui-easyuse-contextmenu-item-content span{font-size:11px;color:var(--input-text);display:-webkit-box;-webkit-line-clamp:1;overflow:hidden;word-break:break-all;text-overflow:ellipsis;-webkit-box-orient:vertical;-webkit-box-flex:1;-ms-flex:1;-webkit-flex:1;flex:1}.comfyui-easyuse-contextmenu-item-content i{color:var(--input-text);margin-left:4px;display:block;width:0;height:0;border-width:4px 4px 0;border-style:solid;border-color:var(--descrip-text) transparent transparent;-webkit-transform:scaleY(.8) rotate(-90deg);-khtml-transform:scaleY(.8) rotate(-90deg);-moz-transform:scaleY(.8) rotate(-90deg);-ms-transform:scaleY(.8) rotate(-90deg);-o-transform:scaleY(.8) rotate(-90deg);transform:scaleY(.8) rotate(-90deg)}.comfyui-easyuse-contextmenu-item-content:hover{background:var(--theme-color)}.comfyui-easyuse-contextmenu-item.disabled .comfyui-easyuse-contextmenu-item-content span{color:var(--border-color);cursor:default}.comfyui-easyuse-contextmenu-item.disabled .comfyui-easyuse-contextmenu-item-content:hover{background:transparent}.comfyui-easyuse-contextmenu-submenu{font-family:var(--font-family);position:absolute;top:0;left:200px;max-width:200px;width:200px;min-width:100px;min-height:--height;padding:var(--padding) 0;box-shadow:0 0 10px #00000040;background-color:var(--tr-odd-bg-color);border-radius:var(--border-radius);z-index:10;will-change:transform}.comfyui-easyuse-contextmenu-model{position:relative}.comfyui-easyuse-contextmenu-model:hover img{display:block;opacity:1}.comfyui-easyuse-contextmenu-model img{position:absolute;z-index:1;right:-175px;top:-75px;width:150px;height:auto;display:none;filter:brightness(70%);-webkit-filter:brightness(70%);opacity:0;-webkit-transition:all .5s cubic-bezier(.55,0,.1,1);-khtml-transition:all .5s cubic-bezier(.55,0,.1,1);-moz-transition:all .5s cubic-bezier(.55,0,.1,1);-ms-transition:all .5s cubic-bezier(.55,0,.1,1);-o-transition:all .5s cubic-bezier(.55,0,.1,1);transition:all .5s cubic-bezier(.55,0,.1,1)}.comfyui-easyuse-slider{width:100%;height:100%;display:-webkit-box;display:-moz-box;display:-ms-flexbox;display:-webkit-flex;display:flex;-webkit-justify-content:space-between;-khtml-justify-content:space-between;-moz-justify-content:space-between;-ms-justify-content:space-between;-o-justify-content:space-between;justify-content:space-between;-webkit-align-items:center;-khtml-align-items:center;-moz-align-items:center;-ms-align-items:center;-o-align-items:center;align-items:center}.comfyui-easyuse-slider-item{height:inherit;min-width:25px;display:-webkit-box;display:-moz-box;display:-ms-flexbox;display:-webkit-flex;display:flex;-webkit-justify-content:center;-khtml-justify-content:center;-moz-justify-content:center;-ms-justify-content:center;-o-justify-content:center;justify-content:center;-webkit-align-items:center;-khtml-align-items:center;-moz-align-items:center;-ms-align-items:center;-o-align-items:center;align-items:center;-webkit-flex-direction:column;-khtml-flex-direction:column;-moz-flex-direction:column;-ms-flex-direction:column;-o-flex-direction:column;flex-direction:column}.comfyui-easyuse-slider-item-input{height:15px;font-size:10px;color:var(--input-text)}.comfyui-easyuse-slider-item-label{height:15px;border:none;color:var(--descrip-text);font-size:8px}.comfyui-easyuse-slider-item-scroll{width:5px;height:calc(100% - 30px);background:var(--comfy-input-bg);border-radius:10px;position:relative}.comfyui-easyuse-slider-item-bar{width:10px;height:10px;background:linear-gradient(to bottom,var(--input-text),var(--descrip-text));border-radius:100%;box-shadow:0 2px 10px var(--bg-color);position:absolute;top:0;left:-2.5px;cursor:pointer;z-index:1}.comfyui-easyuse-slider-item-area{width:100%;border-radius:20px;position:absolute;bottom:0;background:var(--input-text);z-index:0}.comfyui-easyuse-slider-item.positive .comfyui-easyuse-slider-item-label{color:var(--success-color)}.comfyui-easyuse-slider-item.positive .comfyui-easyuse-slider-item-area{background:var(--success-color)}.comfyui-easyuse-slider-item.negative .comfyui-easyuse-slider-item-label{color:var(--error-color)}.comfyui-easyuse-slider-item.negative .comfyui-easyuse-slider-item-area{background:var(--error-color)}.comfyui-easyuse-map{height:100%;background:var(--comfy-menu-bg)}.comfyui-easyuse-map .p-splitter-gutter-handle{height:1px!important}.comfyui-easyuse-map-nodes{height:100%;position:relative}.comfyui-easyuse-map-nodes__header{position:absolute;z-index:2;top:0;left:0;width:100%;padding:.25rem 0 .25rem 1rem;height:2.7rem;background:var(--comfy-menu-bg);border-bottom:1px solid var(--border-color);display:-webkit-box;display:-moz-box;display:-ms-flexbox;display:-webkit-flex;display:flex;-webkit-justify-content:space-between;-khtml-justify-content:space-between;-moz-justify-content:space-between;-ms-justify-content:space-between;-o-justify-content:space-between;justify-content:space-between;-webkit-align-items:center;-khtml-align-items:center;-moz-align-items:center;-ms-align-items:center;-o-align-items:center;align-items:center;-webkit-backdrop-filter:saturate(180%) blur(40px);-khtml-backdrop-filter:saturate(180%) blur(40px);-moz-backdrop-filter:saturate(180%) blur(40px);-ms-backdrop-filter:saturate(180%) blur(40px);-o-backdrop-filter:saturate(180%) blur(40px);backdrop-filter:saturate(180%) blur(40px)}.comfyui-easyuse-map-nodes__header .title{font-size:13px;color:var(--input-text);font-weight:400;line-height:1.5;-webkit-user-select:none;user-select:none}.comfyui-easyuse-map-nodes__header .toolbar{display:-webkit-box;display:-moz-box;display:-ms-flexbox;display:-webkit-flex;display:flex;-webkit-align-items:center;-khtml-align-items:center;-moz-align-items:center;-ms-align-items:center;-o-align-items:center;align-items:center}.comfyui-easyuse-map-nodes__header .toolbar .icon{font-size:.85rem;margin-left:.25rem;cursor:pointer}.comfyui-easyuse-map-nodes__content{position:relative;padding:2.7rem 0 0;height:100%;overflow:auto}.comfyui-easyuse-map-nodes__content dl .label{padding-left:1rem}.comfyui-easyuse-map-nodes__content ol,.comfyui-easyuse-map-nodes__content dl{list-style-type:none;padding:0;margin:0}.comfyui-easyuse-map-nodes__content ol .toolbar span,.comfyui-easyuse-map-nodes__content dl .toolbar span{font-size:13px}.comfyui-easyuse-map-nodes__content ol .toolbar span.pi-eye,.comfyui-easyuse-map-nodes__content dl .toolbar span.pi-eye{color:var(--input-text)}.comfyui-easyuse-map-nodes__content ol .toolbar span.pi-eye-slash,.comfyui-easyuse-map-nodes__content dl .toolbar span.pi-eye-slash{color:var(--descrip-text)}.comfyui-easyuse-map-nodes__content ol .toolbar span.pi-eye-slash.never,.comfyui-easyuse-map-nodes__content dl .toolbar span.pi-eye-slash.never{opacity:.5}.comfyui-easyuse-map-nodes__content .no_result{display:-webkit-box;display:-moz-box;display:-ms-flexbox;display:-webkit-flex;display:flex;-webkit-justify-content:center;-khtml-justify-content:center;-moz-justify-content:center;-ms-justify-content:center;-o-justify-content:center;justify-content:center;-webkit-align-items:center;-khtml-align-items:center;-moz-align-items:center;-ms-align-items:center;-o-align-items:center;align-items:center;text-align:center}.comfyui-easyuse-map-nodes-group{position:relative;overflow:hidden;width:100%;height:2rem;cursor:default;display:-webkit-box;display:-moz-box;display:-ms-flexbox;display:-webkit-flex;display:flex;-webkit-justify-content:space-between;-khtml-justify-content:space-between;-moz-justify-content:space-between;-ms-justify-content:space-between;-o-justify-content:space-between;justify-content:space-between;-webkit-align-items:center;-khtml-align-items:center;-moz-align-items:center;-ms-align-items:center;-o-align-items:center;align-items:center;pointer-events:auto}.comfyui-easyuse-map-nodes-group .left,.comfyui-easyuse-map-nodes-group .right{height:100%;display:-webkit-box;display:-moz-box;display:-ms-flexbox;display:-webkit-flex;display:flex;-webkit-align-items:center;-khtml-align-items:center;-moz-align-items:center;-ms-align-items:center;-o-align-items:center;align-items:center}.comfyui-easyuse-map-nodes-group .left{padding-left:.5rem;margin-right:.25rem;-webkit-box-flex:1;-ms-flex:1;-webkit-flex:1;flex:1}.comfyui-easyuse-map-nodes-group .icon{font-size:.85rem;margin-right:.25rem}.comfyui-easyuse-map-nodes-group .label{display:-webkit-box;display:-moz-box;display:-ms-flexbox;display:-webkit-flex;display:flex;-webkit-align-items:center;-khtml-align-items:center;-moz-align-items:center;-ms-align-items:center;-o-align-items:center;align-items:center;height:100%;width:100%;min-width:80px}.comfyui-easyuse-map-nodes-group .label span{font-size:14px;color:var(--input-text);font-weight:400;line-height:1.5;display:-webkit-box;-webkit-line-clamp:1;overflow:hidden;word-break:break-all;text-overflow:ellipsis;-webkit-box-orient:vertical;-webkit-user-select:none;-khtml-user-select:none;-moz-user-select:none;-ms-user-select:none;-o-user-select:none;user-select:none}.comfyui-easyuse-map-nodes-group:hover{background:var(--content-hover-bg)!important}.comfyui-easyuse-map-nodes-group.active{background:var(--theme-color)!important}.comfyui-easyuse-map-nodes-group.active .label{color:#fff;cursor:default}.comfyui-easyuse-map-nodes-group.never .label{color:var(--descrip-text);opacity:.4}.comfyui-easyuse-map-nodes-group.bypass .label{color:var(--descrip-text)}.comfyui-easyuse-map-nodes-node{height:2rem;cursor:default;display:-webkit-box;display:-moz-box;display:-ms-flexbox;display:-webkit-flex;display:flex;-webkit-justify-content:space-between;-khtml-justify-content:space-between;-moz-justify-content:space-between;-ms-justify-content:space-between;-o-justify-content:space-between;justify-content:space-between;-webkit-align-items:center;-khtml-align-items:center;-moz-align-items:center;-ms-align-items:center;-o-align-items:center;align-items:center;position:relative;overflow:hidden;pointer-events:auto}.comfyui-easyuse-map-nodes-node .label{text-indent:.5rem;font-size:13px;color:var(--input-text);font-weight:400;line-height:1.5;-webkit-box-flex:1;-ms-flex:1;-webkit-flex:1;flex:1;-webkit-user-select:none;-khtml-user-select:none;-moz-user-select:none;-ms-user-select:none;-o-user-select:none;user-select:none;margin-right:.25rem;height:2rem;line-height:2rem;width:100%;display:-webkit-box;-webkit-line-clamp:1;overflow:hidden;word-break:break-all;text-overflow:ellipsis;-webkit-box-orient:vertical}.comfyui-easyuse-map-nodes-node .label.error{color:var(--error-color)}.comfyui-easyuse-map-nodes-node:hover{background:var(--content-hover-bg)!important}.comfyui-easyuse-map-nodes-node.never .label{color:var(--descrip-text);opacity:.5}.comfyui-easyuse-map-nodes-node.bypass .label{color:#f0f;opacity:.5}.comfyui-easyuse-map-nodes .nodes .label{text-indent:1rem}.comfyui-easyuse-toolbar{border-radius:0 12px 12px 0;min-width:50px;height:24px;position:fixed;bottom:85px;left:0;display:flex;align-items:center;z-index:1000;background-color:var(--comfy-menu-bg);border:1px solid var(--bg-color);-webkit-backdrop-filter:saturate(180%) blur(40px);-khtml-backdrop-filter:saturate(180%) blur(40px);-moz-backdrop-filter:saturate(180%) blur(40px);-ms-backdrop-filter:saturate(180%) blur(40px);-o-backdrop-filter:saturate(180%) blur(40px);backdrop-filter:saturate(180%) blur(40px)}.comfyui-easyuse-toolbar-icon{height:100%;padding:0 4px;display:flex;justify-content:center;align-items:center;font-size:12px;color:#fff;transition:all .3s ease-in-out;cursor:pointer}.comfyui-easyuse-toolbar-icon svg{width:14px;height:14px}.comfyui-easyuse-toolbar-icon:hover.group{color:var(--warning-color)}.comfyui-easyuse-toolbar-icon:hover.rocket{color:var(--theme-color)}.comfyui-easyuse-toolbar-nodes-map{position:absolute;top:50px;left:10px;width:200px;border-radius:12px;min-height:100px;max-height:600px;color:var(--descrip-text);background-color:var(--comfy-menu-bg);border:1px solid var(--bg-color);-webkit-backdrop-filter:saturate(180%) blur(40px);-khtml-backdrop-filter:saturate(180%) blur(40px);-moz-backdrop-filter:saturate(180%) blur(40px);-ms-backdrop-filter:saturate(180%) blur(40px);-o-backdrop-filter:saturate(180%) blur(40px);backdrop-filter:saturate(180%) blur(40px);z-index:399;padding-top:0;overflow:hidden}.comfyui-easyuse-toolbar-nodes-map .no-result-placeholder-content{-webkit-transform:scale(.8);-khtml-transform:scale(.8);-moz-transform:scale(.8);-ms-transform:scale(.8);-o-transform:scale(.8);transform:scale(.8)}.comfyui-easyuse-toolbar-nodes-map .comfyui-easyuse-map-nodes{min-height:100px;max-height:600px}.comfyui-easyuse-toolbar-nodes-map .comfyui-easyuse-map-nodes__header:before{content:"…";position:absolute;left:.25rem;top:2.75rem;transform:translateY(-2rem) rotate(90deg);width:.5rem;height:.5rem;display:inline-block;overflow:hidden;line-height:5px;padding:3px 4px;cursor:move;vertical-align:middle;font-size:12px;font-family:sans-serif;letter-spacing:2px;color:var(--drag-text);z-index:3;text-shadow:1px 0 1px black}.comfyui-easyuse-toolbar-nodes-map .comfyui-easyuse-map-nodes__header .title{cursor:move;padding-left:.25rem}.comfyui-easyuse-toolbar-nodes-map .comfyui-easyuse-map-nodes__content{max-height:calc(600px - 2.7rem)}.no-result-placeholder{display:flex;justify-content:center;align-items:center;height:100%}.no-result-placeholder-content{text-align:center;display:-webkit-box;display:-moz-box;display:-ms-flexbox;display:-webkit-flex;display:flex;-webkit-flex-direction:column;-khtml-flex-direction:column;-moz-flex-direction:column;-ms-flex-direction:column;-o-flex-direction:column;flex-direction:column;-webkit-justify-content:space-between;-khtml-justify-content:space-between;-moz-justify-content:space-between;-ms-justify-content:space-between;-o-justify-content:space-between;justify-content:space-between}.no-result-placeholder .p-card{background-color:transparent!important;box-shadow:none;text-align:center}.no-result-placeholder h3{color:var(--input-text);margin-bottom:.5rem}.no-result-placeholder p{color:var(--descrip-text);margin-bottom:1rem;margin-top:0}#comfyui-easyuse-components{position:absolute;top:0;left:0;z-index:3}.comfyui-easyuse{--p-datatable-header-cell-padding: .15rem 1rem;--p-datatable-body-cell-padding: .15rem 1rem;--p-primary-color: var(--theme-color-light)!important;--border-color-solid: var(--border-color);--border-radius: 8px}.comfyui-easyuse.dark-theme{--fg-color: #fff;--bg-color: #242427;--content-bg:#18181b;--content-fg:#fff;--content-hover-bg: #27272a;--comfy-menu-bg: rgba(24,24,27,.9);--comfy-input-bg: #242427;--input-text: #ffffff;--descrip-text: #71717a;--drag-text: #ccc;--error-text: #ff4444;--border-color: #3f3f46;--border-color-solid: #2a2a2e;--tr-even-bg-color: rgba(28,28,28,.9);--tr-odd-bg-color: rgba(19,19,19,.9)}.comfyui-easyuse ::-webkit-scrollbar{width:0em}.comfyui-easyuse ::-webkit-scrollbar-track{background-color:transparent}.comfyui-easyuse ::-webkit-scrollbar-thumb{background-color:transparent;border-radius:2px}.comfyui-easyuse ::-webkit-scrollbar-thumb:hover{background-color:transparent}.comfyui-easyuse body{font-family:var(--font-family)!important;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.comfyui-easyuse textarea{font-family:var(--font-family)!important}.comfyui-easyuse hr{border:1px solid var(--border-color)}.comfyui-easyuse .comfy-multiline-input{background-color:transparent;border:1px solid var(--border-color-solid);border-radius:var(--border-radius);padding:8px;font-size:12px}.comfyui-easyuse #comfy-settings-dialog{border:1px solid var(--border-color);background:transparent;-webkit-backdrop-filter:blur(8px) brightness(120%);backdrop-filter:blur(8px) brightness(120%);box-shadow:none}.comfyui-easyuse .comfy-modal{border:1px solid var(--border-color);box-shadow:none;-webkit-backdrop-filter:blur(8px) brightness(120%);backdrop-filter:blur(8px) brightness(120%)}.comfyui-easyuse .cm-title{background-color:transparent!important}.comfyui-easyuse .cm-notice-board{border-radius:10px!important;border:1px solid var(--border-color)!important}.comfyui-easyuse .cm-menu-container{margin-bottom:50px!important}.comfyui-easyuse .cn-manager-custom_milk_white .tg-column-name,.comfyui-easyuse .cmm-manager-custom_milk_white .tg-column-name{color:var(--input-text)}.comfyui-easyuse .cn-manager-custom_milk_white .tg-body-message,.comfyui-easyuse .cmm-manager-custom_milk_white .tg-body-message{text-align:center;color:var(--descrip-text)!important}.comfyui-easyuse .cn-manager-custom_milk_white .tg-body-frame .tg-cell,.comfyui-easyuse .cmm-manager-custom_milk_white .tg-body-frame .tg-cell{color:var(--input-text)}.comfyui-easyuse .cn-manager-custom_milk_white .tg-body-frame .cn-node-name a,.comfyui-easyuse .cn-manager-custom_milk_white .tg-body-frame .cmm-node-name a,.comfyui-easyuse .cmm-manager-custom_milk_white .tg-body-frame .cn-node-name a,.comfyui-easyuse .cmm-manager-custom_milk_white .tg-body-frame .cmm-node-name a{color:var(--theme-color)!important}.comfyui-easyuse .comfy-menu{border-radius:16px;box-shadow:0 0 1px var(--descrip-text);-webkit-backdrop-filter:blur(8px) brightness(120%);backdrop-filter:blur(8px) brightness(120%)}.comfyui-easyuse .comfy-menu button.comfy-settings-btn{font-size:12px}.comfyui-easyuse .comfy-menu-btns{margin-bottom:4px}.comfyui-easyuse .comfy-menu button,.comfyui-easyuse .comfy-modal button{font-size:14px;padding:4px 0;margin-bottom:4px}.comfyui-easyuse .comfy-menu-btns button,.comfyui-easyuse .comfy-list-actions button{font-size:10px}.comfyui-easyuse .comfy-menu>button,.comfyui-easyuse .comfy-menu-btns button,.comfyui-easyuse .comfy-menu .comfy-list button,.comfyui-easyuse .comfy-modal button{border-width:1px}.comfyui-easyuse #comfy-dev-save-api-button{justify-content:center}.comfyui-easyuse #queue-button{position:relative;overflow:hidden;min-height:30px;z-index:1}.comfyui-easyuse #queue-button:after{clear:both;content:attr(data-attr);background:green;color:#fff;width:var(--process-bar-width);height:100%;position:absolute;top:0;left:0;z-index:0;text-align:center;display:flex;justify-content:center;align-items:center}.comfyui-easyuse #shareButton{background:linear-gradient(to left,var(--theme-color),var(--theme-color-light))!important;color:#fff!important}.comfyui-easyuse .litegraph.litecontextmenu{--height: 24px;--padding: 6px;font-family:var(--font-family);padding:var(--padding) 0;border-radius:var(--border-radius);-webkit-backdrop-filter:blur(8px) brightness(120%);backdrop-filter:blur(8px) brightness(120%)}.comfyui-easyuse .litegraph.litecontextmenu .litemenu-title{padding:var(--padding)}.comfyui-easyuse .litegraph.litecontextmenu>div:first-child.litemenu-title{margin-top:-6px}.comfyui-easyuse .litegraph.litecontextmenu .submenu{height:var(--height);line-height:var(--height);padding:0 18px 0 12px;margin:0;background:transparent!important}.comfyui-easyuse .litegraph.litecontextmenu .submenu.has_submenu{border-right:none;position:relative}.comfyui-easyuse .litegraph.litecontextmenu .submenu.has_submenu:after{content:"";display:block;width:0;height:0;border-width:4px 4px 0;border-style:solid;border-color:var(--input-text) transparent transparent;transform:translateY(-50%) rotate(-90deg);top:50%;position:absolute}.comfyui-easyuse .litegraph.litecontextmenu .submenu.separator{height:1px;width:100%;background-color:var(--border-color)!important;margin:var(--padding) 0;border:none}.comfyui-easyuse .litegraph.litecontextmenu .submenu:last-child.separator{display:none}.comfyui-easyuse .litegraph.litecontextmenu .submenu:hover:not(.separator){background:var(--theme-color)!important}.comfyui-easyuse .litegraph.lite-search-item{background-color:var(--comfy-input-bg)!important;filter:brightness(100%)}.comfyui-easyuse .litegraph.lite-search-item:hover{filter:brightness(120%);color:var(--input-text)}.comfyui-easyuse .graphdialog{-webkit-backdrop-filter:blur(8px) brightness(120%);backdrop-filter:blur(8px) brightness(120%)}.comfyui-easyuse .graphdialog button{display:-webkit-box;display:-moz-box;display:-ms-flexbox;display:-webkit-flex;display:flex;-webkit-justify-content:center;-khtml-justify-content:center;-moz-justify-content:center;-ms-justify-content:center;-o-justify-content:center;justify-content:center;-webkit-align-items:center;-khtml-align-items:center;-moz-align-items:center;-ms-align-items:center;-o-align-items:center;align-items:center}.comfyui-easyuse .comfyui-menu{border-bottom:1px solid var(--bg-color)}.comfyui-easyuse .side-tool-bar-container{border-right:1px solid var(--bg-color)}.comfyui-easyuse .comfy-modal-content{width:100%}.comfyui-easyuse-poseEditor{display:-webkit-box;display:-moz-box;display:-ms-flexbox;display:-webkit-flex;display:flex;-webkit-justify-content:center;-khtml-justify-content:center;-moz-justify-content:center;-ms-justify-content:center;-o-justify-content:center;justify-content:center;-webkit-align-items:center;-khtml-align-items:center;-moz-align-items:center;-ms-align-items:center;-o-align-items:center;align-items:center;text-align:center;font-size:18px;line-height:1.5}#comfyui-menu-monitor{width:120px}#comfyui-menu-monitor #crystools-monitor-container{margin:0 auto!important}#comfyui-menu-monitor #crystools-monitor-container>div{margin:2px 0!important}#comfyui-menu-monitor #crystools-monitor-container>div>div>div{padding:0 4px!important}')),document.head.appendChild(e)}}catch(t){console.error("vite-plugin-css-injected-by-js",t)}}();
var e,t,s,o,n,i,a,l,r,d,u,c,p,h,m,g,f=Object.defineProperty,y=(e,t,s)=>((e,t,s)=>t in e?f(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s)(e,"symbol"!=typeof t?t+"":t,s);import{d as v,c as _,h as w,s as b,a as A,b as S,e as E,T as C,f as L}from"./assets/vendor-BEuf1XmE.js";import{r as k,w as x,e as I,b as N,c as T,I as D,d as O,F as R,C as M,J as G,K as P,L as B,M as F,z as U,G as z,o as j,N as H,D as W,O as Y,E as V,P as Z,x as X,Q,R as K,S as J}from"./assets/vue-DjzFgvDF.js";import{P as q}from"./assets/primevue-BSs2m5Wu.js";import"./assets/primeuix-Be3xdh47.js";let $=(null==(t=null==(e=window.comfyAPI)?void 0:e.app)?void 0:t.app)||null,ee=(null==(o=null==(s=window.comfyAPI)?void 0:s.api)?void 0:o.api)||null,te=(null==(i=null==(n=window.comfyAPI)?void 0:n.ui)?void 0:i.$el)||null,se=(null==(l=null==(a=window.comfyAPI)?void 0:a.dialog)?void 0:l.ComfyDialog)||null,oe=(null==(d=null==(r=window.comfyAPI)?void 0:r.widgets)?void 0:d.ComfyWidgets)||null,ne=(null==(c=null==(u=window.comfyAPI)?void 0:u.utils)?void 0:c.applyTextReplacements)||null,ie=(null==(h=null==(p=window.comfyAPI)?void 0:p.groupNode)?void 0:h.GroupNodeConfig)||null;const ae=(e,t=void 0)=>{var s,o;return e?null==(o=null==(s=null==$?void 0:$.ui)?void 0:s.settings)?void 0:o.getSettingValue(e,t):null};function le(e,t=null,s=void 0){try{let o=e?ae(e,s):null;return void 0===o&&t&&(o=localStorage[e]),o}catch(o){return null}}async function re(e,t,s=null){var o,n;try{(null==(n=null==(o=null==$?void 0:$.ui)?void 0:o.settings)?void 0:n.setSettingValue)?$.ui.settings.setSettingValue(e,t):await ee.storeSetting(e,t),s&&(localStorage[s]="object"==typeof t?JSON.stringify(t):t)}catch(i){}}function de(e,t){if(e="number"==typeof e?e:e instanceof Date?e.getTime():parseInt(e),isNaN(e))return null;let s=new Date(e);(e=s.toString().split(/[\s\:]/g).slice(0,-2))[1]=["01","02","03","04","05","06","07","08","09","10","11","12"][s.getMonth()];let o={MM:1,dd:2,yyyy:3,hh:4,mm:5,ss:6};return t.replace(/([Mmdhs]|y{2})\1/g,(t=>e[o[t]]))}const ue="comfyui-easyuse-",ce="dark-theme",pe="#236692",he={PIPE_LINE:"#7737AA",PIPE_LINE_SDXL:"#7737AA",INT:"#29699C",X_Y:"#38291f",XYPLOT:"#74DA5D",LORA_STACK:"#94dccd",CONTROL_NET_STACK:"#94dccd"},me=0x4000000000000,ge=["loaders","latent","image","mask","sampling","_for_testing","advanced","utils","api"],fe={ALWAYS:0,NEVER:2,BYPASS:4},ye="easyuse_nodes_map",ve=LGraphCanvas.node_colors.bgcolor,_e={ColorPalette:{version:105,id:"obsidian",name:"Obsidian",colors:{node_slot:{CLIP:"#FFD500",CLIP_VISION:"#A8DADC",CLIP_VISION_OUTPUT:"#ad7452",CONDITIONING:"#FFA931",CONTROL_NET:"#6EE7B7",IMAGE:"#64B5F6",LATENT:"#FF9CF9",MASK:"#81C784",MODEL:"#B39DDB",STYLE_MODEL:"#C2FFAE",VAE:"#FF6E6E",TAESD:"#DCC274",PIPE_LINE:"#7737AA",PIPE_LINE_SDXL:"#7737AA",INT:"#29699C",X_Y:"#38291f",XYPLOT:"#74DA5D",LORA_STACK:"#94dccd",CONTROL_NET_STACK:"#94dccd"},litegraph_base:{BACKGROUND_IMAGE:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABkCAIAAAD/gAIDAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAQBJREFUeNrs1rEKwjAUhlETUkj3vP9rdmr1Ysammk2w5wdxuLgcMHyptfawuZX4pJSWZTnfnu/lnIe/jNNxHHGNn//HNbbv+4dr6V+11uF527arU7+u63qfa/bnmh8sWLBgwYJlqRf8MEptXPBXJXa37BSl3ixYsGDBMliwFLyCV/DeLIMFCxYsWLBMwSt4Be/NggXLYMGCBUvBK3iNruC9WbBgwYJlsGApeAWv4L1ZBgsWLFiwYJmCV/AK3psFC5bBggULloJX8BpdwXuzYMGCBctgwVLwCl7Be7MMFixYsGDBsu8FH1FaSmExVfAxBa/gvVmwYMGCZbBg/W4vAQYA5tRF9QYlv/QAAAAASUVORK5CYII=",CLEAR_BACKGROUND_COLOR:"#222222",NODE_TITLE_COLOR:"#d4d4d8",NODE_SELECTED_TITLE_COLOR:"#ffffff",NODE_TEXT_SIZE:14,NODE_TEXT_COLOR:"#ffffff",NODE_SUBTEXT_SIZE:12,NODE_DEFAULT_COLOR:"#09090b",NODE_DEFAULT_BGCOLOR:"rgba(24,24,27,.9)",NODE_DEFAULT_BOXCOLOR:"rgba(255,255,255,.75)",NODE_DEFAULT_SHAPE:"box",NODE_BOX_OUTLINE_COLOR:pe,DEFAULT_SHADOW_COLOR:"rgba(0,0,0,0)",DEFAULT_GROUP_FONT:24,WIDGET_BGCOLOR:"#242427",WIDGET_OUTLINE_COLOR:"#3f3f46",WIDGET_TEXT_COLOR:"#d4d4d8",WIDGET_SECONDARY_TEXT_COLOR:"#d4d4d8",LINK_COLOR:"#9A9",EVENT_LINK_COLOR:"#A86",CONNECTING_LINK_COLOR:"#AFA"},comfy_base:{"fg-color":"#fff","bg-color":"#09090b","comfy-menu-bg":"rgba(24,24,24,.9)","comfy-input-bg":"#262626","input-text":"#ddd","descrip-text":"#999","drag-text":"#ccc","error-text":"#ff4444","border-color":"#29292c","tr-even-bg-color":"rgba(28,28,28,.9)","tr-odd-bg-color":"rgba(19,19,19,.9)"}}},NODE_COLORS:{red:{color:"#af3535",bgcolor:ve,groupcolor:"#A88"},brown:{color:"#38291f",bgcolor:ve,groupcolor:"#b06634"},green:{color:"#346434",bgcolor:ve,groupcolor:"#8A8"},blue:{color:"#1f1f48",bgcolor:ve,groupcolor:"#88A"},pale_blue:{color:"#006691",bgcolor:ve,groupcolor:"#3f789e"},cyan:{color:"#008181",bgcolor:ve,groupcolor:"#8AA"},purple:{color:"#422342",bgcolor:ve,groupcolor:"#a1309b"},yellow:{color:"#c09430",bgcolor:ve,groupcolor:"#b58b2a"},black:{color:"rgba(0,0,0,.8)",bgcolor:ve,groupcolor:"#444"}}};let we=JSON.parse(JSON.stringify(_e));delete we.NODE_COLORS,we.ColorPalette.id="obsidian_dark",we.ColorPalette.name="Obsidian Dark",we.ColorPalette.colors.litegraph_base.BACKGROUND_IMAGE="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABkCAIAAAD/gAIDAAAACXBIWXMAAAsTAAALEwEAmpwYAAAGlmlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgOS4xLWMwMDEgNzkuMTQ2Mjg5OSwgMjAyMy8wNi8yNS0yMDowMTo1NSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczpkYz0iaHR0cDovL3B1cmwub3JnL2RjL2VsZW1lbnRzLzEuMS8iIHhtbG5zOnBob3Rvc2hvcD0iaHR0cDovL25zLmFkb2JlLmNvbS9waG90b3Nob3AvMS4wLyIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0RXZ0PSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VFdmVudCMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIDI1LjEgKFdpbmRvd3MpIiB4bXA6Q3JlYXRlRGF0ZT0iMjAyMy0xMS0xM1QwMDoxODowMiswMTowMCIgeG1wOk1vZGlmeURhdGU9IjIwMjMtMTEtMTVUMDI6MDQ6NTkrMDE6MDAiIHhtcDpNZXRhZGF0YURhdGU9IjIwMjMtMTEtMTVUMDI6MDQ6NTkrMDE6MDAiIGRjOmZvcm1hdD0iaW1hZ2UvcG5nIiBwaG90b3Nob3A6Q29sb3JNb2RlPSIzIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOmIyYzRhNjA5LWJmYTctYTg0MC1iOGFlLTk3MzE2ZjM1ZGIyNyIgeG1wTU06RG9jdW1lbnRJRD0iYWRvYmU6ZG9jaWQ6cGhvdG9zaG9wOjk0ZmNlZGU4LTE1MTctZmQ0MC04ZGU3LWYzOTgxM2E3ODk5ZiIgeG1wTU06T3JpZ2luYWxEb2N1bWVudElEPSJ4bXAuZGlkOjIzMWIxMGIwLWI0ZmItMDI0ZS1iMTJlLTMwNTMwM2NkMDdjOCI+IDx4bXBNTTpIaXN0b3J5PiA8cmRmOlNlcT4gPHJkZjpsaSBzdEV2dDphY3Rpb249ImNyZWF0ZWQiIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6MjMxYjEwYjAtYjRmYi0wMjRlLWIxMmUtMzA1MzAzY2QwN2M4IiBzdEV2dDp3aGVuPSIyMDIzLTExLTEzVDAwOjE4OjAyKzAxOjAwIiBzdEV2dDpzb2Z0d2FyZUFnZW50PSJBZG9iZSBQaG90b3Nob3AgMjUuMSAoV2luZG93cykiLz4gPHJkZjpsaSBzdEV2dDphY3Rpb249InNhdmVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOjQ4OWY1NzlmLTJkNjUtZWQ0Zi04OTg0LTA4NGE2MGE1ZTMzNSIgc3RFdnQ6d2hlbj0iMjAyMy0xMS0xNVQwMjowNDo1OSswMTowMCIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIDI1LjEgKFdpbmRvd3MpIiBzdEV2dDpjaGFuZ2VkPSIvIi8+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJzYXZlZCIgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDpiMmM0YTYwOS1iZmE3LWE4NDAtYjhhZS05NzMxNmYzNWRiMjciIHN0RXZ0OndoZW49IjIwMjMtMTEtMTVUMDI6MDQ6NTkrMDE6MDAiIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkFkb2JlIFBob3Rvc2hvcCAyNS4xIChXaW5kb3dzKSIgc3RFdnQ6Y2hhbmdlZD0iLyIvPiA8L3JkZjpTZXE+IDwveG1wTU06SGlzdG9yeT4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz4OTe6GAAAAx0lEQVR42u3WMQoAIQxFwRzJys77X8vSLiRgITif7bYbgrwYc/mKXyBoY4VVBgsWLFiwYFmOlTv+9jfDOjHmr8u6eVkGCxYsWLBgmc5S8ApewXvgYRksWLBgKXidpeBdloL3wMOCBctgwVLwCl7BuyyDBQsWLFiwTGcpeAWv4D3wsAwWLFiwFLzOUvAuS8F74GHBgmWwYCl4Ba/gXZbBggULFixYprMUvIJX8B54WAYLFixYCl5nKXiXpeA98LBgwTJYsGC9tg1o8f4TTtqzNQAAAABJRU5ErkJggg==",we.ColorPalette.colors.litegraph_base.CLEAR_BACKGROUND_COLOR="#09090b";const be=LGraphCanvas.node_colors.bgcolor,Ae={ColorPalette:{id:"milk_white",name:"Milk White",colors:{node_slot:{CLIP:"#FFA726",CLIP_VISION:"#5C6BC0",CLIP_VISION_OUTPUT:"#8D6E63",CONDITIONING:"#EF5350",CONTROL_NET:"#66BB6A",IMAGE:"#42A5F5",LATENT:"#AB47BC",MASK:"#9CCC65",MODEL:"#7E57C2",STYLE_MODEL:"#D4E157",VAE:"#FF7043",PIPE_LINE:"#7737AA",PIPE_LINE_SDXL:"#7737AA",INT:"#29699C",X_Y:"#38291f",XYPLOT:"#74DA5D",LORA_STACK:"#94dccd",CONTROL_NET_STACK:"#94dccd"},litegraph_base:{BACKGROUND_IMAGE:"data:image/gif;base64,R0lGODlhZABkALMAAAAAAP///+vr6+rq6ujo6Ofn5+bm5uXl5d3d3f///wAAAAAAAAAAAAAAAAAAAAAAACH5BAEAAAkALAAAAABkAGQAAAT/UMhJq7046827HkcoHkYxjgZhnGG6si5LqnIM0/fL4qwwIMAg0CAsEovBIxKhRDaNy2GUOX0KfVFrssrNdpdaqTeKBX+dZ+jYvEaTf+y4W66mC8PUdrE879f9d2mBeoNLfH+IhYBbhIx2jkiHiomQlGKPl4uZe3CaeZifnnijgkESBqipqqusra6vsLGys62SlZO4t7qbuby7CLa+wqGWxL3Gv3jByMOkjc2lw8vOoNSi0czAncXW3Njdx9Pf48/Z4Kbbx+fQ5evZ4u3k1fKR6cn03vHlp7T9/v8A/8Gbp4+gwXoFryXMB2qgwoMMHyKEqA5fxX322FG8tzBcRnMW/zlulPbRncmQGidKjMjyYsOSKEF2FBlJQMCbOHP6c9iSZs+UnGYCdbnSo1CZI5F64kn0p1KnTH02nSoV3dGTV7FFHVqVq1dtWcMmVQZTbNGu72zqXMuW7danVL+6e4t1bEy6MeueBYLXrNO5Ze36jQtWsOG97wIj1vt3St/DjTEORss4nNq2mDP3e7w4r1bFkSET5hy6s2TRlD2/mSxXtSHQhCunXo26NevCpmvD/UU6tuullzULH76q92zdZG/Ltv1a+W+osI/nRmyc+fRi1Xdbh+68+0vv10dH3+77KD/i6IdnX669/frn5Zsjh4/2PXju8+8bzc9/6fj27LFnX11/+IUnXWl7BJfegm79FyB9JOl3oHgSklefgxAC+FmFGpqHIYcCfkhgfCohSKKJVo044YUMttggiBkmp6KFXw1oII24oYhjiDByaKOOHcp3Y5BD/njikSkO+eBREQAAOw==",CLEAR_BACKGROUND_COLOR:"lightgray",NODE_TITLE_COLOR:"#222",NODE_SELECTED_TITLE_COLOR:"#000",NODE_TEXT_SIZE:14,NODE_TEXT_COLOR:"#444",NODE_SUBTEXT_SIZE:12,NODE_DEFAULT_COLOR:"#F7F7F7",NODE_DEFAULT_BGCOLOR:"#F5F5F5",NODE_DEFAULT_BOXCOLOR:"#555",NODE_DEFAULT_SHAPE:"box",NODE_BOX_OUTLINE_COLOR:"#000",DEFAULT_SHADOW_COLOR:"rgba(0,0,0,0.1)",DEFAULT_GROUP_FONT:24,WIDGET_BGCOLOR:"#D4D4D4",WIDGET_OUTLINE_COLOR:"#999",WIDGET_TEXT_COLOR:"#222",WIDGET_SECONDARY_TEXT_COLOR:"#555",LINK_COLOR:"#9A9",EVENT_LINK_COLOR:"#FF9800",CONNECTING_LINK_COLOR:"#222"},comfy_base:{"fg-color":"#222","bg-color":"#DDD","comfy-menu-bg":"#F5F5F5","comfy-input-bg":"#C9C9C9","input-text":"#222","descrip-text":"#444","drag-text":"#555","error-text":"#F44336","border-color":"#bbb","tr-even-bg-color":"#f9f9f9","tr-odd-bg-color":"#fff","content-bg":"#e0e0e0","content-fg":"#222","content-hover-bg":"#adadad","content-hover-fg":"#222"}}},NODE_COLORS:{red:{color:"#af3535",bgcolor:be,groupcolor:"#A88"},brown:{color:"#38291f",bgcolor:be,groupcolor:"#b06634"},green:{color:"#346434",bgcolor:be,groupcolor:"#8A8"},blue:{color:"#1f1f48",bgcolor:be,groupcolor:"#88A"},pale_blue:{color:"#006691",bgcolor:be,groupcolor:"#3f789e"},cyan:{color:"#008181",bgcolor:be,groupcolor:"#8AA"},purple:{color:"#422342",bgcolor:be,groupcolor:"#a1309b"},yellow:{color:"#c09430",bgcolor:be,groupcolor:"#b58b2a"},black:{color:"rgba(0,0,0,.8)",bgcolor:be,groupcolor:"#444"}}},Se={"Workflow created by":"工作流创建者","Watch more video content":"观看更多视频内容","Workflow Guide":"工作流指南","💎 View Checkpoint Info...":"💎 查看 Checkpoint 信息...","💎 View Lora Info...":"💎 查看 Lora 信息...","🔃 Reload Node":"🔃 刷新节点","Updated At:":"最近更新：","Created At:":"首次发布：","✏️ Edit":"✏️ 编辑","💾 Save":"💾 保存","No notes":"当前还没有备注内容","Saving Notes...":"正在保存备注...","Type your notes here":"在这里输入备注内容",ModelName:"模型名称","Models Required":"所需模型","Download Model":"下载模型","Source Url":"模型源地址",Notes:"备注",Type:"类型","Trained Words":"训练词",BaseModel:"基础算法",Details:"详情",Description:"描述",Download:"下载量",Source:"来源","Saving Preview...":"正在保存预览图...","Saving Succeed":"保存成功","Clean SuccessFully":"清理成功","Clean Failed":"清理失败","Saving Failed":"保存失败","No COMBO link":"沒有找到COMBO连接","Reboot ComfyUI":"重启ComfyUI","Are you sure you'd like to reboot the server?":"是否要重启ComfyUI？","Nodes Map":"管理节点组","Nodes map sorting mode":"管理节点组排序模式","No Nodes":"未找到节点","No nodes found in the map":"在工作流程中没有找到节点","Expand All":"展开所有组","Collapse All":"折叠所有组",Close:"关闭","Default automatic sorting, if set to manual, groups can be dragged and dropped and the sorting results saved.":"默认自动排序，如果设置为手动，组可以拖放并保存排序结果。","For drag and drop sorting, please find Nodes map sorting mode in Settings->EasyUse and change it to manual":"如需拖拽排序请在设置->EasyUse节点中找到管理节点组排序模式并修改成 manual",Queue:"队列","Cleanup Of VRAM Usage":"清理显存占用","Please stop all running tasks before cleaning GPU":"请在清理GPU之前停止所有运行中的任务",Always:"启用中",Bypass:"已忽略",Never:"已停用","Auto Sorting":"自动排序","Toggle `Show/Hide` can set mode of group, LongPress can set group nodes to never":"点击`启用中/已忽略`可设置组模式, 长按可停用该组节点","Enable Shift+Up/Down/Left/Right key to align selected nodes":"启用 `Shift+上/下/左/右` 键对齐选中的节点","Enable Shift+g to add selected nodes to a group":"启用 `Shift+g` 键将选中的节点添加一个组","Enable Shift+r to unload models and node cache":"启用 `Shift+r` 键卸载模型和节点缓存","Enable Up/Down/Left/Right key to jump nearest nodes":"启用 `上/下/左/右` 键跳转到最近的前后节点","Enable ALT+1~9 to paste nodes from nodes template":"启用 `ALT+1~9` 从节点模板粘贴到工作流中","Enable contextMenu auto nest subdirectories":"启用上下文菜单自动嵌套子目录","Enable right-click menu to add node A~Z sorting":"启用右键菜单中新建节点A~Z排序","Enable model thumbnails display":"启动模型预览图显示","Enable nodes runtime display":"启动节点运行时间显示","Enable chain get node and set node with parent nodes":"启用将获取点和设置点与父节点链在一起","Maximum number of model thumbnails displayed":"显示的模型缩略图的最大数量","Too many thumbnails will affect the first loading time, set the maximum value to not load the thumbnail function when there are too many models's thumbnail":"太多的缩略图会影响首次加载时间，当模型缩略图太多时，设置最大值以不加载缩略图功能","Too many thumbnails, have closed the display":"模型缩略图太多啦，为您关闭了显示","Get styles list Failed":"获取样式列表失败","Get style image Failed":"获取样式图片失败","Empty All":"清空所有","Type here to search styles ...":"在此处输入以搜索样式 ...","Loading UserInfo...":"正在获取用户信息...","Please set the APIKEY first":"请先设置APIKEY","Setting APIKEY":"设置APIKEY","Save Account Info":"保存账号信息",Choose:"选择",Delete:"删除",Edit:"编辑","At least one account is required":"删除失败: 至少需要一个账户","APIKEY is not Empty":"APIKEY 不能为空","Add Account":"添加账号","Getting Your APIKEY":"获取您的APIKEY","Choose Selected Images":"选择选中的图片","Choose images to continue":"选择图片以继续",Background:"背景",Hat:"帽子",Hair:"头发",Body:"身体",Face:"脸部",Clothes:"衣服",Others:"其他",Glove:"手套",Sunglasses:"太阳镜","Upper-clothes":"上衣",Dress:"连衣裙",Coat:"外套",Socks:"袜子",Pants:"裤子",Jumpsuits:"连体衣",Scarf:"围巾",Skirt:"裙子","Left-arm":"左臂","Right-arm":"右臂","Left-leg":"左腿","Right-leg":"右腿","Left-shoe":"左鞋","Right-shoe":"右鞋",s:"秒","No Node Templates Found":"未找到节点模板预设","Get Node Templates File Failed":"获取节点模板文件失败","Node template with {key} not set":"未设置快捷键为{key}的节点预设","ComfyUI Basic":"ComfyUI 基础节点","Recommend Nodes":"推荐节点","Others A~Z":"其他节点 A~Z"},Ee=le("AGL.Locale"),Ce=(e,t=!1)=>"zh-CN"===(t?navigator.language:Ee)&&Se[e]||e,Le={addGroup:{id:"EasyUse.Hotkeys.AddGroup",name:Ce("Enable Shift+g to add selected nodes to a group"),type:"boolean",defaultValue:!0},cleanVRAMUsed:{id:"EasyUse.Hotkeys.cleanVRAMUsed",name:Ce("Enable Shift+r to unload models and node cache"),type:"boolean",defaultValue:!0},alignSelectedNodes:{id:"EasyUse.Hotkeys.AlignSelectedNodes",name:Ce("Enable Shift+Up/Down/Left/Right key to align selected nodes"),type:"boolean",defaultValue:!0},nodesTemplate:{id:"EasyUse.Hotkeys.NodesTemplate",name:Ce("Enable ALT+1~9 to paste nodes from nodes template"),type:"boolean",defaultValue:!0},jumpNearestNodes:{id:"EasyUse.Hotkeys.JumpNearestNodes",name:Ce("Enable Up/Down/Left/Right key to jump nearest nodes"),type:"boolean",defaultValue:!0},subDirectories:{id:"EasyUse.ContextMenu.SubDirectories",name:Ce("Enable contextMenu auto nest subdirectories"),type:"boolean",defaultValue:!1},modelsThumbnails:{id:"EasyUse.ContextMenu.ModelsThumbnails",name:Ce("Enable model thumbnails display"),type:"boolean",defaultValue:!1},modelsThumbnailsLimit:{id:"EasyUse.ContextMenu.ModelsThumbnailsLimit",name:Ce("Maximum number of model thumbnails displayed"),tooltip:Ce("Too many thumbnails will affect the first loading time, set the maximum value to not load the thumbnail function when there are too many models's thumbnail"),type:"slider",attrs:{min:0,max:5e3,step:100},defaultValue:500},rightMenuNodesSort:{id:"EasyUse.ContextMenu.NodesSort",name:Ce("Enable right-click menu to add node A~Z sorting"),type:"boolean",defaultValue:!0},nodesRuntime:{id:"EasyUse.Nodes.Runtime",name:Ce("Enable nodes runtime display"),type:"boolean",defaultValue:!0},chainGetSet:{id:"EasyUse.Nodes.ChainGetSet",name:Ce("Enable chain get node and set node with parent nodes"),type:"boolean",defaultValue:!0},nodesMap:{id:"EasyUse.NodesMap.Sorting",name:Ce("Nodes map sorting mode"),tooltip:Ce("Default automatic sorting, if set to manual, groups can be dragged and dropped and the sorting results saved."),type:"combo",options:["Auto sorting","Manual drag&drop sorting"],defaultValue:"Auto sorting"}};function ke(e=100,t){return new Promise((s=>{setTimeout((()=>{s(t)}),e)}))}const xe=new class{constructor(){y(this,"element",te(`div.${ue}toast`)),y(this,"children",HTMLElement),y(this,"container",document.body),this.container.appendChild(this.element)}async show(e){let t=te(`div.${ue}toast-container`,[te("div",[te("span",[...e.icon?[te("i",{className:e.icon})]:[],te("span",e.content)])])]);t.setAttribute("toast-id",e.id),this.element.replaceChildren(t),this.container.appendChild(this.element),await ke(64),t.style.marginTop=`-${t.offsetHeight}px`,await ke(64),t.classList.add("show"),e.duration&&(await ke(e.duration),this.hide(e.id))}async hide(e){const t=document.querySelector(`.${ue}toast > [toast-id="${e}"]`);(null==t?void 0:t.classList.contains("show"))&&(t.classList.remove("show"),await ke(750)),t&&t.remove()}async clearAllMessages(){let e=document.querySelector(`.${ue}container`);e&&(e.innerHTML="")}async info(e,t=3e3,s=[]){this.show({id:"toast-info",icon:`mdi mdi-information ${ue}theme`,content:e,duration:t})}async success(e,t=3e3){this.show({id:"toast-success",icon:`mdi mdi-check-circle ${ue}success`,content:e,duration:t})}async error(e,t=3e3){this.show({id:"toast-error",icon:`mdi mdi-close-circle ${ue}error`,content:e,duration:t})}async warn(e,t=3e3){this.show({id:"toast-warn",icon:`mdi mdi-alert-circle ${ue}warning`,content:e,duration:t})}async showLoading(e,t=0){this.show({id:"toast-loading",icon:"mdi mdi-rotate-right loading",content:e,duration:t})}async hideLoading(){this.hide("toast-loading")}},Ie=async()=>{try{const{Running:e,Pending:t}=await ee.getQueue();if(e.length>0||t.length>0)return void xe.error(Ce("Clean Failed")+":"+Ce("Please stop all running tasks before cleaning GPU"));200==(await ee.fetchApi("/easyuse/cleangpu",{method:"POST"})).status?xe.success(Ce("Clean SuccessFully")):xe.error(Ce("Clean Failed"))}catch(e){}},Ne=v("groups",{state:e=>({groups:[],nodes:[],nodesDefs:[],aglTranslation:[],isWatching:!1}),getters:{groups_nodes(){var e;let t=[],s=[];if((null==(e=this.nodes)?void 0:e.length)>0){this.nodes.map((e=>{let o=e.pos,n=!1;for(let s=0;s<this.groups.length;s++){let i=this.groups[s];if(o[0]>i.pos[0]&&o[0]<i.pos[0]+i.size[0]&&o[1]>i.pos[1]&&o[1]<i.pos[1]+i.size[1]){t[s]||(t[s]={info:i,children:[]}),t[s].children.push(e),n=!0;break}}n||s.push({info:e})}));for(let e=0;e<this.groups.length;e++)t[e]||(t[e]={info:this.groups[e],children:[]})}return[...t,...s]}},actions:{setGroups(e){this.groups="Manual drag&drop sorting"==le("EasyUse.NodesMap.Sorting")?_(e):_(e.sort(((e,t)=>e.pos[0]-t.pos[0])).sort(((e,t)=>e.pos[1]-t.pos[1])))},setNodes(e){this.nodes=_(e)},update(){($.extensionManager.activeSidebarTab===ye||this.isWatching)&&setTimeout((e=>{this.setGroups($.canvas.graph._groups),this.setNodes($.canvas.graph._nodes)}),1)},watchGraph(e=!1){e&&(this.isWatching=!0);let t=this;this.update();const s=$.graph.onNodeAdded;$.graph.onNodeAdded=function(e){t.update();const o=e.onRemoved;return e.onRemoved=function(){return t.update(),null==o?void 0:o.apply(this,arguments)},null==s?void 0:s.apply(this,arguments)},$.canvas.onNodeMoved=function(e){t.update()};const o=LGraphCanvas.onNodeAlign;LGraphCanvas.onNodeAlign=function(e){return t.update(),null==o?void 0:o.apply(this,arguments)};const n=LGraphCanvas.onGroupAdd;LGraphCanvas.onGroupAdd=function(){return t.update(),null==n?void 0:n.apply(this,arguments)};const i=LGraphCanvas.onGroupAlign;LGraphCanvas.onGroupAlign=function(e){return t.update(),null==i?void 0:i.apply(this,arguments)};const a=LGraphCanvas.onMenuNodeRemove;LGraphCanvas.onMenuNodeRemove=function(e){return t.update(),null==a?void 0:a.apply(this,arguments)}},unwatchGraph(){this.isWatching=!1},async getAglTranslation(){this.aglTranslation=await(async()=>{let e=new FormData;e.append("locale",Ee);const t=await ee.fetchApi("/agl/get_translation",{method:"POST",body:e});if(200==t.status){const e=await t.json();return e&&"{}"!=e?{nodeCategory:e.NodeCategory,nodes:e.Nodes}:null}return null})()}}});let Te=null;const De=["custom_obsidian","custom_obsidian_dark","custom_milk_white"],Oe={"easy positive":"green","easy negative":"red","easy promptList":"cyan","easy promptLine":"cyan","easy promptConcat":"cyan","easy promptReplace":"cyan","easy textSwitch":"pale_blue"};let Re=LGraphCanvas.node_colors,Me=null,Ge=null,Pe=null,Be=null;for(let Ko in Le)Fe=Le[Ko],$.ui.settings.addSetting(Fe);var Fe;function Ue(e,t=!1){let s="after",o="before";t&&([o,s]=[s,o]),e.label=(e.label??e.name).replace(o,s),e.name=e.label}function ze(e,t,s,o,n,i,a){t.strokeStyle=o,t.fillStyle=n;let l=LiteGraph.NODE_TITLE_HEIGHT,r=this.ds.scale<.5,d=e._shape||e.constructor.shape||LiteGraph.ROUND_SHAPE,u=e.constructor.title_mode,c=!0;u==LiteGraph.TRANSPARENT_TITLE||u==LiteGraph.NO_TITLE?c=!1:u==LiteGraph.AUTOHIDE_TITLE&&mouse_over&&(c=!0);let p=new Float32Array(4);p=[0,c?-l:0,s[0]+1,c?s[1]+l:s[1]];let h=t.globalAlpha;if(t.lineWidth=1,t.beginPath(),d==LiteGraph.BOX_SHAPE||r?t.fillRect(p[0],p[1],p[2],p[3]):d==LiteGraph.ROUND_SHAPE||d==LiteGraph.CARD_SHAPE?t.roundRect(p[0],p[1],p[2],p[3],d==LiteGraph.CARD_SHAPE?[this.round_radius,this.round_radius,0,0]:[this.round_radius]):d==LiteGraph.CIRCLE_SHAPE&&t.arc(.5*s[0],.5*s[1],.5*s[0],0,2*Math.PI),t.strokeStyle=LiteGraph.WIDGET_OUTLINE_COLOR,t.stroke(),t.strokeStyle=o,t.fill(),!e.flags.collapsed&&c&&(t.shadowColor="transparent",t.fillStyle="rgba(0,0,0,0.2)",t.fillRect(0,-1,p[2],2)),t.shadowColor="transparent",e.onDrawBackground&&e.onDrawBackground(t,this,this.canvas,this.graph_mouse),c||u==LiteGraph.TRANSPARENT_TITLE){const n="dark"==function(e){let t=e.replace("#","");return s=parseInt(t.substring(0,2),16),o=parseInt(t.substring(2,4),16),n=parseInt(t.substring(4,6),16),.299*s+.587*o+.114*n>127.5?"light":"dark";var s,o,n}((null==e?void 0:e.color)||"#ffffff");if(e.onDrawTitleBar)e.onDrawTitleBar(t,l,s,this.ds.scale,o);else if(u!=LiteGraph.TRANSPARENT_TITLE&&(e.constructor.title_color||this.render_title_colored)){let n=e.constructor.title_color||o;if(e.flags.collapsed&&(t.shadowColor=LiteGraph.DEFAULT_SHADOW_COLOR),this.use_gradients){let e=LGraphCanvas.gradients[n];e||(e=LGraphCanvas.gradients[n]=t.createLinearGradient(0,0,400,0),e.addColorStop(0,n),e.addColorStop(1,"#000")),t.fillStyle=e}else t.fillStyle=n;t.beginPath(),d==LiteGraph.BOX_SHAPE||r?t.rect(0,-l,s[0]+1,l):d!=LiteGraph.ROUND_SHAPE&&d!=LiteGraph.CARD_SHAPE||t.roundRect(0,-l,s[0]+1,l,e.flags.collapsed?[this.round_radius]:[this.round_radius,this.round_radius,0,0]),t.fill(),t.shadowColor="transparent"}let a=!1;LiteGraph.node_box_coloured_by_mode&&LiteGraph.NODE_MODES_COLORS[e.mode]&&(a=LiteGraph.NODE_MODES_COLORS[e.mode]),LiteGraph.node_box_coloured_when_on&&(a=e.action_triggered?"#FFF":e.execute_triggered?"#AAA":a);let c=10;if(e.onDrawTitleBox)e.onDrawTitleBox(t,l,s,this.ds.scale);else if(d==LiteGraph.ROUND_SHAPE||d==LiteGraph.CIRCLE_SHAPE||d==LiteGraph.CARD_SHAPE){const s=n?"#ffffff":LiteGraph.NODE_SELECTED_TITLE_COLOR,o=n?"#eeeeee":e.boxcolor||a||LiteGraph.NODE_DEFAULT_BOXCOLOR;t.fillStyle=i?s:o,t.beginPath(),t.fillRect(10,0-1.05*c-1,1.1*c,.125*c),t.fillRect(10,0-1.45*c-1,1.1*c,.125*c),t.fillRect(10,0-1.85*c-1,1.1*c,.125*c)}else t.fillStyle=e.boxcolor||a||LiteGraph.NODE_DEFAULT_BOXCOLOR,t.fillRect(.5*(l-c),-.5*(l+c),c,c);if(t.globalAlpha=h,e.onDrawTitleText&&e.onDrawTitleText(t,l,s,this.ds.scale,this.title_text_font,i),!r){t.font=this.title_text_font;let s=String(e.getTitle());s&&(t.fillStyle=i?n?"#ffffff":LiteGraph.NODE_SELECTED_TITLE_COLOR:n?"#ffffff":e.constructor.title_text_color||this.node_title_color,e.flags.collapsed?(t.textAlign="left",t.measureText(s),t.fillText(s.substr(0,20),l,LiteGraph.NODE_TITLE_TEXT_Y-l),t.textAlign="left"):(t.textAlign="left",t.fillText(s,l,LiteGraph.NODE_TITLE_TEXT_Y-l)))}if(!e.flags.collapsed&&e.subgraph&&!e.skip_subgraph_button){let s=LiteGraph.NODE_TITLE_HEIGHT,o=e.size[0]-s,n=LiteGraph.isInsideRectangle(this.graph_mouse[0]-e.pos[0],this.graph_mouse[1]-e.pos[1],o+2,2-s,s-4,s-4);t.fillStyle=n?"#888":"#555",d==LiteGraph.BOX_SHAPE||r?t.fillRect(o+2,2-s,s-4,s-4):(t.beginPath(),t.roundRect(o+2,2-s,s-4,s-4,[4]),t.fill()),t.fillStyle="#333",t.beginPath(),t.moveTo(o+.2*s,.6*-s),t.lineTo(o+.8*s,.6*-s),t.lineTo(o+.5*s,.3*-s),t.fill()}e.onDrawTitle&&e.onDrawTitle(t)}if(i){e.onBounding&&e.onBounding(p),u==LiteGraph.TRANSPARENT_TITLE&&(p[1]-=l,p[3]+=l),t.lineWidth=2,t.globalAlpha=.8,t.beginPath();let n=0,i=0,a=1;d==LiteGraph.BOX_SHAPE?t.rect(n+p[0],n+p[1],i+p[2],i+p[3]):d==LiteGraph.ROUND_SHAPE||d==LiteGraph.CARD_SHAPE&&e.flags.collapsed?t.roundRect(n+p[0],n+p[1],i+p[2],i+p[3],[this.round_radius*a]):d==LiteGraph.CARD_SHAPE?t.roundRect(n+p[0],n+p[1],i+p[2],i+p[3],[this.round_radius*a,a,this.round_radius*a,a]):d==LiteGraph.CIRCLE_SHAPE&&t.arc(.5*s[0],.5*s[1],.5*s[0]+6,0,2*Math.PI),t.strokeStyle=LiteGraph.NODE_BOX_OUTLINE_COLOR,t.stroke(),t.strokeStyle=o,t.globalAlpha=1}e.execute_triggered>0&&e.execute_triggered--,e.action_triggered>0&&e.action_triggered--}function je(e,t,s,o){if(!e.widgets||!e.widgets.length)return 0;let n=e.size[0],i=e.widgets;t+=2;let a=LiteGraph.NODE_WIDGET_HEIGHT,l=this.ds.scale>.5;s.save(),s.globalAlpha=this.editor_alpha;let r=LiteGraph.WIDGET_OUTLINE_COLOR,d=LiteGraph.WIDGET_BGCOLOR,u=LiteGraph.WIDGET_TEXT_COLOR,c=LiteGraph.WIDGET_SECONDARY_TEXT_COLOR,p=12;for(let h=0;h<i.length;++h){let m=i[h],g=t;m.y&&(g=m.y),m.last_y=g,s.strokeStyle=r,s.fillStyle=d,s.textAlign="left",s.lineWidth=1,m.disabled&&(s.globalAlpha*=.5);let f=m.width||n;switch(m.type){case"button":s.font="10px Inter",s.fillStyle=d,m.clicked&&(s.fillStyle="#AAA",m.clicked=!1,this.dirty_canvas=!0),s.beginPath(),s.roundRect(p,g,f-24,a,[.25*a]),s.fill(),l&&!m.disabled&&s.stroke(),l&&(s.textAlign="center",s.fillStyle=u,s.fillText(m.label||m.name,.5*f,g+.7*a));break;case"toggle":if(s.font="10px Inter",s.textAlign="left",s.strokeStyle=r,s.fillStyle=d,s.beginPath(),l?s.roundRect(p,g,f-24,a,[.25*a]):s.rect(p,g,f-24,a),s.fill(),l&&!m.disabled&&s.stroke(),s.fillStyle=m.value?pe:r,s.beginPath(),s.arc(f-24,g+.5*a,.25*a,0,2*Math.PI),s.fill(),l){s.fillStyle=c;const e=m.label||m.name;null!=e&&s.fillText(e,1.6*p,g+.7*a),s.font="10px Inter",s.fillStyle=m.value?u:c,s.textAlign="right",s.fillText(m.value?m.options.on||"true":m.options.off||"false",f-35,g+.7*a)}break;case"slider":s.font="10px Inter",s.fillStyle=d,s.strokeStyle=r,s.beginPath(),s.roundRect(p,g,f-24,a,[.25*a]),s.fill(),s.stroke();let t=m.options.max-m.options.min,n=(m.value-m.options.min)/t;if(n<0&&(n=0),n>1&&(n=1),s.fillStyle=m.options.hasOwnProperty("slider_color")?m.options.slider_color:o==m?r:pe,s.beginPath(),s.roundRect(p,g,n*(f-24),a,[.25*a]),s.fill(),m.marker){let e=(m.marker-m.options.min)/t;e<0&&(e=0),e>1&&(e=1),s.fillStyle=m.options.hasOwnProperty("marker_color")?m.options.marker_color:"#AA9",s.roundRect(p+e*(f-24),g,2,a,[.25*a])}if(l){s.textAlign="center",s.fillStyle=u;let e=(m.label||m.name)+": "+Number(m.value).toFixed(null!=m.options.precision?m.options.precision:3).toString();s.fillText(e,.5*f,g+.7*a)}break;case"number":case"combo":if(s.textAlign="left",s.strokeStyle=r,s.fillStyle=d,s.beginPath(),l?s.roundRect(p,g,f-24,a,[.25*a]):s.rect(p,g,f-24,a),s.fill(),l){m.disabled||s.stroke(),s.fillStyle=u,m.disabled||(s.beginPath(),s.moveTo(24,g+6.5),s.lineTo(18,g+.5*a),s.lineTo(24,g+a-6.5),s.fill(),s.beginPath(),s.moveTo(f-p-12,g+6.5),s.lineTo(f-p-6,g+.5*a),s.lineTo(f-p-12,g+a-6.5),s.fill()),s.fillStyle=c,s.font="10px Inter",s.fillText(m.label||m.name,29,g+.7*a),s.fillStyle=u,s.textAlign="right";let e=6;if("number"==m.type)s.font="10px Inter",s.fillText(Number(m.value).toFixed(void 0!==m.options.precision?m.options.precision:3),f-24-e,g+.7*a);else{let t=m.value;if(m.options.values){let e=m.options.values;e.constructor===Function&&(e=e()),e&&e.constructor!==Array&&(t=e[m.value])}s.fillText(t,f-24-e,g+.7*a)}}break;case"string":case"text":if(s.textAlign="left",s.strokeStyle=r,s.fillStyle=d,s.beginPath(),l?s.roundRect(p,g,f-24,a,[.25*a]):s.rect(p,g,f-24,a),s.fill(),l){m.disabled||s.stroke(),s.save(),s.beginPath(),s.rect(p,g,f-24,a),s.clip(),s.fillStyle=c;const e=m.label||m.name;s.font="10px Inter",null!=e&&s.fillText(e,24,g+.7*a),s.fillStyle=u,s.textAlign="right",s.fillText(String(m.value).substr(0,30),f-24,g+.7*a),s.restore()}break;default:m.draw&&m.draw(s,e,f,g,a)}t+=(m.computeSize?m.computeSize(f)[1]:a)+4,s.globalAlpha=this.editor_alpha}s.restore(),s.textAlign="left"}function He(e,t,s,o,n){return new LiteGraph.ContextMenu(LiteGraph.NODE_MODES,{event:s,callback:function(e){if(!n)return;var t=Object.values(LiteGraph.NODE_MODES).indexOf(e),s=function(e){t>=0&&LiteGraph.NODE_MODES[t]?e.changeMode(t):e.changeMode(LiteGraph.ALWAYS),Te||(Te=Ne()),Te.update()},o=LGraphCanvas.active_canvas;if(!o.selected_nodes||Object.keys(o.selected_nodes).length<=1)s(n);else for(var i in o.selected_nodes)s(o.selected_nodes[i])},parentMenu:o,node:n}),!1}function We(e,t,s,o,n){if(!n)throw"no node for color";var i=[];for(var a in i.push({value:null,content:"<span style='display: block; padding-left: 4px;'>No color</span>"}),LGraphCanvas.node_colors){var l=LGraphCanvas.node_colors[a];e={value:a,content:"<span style='display: block; color: #999; padding-left: 4px; border-left: 8px solid "+l.color+"; background-color:"+l.bgcolor+"'>"+a+"</span>"};i.push(e)}return new LiteGraph.ContextMenu(i,{event:s,callback:function(e){if(!n)return;var t=e.value?LGraphCanvas.node_colors[e.value]:null,s=function(e){t?e.constructor===LiteGraph.LGraphGroup?e.color=t.groupcolor:(e.color=t.color,e.bgcolor=t.bgcolor):(delete e.color,delete e.bgcolor),Te||(Te=Ne()),Te.update()},o=LGraphCanvas.active_canvas;if(!o.selected_nodes||Object.keys(o.selected_nodes).length<=1)s(n);else for(var i in o.selected_nodes)s(o.selected_nodes[i]);n.setDirtyCanvas(!0,!0)},parentMenu:o,node:n}),!1}function Ye(e,t,s,o,n){var i=e.property||"title",a=n[i],l=document.createElement("div");l.is_modified=!1,l.className="graphdialog",l.innerHTML="<span class='name'></span><input autofocus type='text' class='value'/><button>OK</button>",l.close=function(){l.parentNode&&l.parentNode.removeChild(l)},l.querySelector(".name").innerText=i;var r=l.querySelector(".value");r&&(r.value=a,r.addEventListener("blur",(function(e){this.focus()})),r.addEventListener("keydown",(function(e){if(l.is_modified=!0,27==e.keyCode)l.close();else if(13==e.keyCode)m();else if(13!=e.keyCode&&"textarea"!=e.target.localName)return;e.preventDefault(),e.stopPropagation()})));var d=LGraphCanvas.active_canvas.canvas,u=d.getBoundingClientRect(),c=-20,p=-20;u&&(c-=u.left,p-=u.top),event?(l.style.left=event.clientX+c+"px",l.style.top=event.clientY+p+"px"):(l.style.left=.5*d.width+c+"px",l.style.top=.5*d.height+p+"px"),l.querySelector("button").addEventListener("click",m),d.parentNode.appendChild(l),r&&r.focus();var h=null;function m(){r&&function(t){"Number"==e.type?t=Number(t):"Boolean"==e.type&&(t=Boolean(t));n[i]=t,l.parentNode&&l.parentNode.removeChild(l);n.setDirtyCanvas(!0,!0),Te||(Te=Ne());Te.update()}(r.value)}l.addEventListener("mouseleave",(function(e){LiteGraph.dialog_close_on_mouse_leave&&!l.is_modified&&LiteGraph.dialog_close_on_mouse_leave&&(h=setTimeout(l.close,LiteGraph.dialog_close_on_mouse_leave_delay))})),l.addEventListener("mouseenter",(function(e){LiteGraph.dialog_close_on_mouse_leave&&h&&clearTimeout(h)}))}$.registerExtension({name:"Comfy.EasyUse.UI",init(){var e,t;const s="Comfy.CustomColorPalettes",o="Comfy.Settings.Comfy.CustomColorPalettes";if(Ge||(Ge=le(s,o)),Pe||(Pe=le("Comfy.ColorPalette","Comfy.Settings.Comfy.ColorPalette")||"dark"),(!(null==(e=null==Ge?void 0:Ge.obsidian)?void 0:e.version)||Ge.obsidian.version<_e.ColorPalette.version)&&(Ge.obsidian=_e.ColorPalette,Ge.obsidian_dark=we.ColorPalette,re(s,Ge,o)),(!(null==(t=null==Ge?void 0:Ge.milk_white)?void 0:t.version)||Ge.milk_white.version<Ae.ColorPalette.version)&&(Ge.milk_white=Ae.ColorPalette,re(s,Ge,o)),De.includes(Pe)){switch(document.body.classList+=" comfyui-easyuse",function(e,t=!1){const s=document.createElement("link");s.rel="preconnect",s.href=e,t&&(s.crossorigin=""),document.head.appendChild(s)}("https://fonts.googleapis.com",!0),function(e,t=!0,s="ComfyUI-Easy-Use"){const o=document.createElement("link");o.rel="stylesheet",o.type="text/css",o.href=t?`extensions/${s}/${e}`:e,document.head.appendChild(o)}("https://fonts.googleapis.com/css2?family=Inter:wght@100;200;300;400;500;600;700&amp;family=JetBrains+Mono&amp;display=swap",!1),Pe){case"custom_obsidian":case"custom_obsidian_dark":case"dark":LGraphCanvas.node_colors=_e.NODE_COLORS;break;case"custom_milk_white":case"light":LGraphCanvas.node_colors=Ae.NODE_COLORS}Re=LGraphCanvas.node_colors,LiteGraph.NODE_TEXT_SIZE=13,LGraphCanvas.prototype.drawNodeShape=ze,LGraphCanvas.prototype.drawNodeWidgets=je}else document.body.classList.remove("comfyui-easyuse");LGraphCanvas.onMenuNodeMode=He,LGraphCanvas.onMenuNodeColors=We,LGraphCanvas.onShowPropertyEditor=Ye},async setup(){Object.assign($.canvas.default_connection_color_byType,he),Object.assign(LGraphCanvas.link_type_colors,he),"custom_milk_white"==Pe&&document.body.classList.remove(ce),$.ui.settings.addEventListener("Comfy.ColorPalette.change",(async({detail:e})=>{(null==e?void 0:e.value)&&(null==e?void 0:e.oldValue)&&(await ke(1),Object.assign($.canvas.default_connection_color_byType,he),Object.assign(LGraphCanvas.link_type_colors,he)),"custom_milk_white"==e.value&&document.body.classList.remove(ce)})),setTimeout((e=>Ze(le("Comfy.UseNewMenu")||"Disabled")),1)},async nodeCreated(e){var t;if(Oe.hasOwnProperty(e.comfyClass)){const t=Oe[e.comfyClass],s=Re[t];if(!s)return;s.color&&(e.color=s.color),s.bgcolor&&(e.bgcolor=s.bgcolor)}if(Me||(Me=le("Comfy.WidgetControlMode")),"before"==Me){const s="before"==Me;if((null==(t=e.widgets)?void 0:t.length)>0)for(const t of e.widgets)if(["control_before_generate","control_after_generate"].includes(t.name)&&(await Ue(t,s),t.linkedWidgets))for(const e of t.linkedWidgets)await Ue(e,s)}}});const Ve=null==(m=$.ui.settings.settingsLookup)?void 0:m["Comfy.UseNewMenu"];Ve&&(Ve.onChange=e=>Ze(e));const Ze=e=>{var t;const s=(null==(t=document.getElementById("crystools-root"))?void 0:t.children)||null;if((null==s?void 0:s.length)>0){if(!Be)for(let e=0;e<s.length;e++)if("crystools-monitor-container"===s[e].id){Be=s[e];break}if(Be)if("Disabled"==e){for(let e=0;e<s.length&&"crystools-monitor-container"!==s[e].id;e++);document.getElementById("crystools-root").appendChild(Be)}else{let e=document.getElementById("comfyui-menu-monitor");e?e.appendChild(Be):$.menu.settingsGroup.element.before(te("div",{id:"comfyui-menu-monitor"},Be))}}};let Xe={};const Qe=(e,t)=>e.widgets.find((e=>e.name===t)),Ke=(e,t,s=!1,o="")=>{var n;if(!t||((e,t)=>!!e.inputs&&e.inputs.some((e=>e.name===t)))(e,t.name))return;Xe[t.name]||(Xe[t.name]={origType:t.type,origComputeSize:t.computeSize});const i=e.size;t.type=s?Xe[t.name].origType:"easyHidden"+o,t.computeSize=s?Xe[t.name].origComputeSize:()=>[0,-4],null==(n=t.linkedWidgets)||n.forEach((o=>Ke(e,o,":"+t.name,s)));const a=s?Math.max(e.computeSize()[1],i[1]):e.size[1];e.setSize([e.size[0],a])},Je=(e,t=0)=>{var s,o;if(e)return(null==(s=e.widgets)?void 0:s[t])?e.widgets[t].value:e.widgets_values?null==(o=e.widgets_values)?void 0:o[t]:void 0},qe=e=>e.setSize([e.size[0],e.computeSize()[1]]),$e=(e,t)=>graph.getNodeById(e),et=e=>{var t;try{return Object.values(null==(t=null==graph?void 0:graph.list_of_graphcanvas[0])?void 0:t.selected_nodes)}catch(s){return[]}};function tt(e,t,s){return e+(o=s,(.5-.5*Math.cos(Math.PI*o))*(t-e));var o}const st=(e,t=!0)=>{var s,o;const n=(null==(o=null==(s=e.graph)?void 0:s.list_of_graphcanvas)?void 0:o[0])||null;if(!n)return;const[i,a]=e.pos,[l,r]=e.size;(([e,t],s)=>{const o=s.ds,n=document.body.clientWidth,i=document.body.clientHeight,a=o.scale,l=.5*n/a-e,r=.5*i/a-t,d=Date.now()+250,u=o.offset[0],c=o.offset[1],p=()=>{const e=d-Date.now();if(!(Date.now()<d))return o.offset[0]=l,o.offset[1]=r,void s.setDirty(!0,!0);requestAnimationFrame(p);const t=1-e/250;o.offset[0]=tt(u,l,t),o.offset[1]=tt(c,r,t),s.setDirty(!0,!0)};requestAnimationFrame(p)})([i+l/2,a+r/2],n),t&&n.selectNode(e)},ot=e=>{const t=$e(e);t&&st(t)},nt=(e,t=(()=>graph.links??[])())=>t[e],it=e=>e.toLowerCase().replace(/_./g,(e=>e.replace("_","").toUpperCase())),at=e=>"easy getNode"===e.type,lt=e=>"easy setNode"===e.type,rt=e=>at(e)||lt(e),dt=(e=(()=>graph._nodes??[])())=>e.filter((e=>rt(e))),ut=(e,t,s=0)=>{e.widgets_values||(e.widgets_values=[]),e.widgets_values[s]=t,e.widgets[s].value=t},ct=e=>graph.add(e),pt=e=>graph.remove(e),ht=(e,t=0)=>{var s,o;if("Reroute"!==e.type)return[e,t];const n=e,i=null==(o=null==(s=n.inputs)?void 0:s[0])?void 0:o.link;if(!i)return[n,t];const a=nt(i);if(!a)return[n,t];const l=$e(a.origin_id);return l?(setTimeout((()=>{pt(n)})),ht(l,a.origin_slot)):[n,t]},mt=e=>{var t,s,o;if("Reroute"!==e.type)return e;const n=e,i=null==(s=null==(t=n.outputs)?void 0:t[0])?void 0:s.links;if(!i)return n;const a=i[0];if(!a)return n;const l=nt(a);if(!l)return n;const r=$e(l.target_id);return r?(1===(null==(o=n.outputs[0].links)?void 0:o.length)&&setTimeout((()=>{pt(n)})),mt(r)):n},gt=["rescale_after_model","rescale","lora_name","upscale_method","image_output","add_noise","info","sampler_name","ckpt_B_name","ckpt_C_name","save_model","refiner_ckpt_name","num_loras","num_controlnet","mode","toggle","resolution","ratio","target_parameter","input_count","replace_count","downscale_mode","range_mode","text_combine_mode","input_mode","lora_count","ckpt_count","conditioning_mode","preset","use_tiled","use_batch","num_embeds","easing_mode","guider","scheduler","inpaint_mode","t5_type","rem_mode"],ft=["LIGHT - SD1.5 only (low strength)","STANDARD (medium strength)","VIT-G (medium strength)","PLUS (high strength)","PLUS FACE (portraits)","FULL FACE - SD1.5 only (portraits stronger)"],yt=["FACEID","FACEID PLUS - SD1.5 only","FACEID PLUS V2","FACEID PLUS KOLORS","FACEID PORTRAIT (style transfer)","FACEID PORTRAIT UNNORM - SDXL only (strong)"],vt=["easy seed","easy latentNoisy","easy wildcards","easy preSampling","easy preSamplingAdvanced","easy preSamplingNoiseIn","easy preSamplingSdTurbo","easy preSamplingCascade","easy preSamplingDynamicCFG","easy preSamplingLayerDiffusion","easy fullkSampler","easy fullCascadeKSampler"],_t=["easy fullLoader","easy a1111Loader","easy comfyLoader","easy hyditLoader","easy pixArtLoader"],wt=["easy imageSize","easy imageSizeBySide","easy imageSizeByLongerSide","easy imageSizeShow","easy imageRatio","easy imagePixelPerfect"];function bt(e,t){const s=e.comfyClass,o=t.value;switch(t.name){case"range_mode":Ke(e,Qe(e,"step"),"step"==o),Ke(e,Qe(e,"num_steps"),"num_steps"==o),qe(e);break;case"text_combine_mode":Ke(e,Qe(e,"replace_text"),"replace"==o);break;case"lora_name":["lora_model_strength","lora_clip_strength"].map((t=>Ke(e,Qe(e,t),"None"!==o)));break;case"resolution":"自定义 x 自定义"===o&&(t.value="width x height (custom)"),["empty_latent_width","empty_latent_height"].map((t=>Ke(e,Qe(e,t),"width x height (custom)"===o)));break;case"ratio":["empty_latent_width","empty_latent_height"].map((t=>Ke(e,Qe(e,t),"custom"===o)));break;case"num_loras":var n=o+1,i=Qe(e,"mode").value;for(let t=0;t<n;t++)Ke(e,Qe(e,"lora_"+t+"_name"),!0),Ke(e,Qe(e,"lora_"+t+"_strength"),"simple"===i),["lora_"+t+"_model_strength","lora_"+t+"_clip_strength"].map((t=>Ke(e,Qe(e,t),"simple"!==i)));for(let t=n;t<21;t++)["lora_"+t+"_name","lora_"+t+"_strength","lora_"+t+"_model_strength","lora_"+t+"_clip_strength"].map((t=>Ke(e,Qe(e,t),!1)));qe(e);break;case"num_controlnet":n=o+1,i=Qe(e,"mode").value;for(let t=0;t<n;t++)["controlnet_"+t,"controlnet_"+t+"_strength","scale_soft_weight_"+t].map((t=>Ke(e,Qe(e,t),!0))),["start_percent_"+t,"end_percent_"+t].map((t=>Ke(e,Qe(e,t),"simple"!==i)));for(let t=n;t<21;t++)["controlnet_"+t,"controlnet_"+t+"_strength","scale_soft_weight_"+t,"start_percent_"+t,"end_percent_"+t].map((t=>Ke(e,Qe(e,t),!1)));qe(e);break;case"mode":switch(null==e?void 0:e.comfyClass){case"easy loraStack":n=Qe(e,"num_loras").value+1,i=o;for(let t=0;t<n;t++)Ke(e,Qe(e,"lora_"+t+"_strength"),"simple"===i),["lora_"+t+"_model_strength","lora_"+t+"_clip_strength"].map((t=>Ke(e,Qe(e,t),"simple"!==i)));qe(e);break;case"easy controlnetStack":n=Qe(e,"num_controlnet").value+1,i=o;for(let t=0;t<n;t++)["start_percent_"+t,"end_percent_"+t].map((t=>Ke(e,Qe(e,t),"simple"!==i)));qe(e);break;case"easy icLightApply":i=o;["lighting","remove_bg"].map((t=>Ke(e,Qe(e,t),"Foreground"===i))),Ke(e,Qe(e,"source"),"Foreground"!==i),qe(e)}break;case"toggle":t.type="toggle",t.options={on:"Enabled",off:"Disabled"};break;case"t5_type":["clip_name","padding"].map((t=>Ke(e,Qe(e,t),"sd3"==o))),["t5_name","device","dtype"].map((t=>Ke(e,Qe(e,t),"t5v11"==o))),qe(e);break;case"preset":if(ft.includes(o)){let t=Qe(e,"use_tiled");Ke(e,Qe(e,"lora_strength")),Ke(e,Qe(e,"provider")),Ke(e,Qe(e,"weight_faceidv2")),Ke(e,Qe(e,"weight_kolors")),Ke(e,Qe(e,"use_tiled"),!0),Ke(e,Qe(e,"sharpening"),t&&t.value)}else yt.includes(o)&&(Ke(e,Qe(e,"weight_faceidv2"),!!["FACEID PLUS V2","FACEID PLUS KOLORS"].includes(o)),Ke(e,Qe(e,"weight_kolors"),!!["FACEID PLUS KOLORS"].includes(t.value)),["FACEID PLUS KOLORS","FACEID PORTRAIT (style transfer)","FACEID PORTRAIT UNNORM - SDXL only (strong)"].includes(o)?Ke(e,Qe(e,"lora_strength"),!1):Ke(e,Qe(e,"lora_strength"),!0),Ke(e,Qe(e,"provider"),!0),Ke(e,Qe(e,"use_tiled")),Ke(e,Qe(e,"sharpening")));qe(e);break;case"use_tiled":Ke(e,Qe(e,"sharpening"),!!o),qe(e);break;case"num_embeds":n=o+1;for(let t=0;t<n;t++)Ke(e,Qe(e,"weight"+t),!0);for(let t=n;t<6;t++)Ke(e,Qe(e,"weight"+t));qe(e);break;case"inpaint_mode":switch(o){case"normal":case"fooocus_inpaint":["dtype","fitting","function","scale","start_at","end_at"].map((t=>Ke(e,Qe(e,t),!1)));break;case"brushnet_random":case"brushnet_segmentation":["dtype","scale","start_at","end_at"].map((t=>Ke(e,Qe(e,t),!0))),["fitting","function"].map((t=>Ke(e,Qe(e,t),!1)));break;case"powerpaint":["dtype","fitting","function","scale","start_at","end_at"].map((t=>Ke(e,Qe(e,t),!0)))}qe(e);break;case"image_output":Ke(e,Qe(e,"link_id"),!!["Sender","Sender&Save"].includes(o)),Ke(e,Qe(e,"decode_vae_name"),!!["Hide","Hide&Save"].includes(o)),["save_prefix","output_path","embed_workflow","number_padding","overwrite_existing"].map((t=>Ke(e,Qe(e,t),!!["Save","Hide&Save","Sender&Save"].includes(o))));break;case"add_noise":var a=Qe(e,"control_before_generate"),l=Qe(e,"control_after_generate")||a;"disable"===o?(Ke(e,Qe(e,"seed")),l&&(l.last_value=l.value,l.value="fixed",Ke(e,l))):(Ke(e,Qe(e,"seed"),!0),l&&((null==l?void 0:l.last_value)&&(l.value=l.last_value),Ke(e,l,!0))),qe(e);break;case"guider":switch(o){case"Basic":["cfg","cfg_negative"].map((t=>Ke(e,Qe(e,t))));break;case"CFG":Ke(e,Qe(e,"cfg"),!0),Ke(e,Qe(e,"cfg_negative"));break;case"IP2P+DualCFG":case"DualCFG":["cfg","cfg_negative"].map((t=>Ke(e,Qe(e,t),!0)))}qe(e);break;case"scheduler":["karrasADV","exponentialADV","polyExponential"].includes(o)?(["sigma_max","sigma_min"].map((t=>Ke(e,Qe(e,t),!0))),["denoise","beta_d","beta_min","eps_s","coeff"].map((t=>Ke(e,Qe(e,t))),!1),Ke(e,Qe(e,"rho"),"exponentialADV"!=o)):"vp"==o?(["sigma_max","sigma_min","denoise","rho","coeff"].map((t=>Ke(e,Qe(e,t)))),["beta_d","beta_min","eps_s"].map((t=>Ke(e,Qe(e,t),!0)))):(["sigma_max","sigma_min","beta_d","beta_min","eps_s","rho"].map((t=>Ke(e,Qe(e,t)))),Ke(e,Qe(e,"coeff"),"gits"==o),Ke(e,Qe(e,"denoise"),!0)),qe(e);break;case"conditioning_mode":["replace","concat","combine"].includes(o)?["average_strength","old_cond_start","old_cond_end","new_cond_start","new_cond_end"].map((t=>Ke(e,Qe(e,t)))):"average"==o?(Ke(e,Qe(e,"average_strength"),!0),["old_cond_start","old_cond_end","new_cond_start","new_cond_end"].map((t=>Ke(e,Qe(e,t),!1)))):"timestep"==o&&(["average_strength"].map((t=>Ke(e,Qe(e,t),!1))),["old_cond_start","old_cond_end","new_cond_start","new_cond_end"].map((t=>Ke(e,Qe(e,t)))));break;case"rescale":Qe(e,"rescale_after_model").value,Ke(e,Qe(e,"width"),"to Width/Height"===o),Ke(e,Qe(e,"height"),"to Width/Height"===o),Ke(e,Qe(e,"percent"),"by percentage"===o),Ke(e,Qe(e,"longer_side"),"to longer side - maintain aspect"===o),qe(e);break;case"upscale_method":["factor","crop"].map((t=>Ke(e,Qe(e,t),"None"!==o)));break;case"target_parameter":switch(s){case"easy XYInputs: Steps":["first_step","last_step"].map((t=>Ke(e,Qe(e,t),"steps"==o))),["first_start_step","last_start_step"].map((t=>Ke(e,Qe(e,t),"start_at_step"==o))),["first_end_step","last_end_step"].map((t=>Ke(e,Qe(e,t),"end_at_step"==o)));break;case"easy XYInputs: Sampler/Scheduler":let t=Qe(e,"input_count").value+1;for(let s=0;s<t;s++)Ke(e,Qe(e,"sampler_"+s),"scheduler"!==o),Ke(e,Qe(e,"scheduler_"+s),"sampler"!==o);qe(e);break;case"easy XYInputs: ControlNet":["first_strength","last_strength"].map((t=>Ke(e,Qe(e,t),"strength"==o))),["first_start_percent","last_start_percent"].map((t=>Ke(e,Qe(e,t),"start_percent"==o))),["first_end_percent","last_end_percent"].map((t=>Ke(e,Qe(e,t),"end_percent"==o))),["strength","start_percent","end_percent"].map((t=>Ke(e,Qe(e,t),o!=t))),qe(e)}case"replace_count":n=o+1;for(let t=0;t<n;t++)Ke(e,Qe(e,"replace_"+t),!0);for(let t=n;t<31;t++)Ke(e,Qe(e,"replace_"+t));qe(e);break;case"lora_count":n=o+1;var r=-1==Qe(e,"input_mode").value.indexOf("Weights");for(let t=0;t<n;t++)Ke(e,Qe(e,"lora_name_"+t),!0)["clip_str_"+t].map((t=>Ke(e,Qe(e,t),!r)));for(let t=n;t<11;t++)["lora_name_"+t,"model_str_"+t,"clip_str_"+t].map((t=>Ke(e,Qe(e,t),!1)));qe(e);break;case"ckpt_count":n=o+1;var d=-1!=Qe(e,"input_mode").value.indexOf("ClipSkip"),u=-1!=Qe(e,"input_mode").value.indexOf("VAE");for(let t=0;t<n;t++)Ke(e,Qe(e,"ckpt_name_"+t),!0),Ke(e,Qe(e,"clip_skip_"+t),!!d),Ke(e,Qe(e,"vae_name_"+t),!!u);for(let t=n;t<11;t++)["ckpt_name_"+t,"clip_skip_"+t,"vae_name_"+t].map((t=>Ke(e,Qe(e,t),!1)));qe(e);break;case"input_count":n=o+1;var c=Qe(e,"target_parameter").value;for(let t=0;t<n;t++)Ke(e,Qe(e,"sampler_"+t),"scheduler"!==c),Ke(e,Qe(e,"scheduler_"+t),"sampler"!==c);for(let t=n;t<31;t++)Ke(e,Qe(e,"sampler_"+t)),Ke(e,Qe(e,"scheduler_"+t));qe(e);break;case"input_mode":switch(s){case"easy XYInputs: Lora":n=Qe(e,"lora_count").value+1;const t=-1!=o.indexOf("Weights");for(let s=0;s<n;s++)Ke(e,Qe(e,"lora_name_"+s),!0),["model_str_"+s,"clip_str_"+s].map((s=>Ke(e,Qe(e,s),!t)));["model_strength","clip_strength"].map((s=>Ke(e,Qe(e,s),!t)));break;case"easy XYInputs: Checkpoint":n=Qe(e,"ckpt_count").value+1,d=-1!=Qe(e,"input_mode").value.indexOf("ClipSkip"),u=-1!=Qe(e,"input_mode").value.indexOf("VAE");for(let s=0;s<n;s++)Ke(e,Qe(e,"ckpt_name_"+s),!0),Ke(e,Qe(e,"clip_skip_"+s),!!d),Ke(e,Qe(e,"vae_name_"+s),!!u)}qe(e);break;case"rem_mode":Ke(e,Qe(e,"torchscript_jit"),"Inspyrenet"===o),qe(e)}}$.registerExtension({name:"Comfy.EasyUse.Widget",async beforeRegisterNodeDef(e,t,s){const o=t.name,n=e.prototype.onAdded,i=e.prototype.onNodeCreated,a=e.prototype.onConfigure,l=e.prototype.onExecuted;if(["easy showAnything","easy showTensorShape","easy showSpentTime","easy imageInterrogator","easy showLoaderSettingsNames"].includes(o)){let n=function(e,t="text"){var o,n;if(this.widgets){const e=this.widgets.findIndex((e=>e.name===t));if(-1!==e){for(let t=e;t<this.widgets.length;t++)null==(n=(o=this.widgets[t]).onRemove)||n.call(o);this.widgets.length=e}}for(const i of e){const e=oe.STRING(this,"text",["STRING",{multiline:!0}],s).widget;e.inputEl.readOnly=!0,e.inputEl.style.opacity=.6,e.value=i}requestAnimationFrame((()=>{var e;const t=this.computeSize();t[0]<this.size[0]&&(t[0]=this.size[0]),t[1]<this.size[1]&&(t[1]=this.size[1]),null==(e=this.onResize)||e.call(this,t),s.graph.setDirtyCanvas(!0,!1)}))};e.prototype.onExecuted=function(e){null==l||l.apply(this,arguments),n.call(this,e.text,"text")},["easy imageInterrogator"].includes(t.name)||(e.prototype.onConfigure=function(){var e;null==a||a.apply(this,arguments);let t="text";switch(o){case"easy showLoaderSettingsNames":t="names";break;case"easy showSpentTime":t="spent_time";break;default:t="text"}(null==(e=this.widgets_values)?void 0:e.length)&&n.call(this,this.widgets_values,t)})}if(wt.includes(o)){let t=function(e){var t="";for(let s=0;s<e.length;s++)t+=e[s];if(this.widgets){const e=this.widgets.findIndex((e=>"info"===e.name));if(-1!==e&&this.widgets[e]){this.widgets[e].value=t}}requestAnimationFrame((()=>{var e;const t=this.computeSize();t[0]<this.size[0]&&(t[0]=this.size[0]),t[1]<this.size[1]&&(t[1]=this.size[1]),null==(e=this.onResize)||e.call(this,t),s.graph.setDirtyCanvas(!0,!1)}))};e.prototype.onExecuted=function(e){null==l||l.apply(this,arguments),t.call(this,e.text)}}if("easy promptLine"==o&&(e.prototype.onAdded=async function(){n&&n.apply(this,[]);let e=this.widgets.find((e=>"prompt"==e.name));this.addWidget("button","get values from COMBO link","",(()=>{var t,o;const n=(null==(o=null==(t=this.outputs[1])?void 0:t.links)?void 0:o.length)>0?this.outputs[1].links[0]:null,i=s.graph._nodes.find((e=>{var t;return null==(t=e.inputs)?void 0:t.find((e=>e.link==n))}));if(n&&i){const t=i.inputs.find((e=>e.link==n)).widget.name,s=i.widgets.find((e=>e.name==t));let o=(null==s?void 0:s.options.values)||null;o&&(o=o.join("\n"),e.value=o)}else xe.error(Ce("No COMBO link"),3e3)}),{serialize:!1})}),_t.includes(t.name)){let t=function(e){var t="";for(let s=0;s<e.length;s++)t+=e[s];return t},s=function(e,t="positive"){if(this.widgets){const s=this.widgets.findIndex((e=>e.name===t+"_prompt")),o="comfy-multiline-input wildcard_"+t+"_"+this.id.toString();if(-1==s&&e){const s=document.createElement("textarea");s.className=o,s.placeholder="Wildcard Prompt ("+t+")";const n=this.addDOMWidget(t+"_prompt","customtext",s,{getValue:e=>s.value,setValue(e){s.value=e},serialize:!1});n.inputEl=s,n.inputEl.readOnly=!0,s.addEventListener("input",(()=>{var e;null==(e=n.callback)||e.call(n,n.value)})),n.value=e}else if(this.widgets[s])if(e){this.widgets[s].value=e}else{this.widgets.splice(s,1);const e=document.getElementsByClassName(o);e&&e[0]&&e[0].remove()}}};e.prototype.onExecuted=function(e){null==l||l.apply(this,arguments);const o=t(e.positive),n=t(e.negative);s.call(this,o,"positive"),s.call(this,n,"negative")}}if(["easy sv3dLoader"].includes(t.name)){let t=function(e,t,s){switch(e){case"azimuth":return s.readOnly=!0,s.style.opacity=.6,"0:(0.0,0.0)"+(t>1?`\n${t-1}:(360.0,0.0)`:"");case"elevation":return s.readOnly=!0,s.style.opacity=.6,"0:(-90.0,0.0)"+(t>1?`\n${t-1}:(90.0,0.0)`:"");case"custom":return s.readOnly=!1,s.style.opacity=1,"0:(0.0,0.0)\n9:(180.0,0.0)\n20:(360.0,0.0)"}};e.prototype.onNodeCreated=async function(){i&&i.apply(this,[]);const e=this.widgets.find((e=>"easing_mode"==e.name)),s=this.widgets.find((e=>"batch_size"==e.name)),o=this.widgets.find((e=>"scheduler"==e.name));setTimeout((n=>{o.value||(o.value=t(e.value,s.value,o.inputEl))}),1),e.callback=e=>{o.value=t(e,s.value,o.inputEl)},s.callback=s=>{o.value=t(e.value,s,o.inputEl)}}}if(vt.includes(o)&&(e.prototype.onNodeCreated=async function(){i&&i.apply(this,[]);const e=this.widgets.find((e=>["seed_num","seed"].includes(e.name))),o=this.widgets.find((e=>["control_before_generate","control_after_generate"].includes(e.name)));if("easy seed"==t.name){const t=this.addWidget("button","🎲 Manual Random Seed",null,(t=>{"fixed"!=o.value&&(o.value="fixed"),e.value=Math.floor(Math.random()*me),s.queuePrompt(0,1)}),{serialize:!1});e.linkedWidgets=[t,o]}},e.prototype.onAdded=async function(){n&&n.apply(this,[]);const e=this.widgets.find((e=>["seed_num","seed"].includes(e.name))),t=this.widgets.find((e=>["control_before_generate","control_after_generate"].includes(e.name)));setTimeout((s=>{"control_before_generate"==t.name&&0===e.value&&(e.value=Math.floor(Math.random()*me))}),1)}),"easy convertAnything"==o&&(e.prototype.onNodeCreated=async function(){i&&i.apply(this,[]);const e=this.widgets.find((e=>"output_type"==e.name)),t=t=>{this.outputs[0].type=e.value.toUpperCase(),this.outputs[0].name=e.value,this.outputs[0].label=e.value};setTimeout((e=>t()),10),e.callback=e=>t()}),"easy imageInsetCrop"==o){let t=function(e){const t=e.widgets[0];for(let s=1;s<=4;s++)"Pixels"===t.value?(e.widgets[s].options.step=80,e.widgets[s].options.max=8192):(e.widgets[s].options.step=10,e.widgets[s].options.max=99)};e.prototype.onAdded=async function(e){const s=this.widgets[0];let o=s.callback;s.callback=(...e)=>{t(this),o&&o.apply(s,[...e])},setTimeout((e=>{t(this)}),1)}}},nodeCreated(e){if(e.comfyClass.startsWith("easy ")){if(e.widgets)for(const s of e.widgets){if(!gt.includes(s.name))continue;let t=s.value;bt(e,s),Object.defineProperty(s,"value",{get:e=>t,set(o){o!==t&&(t=o,bt(e,s))}})}const t=e.comfyClass;if("easy preDetailerFix"==t){const t=e.widgets.find((e=>"customtext"===e.type));if(!t)return;t.dynamicPrompts=!1,t.inputEl.placeholder="wildcard spec: if kept empty, this option will be ignored",t.serializeValue=()=>t.value}if("easy wildcards"==t){const t=e.widgets.find((e=>"text"==e.name));let s=1;Object.defineProperty(e.widgets[s],"value",{set:e=>{if((new Error).stack.includes("inner_value_change")&&"Select the LoRA to add to the text"!=e){let s=e;s.endsWith(".safetensors")&&(s=s.slice(0,-12)),t.value+=`<lora:${s}>`}},get:e=>"Select the LoRA to add to the text"}),Object.defineProperty(e.widgets[s+1],"value",{set:e=>{(new Error).stack.includes("inner_value_change")&&"Select the Wildcard to add to the text"!=e&&(""!=t.value&&(t.value+=", "),t.value+=e)},get:e=>"Select the Wildcard to add to the text"}),e.widgets[s].serializeValue=e=>"Select the LoRA to add to the text",e.widgets[s+1].serializeValue=e=>"Select the Wildcard to add to the text"}if(wt.includes(t)){const t=document.createElement("textarea");t.className="comfy-multiline-input",t.readOnly=!0;const s=e.addDOMWidget("info","customtext",t,{getValue:e=>t.value,setValue:e=>t.value=e,serialize:!1});s.inputEl=t,t.addEventListener("input",(()=>{var e;null==(e=s.callback)||e.call(s,s.value)}))}}}}),$.registerExtension({name:"easy bookmark",registerCustomNodes(){class e{constructor(){y(this,"type","easy bookmark"),y(this,"title","🔖"),y(this,"slot_start_y",-20),y(this,"___collapsed_width",0),y(this,"isVirtualNode",!0),y(this,"serialize_widgets",!0),y(this,"keypressBound",null),this.addWidget("text","shortcut_key","1",(e=>{""!==(e=e.trim()[0]||"1")&&(this.title="🔖 "+e)}),{y:8}),this.addWidget("number","zoom",1,(e=>{}),{y:8+LiteGraph.NODE_WIDGET_HEIGHT+4,max:2,min:.5,precision:2}),this.keypressBound=this.onKeypress.bind(this)}get _collapsed_width(){return this.___collapsed_width}set _collapsed_width(e){const t=$.canvas,s=t.canvas.getContext("2d");if(s){const e=s.font;s.font=t.title_text_font,this.___collapsed_width=40+s.measureText(this.title).width,s.font=e}}onAdded(){setTimeout((e=>{const t=this.widgets[0].value;t&&(this.title="🔖 "+t)}),1),window.addEventListener("keydown",this.keypressBound)}onRemoved(){window.removeEventListener("keydown",this.keypressBound)}onKeypress(e){const t=e.target;["input","textarea"].includes(t.localName)||this.widgets[0]&&e.key.toLocaleLowerCase()===this.widgets[0].value.toLocaleLowerCase()&&this.canvasToBookmark()}canvasToBookmark(){var e,t;const s=$.canvas;(null==(e=null==s?void 0:s.ds)?void 0:e.offset)&&(s.ds.offset[0]=16-this.pos[0],s.ds.offset[1]=40-this.pos[1]),null!=(null==(t=null==s?void 0:s.ds)?void 0:t.scale)&&(s.ds.scale=Number(this.widgets[1].value||1)),s.setDirty(!0,!0)}}LiteGraph.registerNodeType("easy bookmark",Object.assign(e,{title:"Bookmark 🔖"})),e.category="EasyUse/Util"}}),$.registerExtension({name:"Comfy.EasyUse.ChainNode",init(){$.canvas._mousemove_callback=e=>{if(!le("EasyUse.Nodes.ChainGetSet",null,!0))return;((e,t=!1,s={})=>{var o,n,i,a,l;if(0===e.length)return;const r=s.inputX||160,d=s.ouputX||60;if(e.filter((e=>rt(e))).length>1)return;for(const c of e){let a=0,l=0;const u=s.inputY||10,p=s.outputY||30,h=[];if(c.graph){for(const e of c.inputs??[]){const t=e.link;if(!t)continue;const{origin_id:s,target_slot:o}=nt(t),n=$e(s);if(!n)continue;if(!rt(n))continue;const i=c.getConnectionPos(!0,o);n.pos=[i[0]-r,i[1]+15+a*u],a+=1,h.push(n),n.flags.collapsed=!0}for(const e of c.outputs??[])if(e.links&&c.graph)for(const t of e.links){const{target_id:e}=nt(t),s=$e(e);if(!s)continue;if(!rt(s))continue;const n=null==(o=s.outputs)?void 0:o.links;if((null==n?void 0:n.length)>1)return;const i=c.getConnectionPos(!1,0);s.pos=[i[0]+d,i[1]+15+l*p],l+=1,h.push(s),s.flags.collapsed=!0}if(t&&1===e.length){const e=[c,...h];(null==(i=null==(n=c.graph)?void 0:n.list_of_graphcanvas)?void 0:i[0]).selectNodes(e)}}}const u=e[0];if(!u)return;(null==(l=null==(a=u.graph)?void 0:a.list_of_graphcanvas)?void 0:l[0]).setDirty(!0,!0)})(et())};const e=LGraphCanvas.prototype.showLinkMenu;LGraphCanvas.prototype.showLinkMenu=function(t,s){return s.shiftKey?(((e,t=!1)=>{var s,o,n,i,a,l,r,d,u,c;const{type:p}=e;if("*"===p)return;let{origin_id:h,target_id:m,origin_slot:g,target_slot:f}=e,y=$e(h),v=$e(m);if(!y||!v)return!1;if("Reroute"===y.type){let e=0;[y,e]=ht(y),h=null==y?void 0:y.id,g=e,void 0!==g&&-1!==g||(g=0)}if("Reroute"===v.type&&(v=mt(v),m=null==v?void 0:v.id,f=null==v?void 0:v.inputs.findIndex((e=>e.type===p)),void 0!==f&&-1!==f||(f=0)),void 0===h||void 0===m||!y||!v)return!1;if(t&&(rt(y)||rt(v)))return!1;let _=it((null==(s=v.getInputInfo(f))?void 0:s.name)??p.toLowerCase());_||(_=it((null==(n=null==(o=null==y?void 0:y.outputs)?void 0:o[g])?void 0:n.name)??(null==(a=null==(i=null==y?void 0:y.outputs)?void 0:i[g])?void 0:a.type.toString())??_+`_from_${h}_to_${m}`));let w,b=!1,A=!1;if(rt(y))_=Je(y),A=!0;else{const e=null==(r=null==(l=y.outputs)?void 0:l[g])?void 0:r.links;if(e)for(const t of e){const e=$e((null==(d=nt(t))?void 0:d.target_id)??-1);e&&rt(e)&&lt(e)&&(_=Je(e),A=!0)}if(!A){for(const e of dt()){if(_!==Je(e)||!lt(e))continue;const t=null==(u=e.inputs[0])?void 0:u.link;(null==(c=nt(t))?void 0:c.origin_id)===y.id?A=!0:b=!0}b&&(_+=`_from_${h}_to_${m}`)}}if(!A){w=LiteGraph.createNode("easy setNode"),w.is_auto_link=!0;const e=y.getConnectionPos(!1,g);w.pos=[e[0]+20,e[1]],w.inputs[0].name=_,w.inputs[0].type=p,w.inputs[0].widget=v.inputs[f].widget,ut(w,_),ct(w),w.flags.collapsed=!0;let t=[];y.widgets?t=Object.values(y.widgets).map((e=>e.value)):y.widgets_values&&(t=JSON.parse(JSON.stringify(y.widgets_values))),y.connect(g,w,0),y.widgets_values=t,"PrimitiveNode"===y.type&&setTimeout((()=>{if(y){y.connect(g,w,0);for(const[e,s]of t.entries())ut(y,s,e);null!==w&&w.setSize(w.computeSize())}}))}const S=LiteGraph.createNode("easy getNode"),E=v.getConnectionPos(!0,f);S.pos=[E[0]-150,E[1]],S.outputs[0].name=_,S.outputs[0].type=p,S.outputs[0].widget=v.inputs[f].widget,ct(S),ut(S,_),null===S||(S.flags.collapsed=!0,S.setSize(S.computeSize()),S.connect(0,v,f))})(t),!1):(e.apply(this,[t,s]),!1)}}});let At=[];function St(e,t,s,o,n){var i=LGraphCanvas.active_canvas,a=i.getCanvasWindow(),l=i.graph;if(l)return function e(t,o){var r=LiteGraph.getNodeTypesCategories(i.filter||l.filter).filter((function(e){return e.startsWith(t)})),d=[];r.map((function(s){if(s){var o=new RegExp("^("+t+")"),n=s.replace(o,"").split("/")[0],i=""===t?n+"/":t+n+"/",a=n;-1!=a.indexOf("::")&&(a=a.split("::")[1]),-1===d.findIndex((function(e){return e.value===i}))&&d.push({value:i,content:a,has_submenu:!0,callback:function(t,s,o,n){e(t.value,n)}})}})),LiteGraph.getNodeTypesInCategory(t.slice(0,-1),i.filter||l.filter).map((function(e){if(!e.skip_list){var t={value:e.type,content:e.title,has_submenu:!1,callback:function(e,t,s,o){var a=o.getFirstEvent();i.graph.beforeChange();var l=LiteGraph.createNode(e.value);l&&(l.pos=i.convertEventToCanvasOffset(a),i.graph.add(l)),n&&n(l),i.graph.afterChange()}};d.push(t)}}));const u=le("EasyUse.ContextMenu.NodesSort",null,!0);""===t&&u&&(d=function(e){let t=[],s=[];return e.forEach((e=>{(null==e?void 0:e.value)&&ge.includes(e.value.split("/")[0])?t.push(e):s.push(e)})),[{title:Ce("ComfyUI Basic"),is_category_title:!0},...t,{title:Ce("Others A~Z"),is_category_title:!0},...s.sort(((e,t)=>e.content.localeCompare(t.content)))]}(d)),new LiteGraph.ContextMenu(d,{event:s,parentMenu:o},a)}("",o),!1}$.registerExtension({name:"Comfy.EasyUse.ContextMenu",async setup(){LGraphCanvas.onMenuAdd=St;const e=le("EasyUse.ContextMenu.ModelsThumbnailsLimit",null,500),t=await ee.fetchApi(`/easyuse/models/thumbnail?limit=${e}`);if(200===t.status){let e=await t.json();At=e}else xe.error(Ce("Too many thumbnails, have closed the display"));const s=LiteGraph.ContextMenu;LiteGraph.ContextMenu=function(e,t){if(le("EasyUse.ContextMenu.SubDirectories",null,!1)&&(null==t?void 0:t.callback)&&!e.some((e=>"string"!=typeof e))){const o=function(e,t){const s=e,o=[...s],n={},i=[],a=[],l=["ckpt","pt","bin","pth","safetensors"];if((null==e?void 0:e.length)>0){const t=kt(e[e.length-1]);if(!l.includes(t))return null}for(const r of s){const e=r.indexOf("/")>-1?"/":"\\",t=r.split(e);if(t.length>1){const s=t.shift();n[s]=n[s]||[],n[s].push(t.join(e))}else"CHOOSE"===r||r.startsWith("DISABLE ")?i.push(r):a.push(r)}if(Object.values(n).length>0){const e=t.callback;t.callback=null;const s=(t,s)=>{["None","无","無","なし"].includes(t.content)?e("None",s):e(o.find((e=>e.endsWith(t.content)),s))},r=(e,t="")=>{const o=t?t+"\\"+Lt(e):Lt(e),n=kt(e),i=(new Date).getTime();let a,r="";if(l.includes(n))for(let s=0;s<At.length;s++){let e=At[s];if(o&&e&&-1!=e.indexOf(o)){r=At[s];break}}const d=le("EasyUse.ContextMenu.ModelsThumbnails",null,!1);if(r&&d){const t=`${window.location.protocol}//${window.location.host}`,s=r.replace(":","%3A").replace(/\\/g,"/");a=te("div.comfyui-easyuse-contextmenu-model",{},[te("span",{},e+" *"),te("img",{src:`${t}/${s}?t=${i}`})])}else a=te("div.comfyui-easyuse-contextmenu-model",{},[te("span",{},e)]);return{content:e,title:a.outerHTML,callback:s}},d=[],u=(e,t)=>{let s=[],o=[];const i=e.map((e=>{const i={},a=e.indexOf("/")>-1?"/":"\\",l=e.split(a);if(l.length>1){const e=l.shift();i[e]=i[e]||[],i[e].push(l.join(a))}if(Object.values(n).length>0){let t=Object.keys(i)[0];t&&i[t]?s.push({key:t,value:i[t][0]}):o.push(r(e,t))}return r(e,t)}));if(s.length>0){let e={};return s.forEach((t=>{e[t.key]=e[t.key]||[],e[t.key].push(t.value)})),[...Object.entries(e).map((e=>({content:e[0],has_submenu:!0,callback:()=>{},submenu:{options:u(e[1],e[0])}}))),...o]}return i};for(const[t,o]of Object.entries(n))d.push({content:t,has_submenu:!0,callback:()=>{},submenu:{options:u(o,t)}});return d.push(...a.map((e=>r(e,"")))),i.length>0&&d.push(...i.map((e=>r(e,"")))),d}return null}(e,t);return o?s.call(this,o,t):s.apply(this,[...arguments])}return t.parentMenu||t.extra||t.scale||t.hasOwnProperty("extra")&&(e.unshift(null),o=window.location.host,["192.168.","10.","127.",/^172\.((1[6-9]|2[0-9]|3[0-1])\.)/].some((e=>"string"==typeof e?o.startsWith(e):e.test(o)))&&e.unshift({content:`<i class="mdi mdi-refresh-circle comfyui-easyuse-error" style="margin-right:2px;font-size:16px"></i>${Ce("Reboot ComfyUI")}`,callback:e=>(async()=>{if(confirm(Ce("Are you sure you'd like to reboot the server?")))try{ee.fetchApi("/easyuse/reboot")}catch(e){}})()}),e.unshift({content:`<i class="mdi mdi-rocket comfyui-easyuse-theme" style="margin-right:2px;font-size:16px"></i>${Ce("Cleanup Of VRAM Usage")}`,callback:e=>Ie()})),s.apply(this,[...arguments]);var o},LiteGraph.ContextMenu.prototype=s.prototype,le("EasyUse.ContextMenu.NodesSort",null,!0)&&(LiteGraph.ContextMenu.prototype.addItem=Ct)}});const Et=e=>e&&"object"==typeof e&&"image"in e&&e.content;function Ct(e,t,s){var o=this;s=s||{};var n=document.createElement("div");n.className="litemenu-entry submenu";var i,a=!1;function l(e){var t=this.value,n=!0;(o.current_submenu&&o.current_submenu.close(e),s.callback)&&(!0===s.callback.call(this,t,s,e,o,s.node)&&(n=!1));if(t){if(t.callback&&!s.ignore_item_callbacks&&!0!==t.disabled)!0===t.callback.call(this,t,s,e,o,s.extra)&&(n=!1);if(t.submenu){if(!t.submenu.options)throw"ContextMenu submenu needs options";new o.constructor(t.submenu.options,{callback:t.submenu.callback,event:e,parentMenu:o,ignore_item_callbacks:t.submenu.ignore_item_callbacks,title:t.submenu.title,extra:t.submenu.extra,autoopen:s.autoopen}),n=!1}}n&&!o.lock&&o.close()}return null===t?n.classList.add("separator"):t.is_category_title?(n.classList.remove("litemenu-entry"),n.classList.remove("submenu"),n.classList.add("litemenu-title"),n.innerHTML=t.title):(n.innerHTML=t&&t.title?t.title:e,n.value=t,t&&(t.disabled&&(a=!0,n.classList.add("disabled")),(t.submenu||t.has_submenu)&&n.classList.add("has_submenu")),"function"==typeof t?(n.dataset.value=e,n.onclick_callback=t):n.dataset.value=t,t.className&&(n.className+=" "+t.className)),n&&Et(t)&&(null==t?void 0:t.image)&&!t.submenu&&(n.textContent+=" *",te("div.pysssss-combo-image",{parent:n,style:{backgroundImage:`url(/pysssss/view/${i=t.image,encodeURIComponent(i).replace(/[!'()*]/g,(e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`))})`}})),this.root.appendChild(n),a||n.addEventListener("click",l),!a&&s.autoopen&&LiteGraph.pointerListenerAdd(n,"enter",(function(e){var t=this.value;if(!t||!t.has_submenu)return;l.call(this,e)})),n}function Lt(e){return null==e?void 0:e.substring(0,e.lastIndexOf("."))}function kt(e){return null==e?void 0:e.substring(e.lastIndexOf(".")+1)}class xt extends se{constructor(){super(),this.element.classList.add("easyuse-model-metadata")}show(e){super.show(te("div",Object.keys(e).map((t=>te("div",[te("label",{textContent:t}),te("span",{textContent:e[t]})])))))}}class It extends se{constructor(e){super(),this.name=e,this.element.classList.add("easyuse-model-info")}get customNotes(){return this.metadata["easyuse.notes"]}set customNotes(e){this.metadata["easyuse.notes"]=e}get hash(){return this.metadata["easyuse.sha256"]}async show(e,t){this.type=e;const s=ee.fetchApi("/easyuse/metadata/"+encodeURIComponent(`${e}/${t}`));this.info=te("div",{style:{flex:"auto"}}),this.imgCurrent=0,this.imgList=te("div.easyuse-preview-list",{style:{display:"none"}}),this.imgWrapper=te("div.easyuse-preview",[te("div.easyuse-preview-group",[this.imgList])]),this.main=te("main",{style:{display:"flex"}},[this.imgWrapper,this.info]),this.content=te("div.easyuse-model-content",[te("div.easyuse-model-header",[te("h2",{textContent:this.name})]),this.main]);const o=te("div",{textContent:"ℹ️ Loading...",parent:this.content});super.show(this.content),this.metadata=await(await s).json(),this.viewMetadata.style.cursor=this.viewMetadata.style.opacity="",this.viewMetadata.removeAttribute("disabled"),o.remove(),this.addInfo()}createButtons(){const e=super.createButtons();return this.viewMetadata=te("button",{type:"button",textContent:"View raw metadata",disabled:"disabled",style:{opacity:.5,cursor:"not-allowed"},onclick:e=>{this.metadata&&(new xt).show(this.metadata)}}),e.unshift(this.viewMetadata),e}parseNote(){if(!this.customNotes)return[];let e=[];const t=new RegExp("(\\bhttps?:\\/\\/[^\\s]+)","g");let s,o=0;do{let n;s=t.exec(this.customNotes);let i=0;s?(n=s.index,i=s.index+s[0].length):n=this.customNotes.length;let a=this.customNotes.substring(o,n);a&&(a=a.replaceAll("\n","<br>"),e.push(te("span",{innerHTML:a}))),s&&e.push(te("a",{href:s[0],textContent:s[0],target:"_blank"})),o=i}while(s);return e}addInfoEntry(e,t){return te("p",{parent:this.info},["string"==typeof e?te("label",{textContent:e+": "}):e,"string"==typeof t?te("span",{textContent:t}):t])}async getCivitaiDetails(){const e=await fetch("https://civitai.com/api/v1/model-versions/by-hash/"+this.hash);if(200===e.status)return await e.json();throw 404===e.status?new Error("Model not found"):new Error(`Error loading info (${e.status}) ${e.statusText}`)}addCivitaiInfo(){const e=this.getCivitaiDetails(),t=te("span",{textContent:"ℹ️ Loading..."});return this.addInfoEntry(te("label",[te("img",{style:{width:"18px",position:"relative",top:"3px",margin:"0 5px 0 0"},src:"https://civitai.com/favicon.ico"}),te("span",{textContent:"Civitai: "})]),t),e.then((e=>{var t,s;this.imgWrapper.style.display="block";let o=this.element.querySelector(".easyuse-model-header");o&&o.replaceChildren(te("h2",{textContent:this.name}),te("div.easyuse-model-header-remark",[te("h5",{textContent:Ce("Updated At:")+de(new Date(e.updatedAt),"yyyy/MM/dd")}),te("h5",{textContent:Ce("Created At:")+de(new Date(e.updatedAt),"yyyy/MM/dd")})]));let n=null,i=this.parseNote.call(this),a=Ce("✏️ Edit"),l=te("div.easyuse-model-detail-textarea",[te("p",(null==i?void 0:i.length)>0?i:{textContent:Ce("No notes")})]);if(i&&0!=i.length?l.classList.remove("empty"):l.classList.add("empty"),this.info.replaceChildren(te("div.easyuse-model-detail",[te("div.easyuse-model-detail-head.flex-b",[te("span",Ce("Notes")),te("a",{textContent:a,href:"#",style:{fontSize:"12px",float:"right",color:"var(--warning-color)",textDecoration:"none"},onclick:async e=>{if(e.preventDefault(),n){if(n.value!=this.customNotes){toast.showLoading(Ce("Saving Notes...")),this.customNotes=n.value;const e=await ee.fetchApi("/easyuse/metadata/notes/"+encodeURIComponent(`${this.type}/${this.name}`),{method:"POST",body:this.customNotes});if(toast.hideLoading(),200!==e.status)return toast.error(Ce("Saving Failed")),void alert(`Error saving notes (${e.status}) ${e.statusText}`);toast.success(Ce("Saving Succeed")),i=this.parseNote.call(this),l.replaceChildren(te("p",(null==i?void 0:i.length)>0?i:{textContent:Ce("No notes")})),n.value?l.classList.remove("empty"):l.classList.add("empty")}else l.replaceChildren(te("p",{textContent:Ce("No notes")})),l.classList.add("empty");e.target.textContent=a,n.remove(),n=null}else e.target.textContent="💾 Save",n=te("textarea",{placeholder:Ce("Type your notes here"),style:{width:"100%",minWidth:"200px",minHeight:"50px",height:"100px"},textContent:this.customNotes}),l.replaceChildren(n),n.focus()}})]),l]),te("div.easyuse-model-detail",[te("div.easyuse-model-detail-head",{textContent:Ce("Details")}),te("div.easyuse-model-detail-body",[te("div.easyuse-model-detail-item",[te("div.easyuse-model-detail-item-label",{textContent:Ce("Type")}),te("div.easyuse-model-detail-item-value",{textContent:e.model.type})]),te("div.easyuse-model-detail-item",[te("div.easyuse-model-detail-item-label",{textContent:Ce("BaseModel")}),te("div.easyuse-model-detail-item-value",{textContent:e.baseModel})]),te("div.easyuse-model-detail-item",[te("div.easyuse-model-detail-item-label",{textContent:Ce("Download")}),te("div.easyuse-model-detail-item-value",{textContent:(null==(t=e.stats)?void 0:t.downloadCount)||0})]),te("div.easyuse-model-detail-item",[te("div.easyuse-model-detail-item-label",{textContent:Ce("Trained Words")}),te("div.easyuse-model-detail-item-value",{textContent:(null==e?void 0:e.trainedWords.join(","))||"-"})]),te("div.easyuse-model-detail-item",[te("div.easyuse-model-detail-item-label",{textContent:Ce("Source")}),te("div.easyuse-model-detail-item-value",[te("label",[te("img",{style:{width:"14px",position:"relative",top:"3px",margin:"0 5px 0 0"},src:"https://civitai.com/favicon.ico"}),te("a",{href:"https://civitai.com/models/"+e.modelId,textContent:"View "+e.model.name,target:"_blank"})])])])])])),null==(s=e.images)?void 0:s.length){this.imgCurrent=0,this.isSaving=!1,e.images.map((e=>e.url&&this.imgList.appendChild(te("div.easyuse-preview-slide",[te("div.easyuse-preview-slide-content",[te("img",{src:e.url}),te("div.save",{textContent:"Save as preview",onclick:async()=>{if(this.isSaving)return;this.isSaving=!0,toast.showLoading(Ce("Saving Preview..."));const t=await(await fetch(e.url)).blob(),s="temp_preview."+new URL(e.url).pathname.split(".")[1],o=new FormData;o.append("image",new File([t],s)),o.append("overwrite","true"),o.append("type","temp");if(200!==(await ee.fetchApi("/upload/image",{method:"POST",body:o})).status)return this.isSaving=!1,toast.error(Ce("Saving Failed")),toast.hideLoading(),void alert(`Error saving preview (${req.status}) ${req.statusText}`);await ee.fetchApi("/easyuse/save/"+encodeURIComponent(`${this.type}/${this.name}`),{method:"POST",body:JSON.stringify({filename:s,type:"temp"}),headers:{"content-type":"application/json"}}).then((e=>{toast.success(Ce("Saving Succeed")),toast.hideLoading()})),this.isSaving=!1,app.refreshComboInNodes()}})])]))));let t=this;this.imgDistance=(-660*this.imgCurrent).toString(),this.imgList.style.display="",this.imgList.style.transform="translate3d("+this.imgDistance+"px, 0px, 0px)",this.slides=this.imgList.querySelectorAll(".easyuse-preview-slide"),this.slideLeftButton=te("button.left",{parent:this.imgWrapper,style:{display:e.images.length<=2?"none":"block"},innerHTML:'<svg viewBox="0 0 15 15" fill="none" xmlns="http://www.w3.org/2000/svg" width="16" height="16" style="transform: rotate(90deg);"><path d="M3.13523 6.15803C3.3241 5.95657 3.64052 5.94637 3.84197 6.13523L7.5 9.56464L11.158 6.13523C11.3595 5.94637 11.6759 5.95657 11.8648 6.15803C12.0536 6.35949 12.0434 6.67591 11.842 6.86477L7.84197 10.6148C7.64964 10.7951 7.35036 10.7951 7.15803 10.6148L3.15803 6.86477C2.95657 6.67591 2.94637 6.35949 3.13523 6.15803Z" fill="currentColor" fill-rule="evenodd" clip-rule="evenodd"></path></svg>',onclick:()=>{e.images.length<=2||(t.imgList.classList.remove("no-transition"),0==t.imgCurrent?(t.imgCurrent=e.images.length/2-1,this.slides[this.slides.length-1].style.transform="translate3d("+(-660*(this.imgCurrent+1)).toString()+"px, 0px, 0px)",this.slides[this.slides.length-2].style.transform="translate3d("+(-660*(this.imgCurrent+1)).toString()+"px, 0px, 0px)",t.imgList.style.transform="translate3d(660px, 0px, 0px)",setTimeout((e=>{this.slides[this.slides.length-1].style.transform="translate3d(0px, 0px, 0px)",this.slides[this.slides.length-2].style.transform="translate3d(0px, 0px, 0px)",t.imgDistance=(-660*this.imgCurrent).toString(),t.imgList.style.transform="translate3d("+t.imgDistance+"px, 0px, 0px)",t.imgList.classList.add("no-transition")}),500)):(t.imgCurrent=t.imgCurrent-1,t.imgDistance=(-660*this.imgCurrent).toString(),t.imgList.style.transform="translate3d("+t.imgDistance+"px, 0px, 0px)"))}}),this.slideRightButton=te("button.right",{parent:this.imgWrapper,style:{display:e.images.length<=2?"none":"block"},innerHTML:'<svg viewBox="0 0 15 15" fill="none" xmlns="http://www.w3.org/2000/svg" width="16" height="16" style="transform: rotate(-90deg);"><path d="M3.13523 6.15803C3.3241 5.95657 3.64052 5.94637 3.84197 6.13523L7.5 9.56464L11.158 6.13523C11.3595 5.94637 11.6759 5.95657 11.8648 6.15803C12.0536 6.35949 12.0434 6.67591 11.842 6.86477L7.84197 10.6148C7.64964 10.7951 7.35036 10.7951 7.15803 10.6148L3.15803 6.86477C2.95657 6.67591 2.94637 6.35949 3.13523 6.15803Z" fill="currentColor" fill-rule="evenodd" clip-rule="evenodd"></path></svg>',onclick:()=>{if(!(e.images.length<=2))if(t.imgList.classList.remove("no-transition"),t.imgCurrent>=e.images.length/2-1){t.imgCurrent=0;const s=e.images.length/2;this.slides[0].style.transform="translate3d("+(660*s).toString()+"px, 0px, 0px)",this.slides[1].style.transform="translate3d("+(660*s).toString()+"px, 0px, 0px)",t.imgList.style.transform="translate3d("+(-660*s).toString()+"px, 0px, 0px)",setTimeout((e=>{this.slides[0].style.transform="translate3d(0px, 0px, 0px)",this.slides[1].style.transform="translate3d(0px, 0px, 0px)",t.imgDistance=(-660*this.imgCurrent).toString(),t.imgList.style.transform="translate3d("+t.imgDistance+"px, 0px, 0px)",t.imgList.classList.add("no-transition")}),500)}else t.imgCurrent=t.imgCurrent+1,t.imgDistance=(-660*this.imgCurrent).toString(),t.imgList.style.transform="translate3d("+t.imgDistance+"px, 0px, 0px)"}})}return e.description&&te("div",{parent:this.content,innerHTML:e.description,style:{marginTop:"10px"}}),e})).catch((e=>{this.imgWrapper.style.display="none",t.textContent="⚠️ "+e.message})).finally((e=>{}))}}class Nt extends It{async addInfo(){await this.addCivitaiInfo()}}class Tt extends It{getTagFrequency(){if(!this.metadata.ss_tag_frequency)return[];const e=JSON.parse(this.metadata.ss_tag_frequency),t={};for(const s in e){const o=e[s];for(const e in o)e in t?t[e]+=o[e]:t[e]=o[e]}return Object.entries(t).sort(((e,t)=>t[1]-e[1]))}getResolutions(){let e=[];if(this.metadata.ss_bucket_info){const t=JSON.parse(this.metadata.ss_bucket_info);if(null==t?void 0:t.buckets)for(const{resolution:s,count:o}of Object.values(t.buckets))e.push([o,`${s.join("x")} * ${o}`])}e=e.sort(((e,t)=>t[0]-e[0])).map((e=>e[1]));let t=this.metadata.ss_resolution;if(t){const s=t.split(","),o=s[0].replace("(",""),n=s[1].replace(")","");e.push(`${o.trim()}x${n.trim()} (Base res)`)}else(t=this.metadata["modelspec.resolution"])&&e.push(t+" (Base res");return e.length||e.push("⚠️ Unknown"),e}getTagList(e){return e.map((e=>te("li.easyuse-model-tag",{dataset:{tag:e[0]},$:e=>{e.onclick=()=>{e.classList.toggle("easyuse-model-tag--selected")}}},[te("p",{textContent:e[0]}),te("span",{textContent:e[1]})])))}addTags(){let e,t=this.getTagFrequency();if(null==t?void 0:t.length){const s=t.length;let o;s>500&&(t=t.slice(0,500),e=te("p",[te("span",{textContent:"⚠️ Only showing first 500 tags "}),te("a",{href:"#",textContent:`Show all ${s}`,onclick:()=>{o.replaceChildren(...this.getTagList(this.getTagFrequency())),e.remove()}})])),o=te("ol.easyuse-model-tags-list",this.getTagList(t)),this.tags=te("div",[o])}else this.tags=te("p",{textContent:"⚠️ No tag frequency metadata found"});this.content.append(this.tags),e&&this.content.append(e)}async addInfo(){const e=this.addCivitaiInfo();this.addTags();const t=await e;t&&te("div",{parent:this.content,innerHTML:t.description,style:{maxHeight:"250px",overflow:"auto"}})}createButtons(){const e=super.createButtons();function t(e,t){const s=te("textarea",{parent:document.body,style:{position:"fixed"},textContent:t.map((e=>e.dataset.tag)).join(", ")});s.select();try{document.execCommand("copy"),e.target.dataset.text||(e.target.dataset.text=e.target.textContent),e.target.textContent="Copied "+t.length+" tags",setTimeout((()=>{e.target.textContent=e.target.dataset.text}),1e3)}catch(o){prompt("Copy to clipboard: Ctrl+C, Enter",text)}finally{document.body.removeChild(s)}}return e.unshift(te("button",{type:"button",textContent:"Copy Selected",onclick:e=>{t(e,[...this.tags.querySelectorAll(".easyuse-model-tag--selected")])}}),te("button",{type:"button",textContent:"Copy All",onclick:e=>{t(e,[...this.tags.querySelectorAll(".easyuse-model-tag")])}})),e}}const Dt=["easy fullLoader","easy a1111Loader","easy comfyLoader","easy kolorsLoader","easy hunyuanDiTLoader","easy pixArtLoader"],Ot=["easy preSampling","easy preSamplingAdvanced","easy preSamplingDynamicCFG","easy preSamplingNoiseIn","easy preSamplingCustom","easy preSamplingLayerDiffusion","easy fullkSampler"],Rt=["KSamplerSelect","SamplerEulerAncestral","SamplerEulerAncestralCFG++","SamplerLMS","SamplerDPMPP_3M_SDE","SamplerDPMPP_2M_SDE","SamplerDPMPP_SDE","SamplerDPMAdaptative","SamplerLCMUpscale","SamplerTCD","SamplerTCD EulerA"],Mt=["BasicScheduler","KarrasScheduler","ExponentialScheduler","PolyexponentialScheduler","VPScheduler","BetaSamplingScheduler","SDTurboScheduler","SplitSigmas","SplitSigmasDenoise","FlipSigmas","AlignYourStepsScheduler","GITSScheduler"],Gt=["easy kSampler","easy kSamplerTiled","easy kSamplerInpainting","easy kSamplerDownscaleUnet","easy kSamplerLayerDiffusion"],Pt=["easy controlnetLoader","easy controlnetLoaderADV","easy controlnetLoader++","easy instantIDApply","easy instantIDApplyADV"],Bt=["easy ipadapterApply","easy ipadapterApplyADV","easy ipadapterApplyFaceIDKolors","easy ipadapterStyleComposition","easy ipadapterApplyFromParams","easy pulIDApply","easy pulIDApplyADV"],Ft=["easy positive","easy wildcards"],Ut=["easy loadImageBase64","LoadImage","LoadImageMask"],zt=["easy applyBrushNet","easy applyPowerPaint","easy applyInpaint"],jt={positive_prompt:{text:"positive",positive:"text"},loaders:{ckpt_name:"ckpt_name",vae_name:"vae_name",clip_skip:"clip_skip",lora_name:"lora_name",resolution:"resolution",empty_latent_width:"empty_latent_width",empty_latent_height:"empty_latent_height",positive:"positive",negative:"negative",batch_size:"batch_size",a1111_prompt_style:"a1111_prompt_style"},preSampling:{steps:"steps",cfg:"cfg",cfg_scale_min:"cfg",sampler_name:"sampler_name",scheduler:"scheduler",denoise:"denoise",seed_num:"seed_num",seed:"seed"},kSampler:{image_output:"image_output",save_prefix:"save_prefix",link_id:"link_id"},controlnet:{control_net_name:"control_net_name",strength:["strength","cn_strength"],scale_soft_weights:["scale_soft_weights","cn_soft_weights"],cn_strength:["strength","cn_strength"],cn_soft_weights:["scale_soft_weights","cn_soft_weights"]},ipadapter:{preset:"preset",lora_strength:"lora_strength",provider:"provider",weight:"weight",weight_faceidv2:"weight_faceidv2",start_at:"start_at",end_at:"end_at",cache_mode:"cache_mode",use_tiled:"use_tiled",insightface:"insightface",pulid_file:"pulid_file"},load_image:{image:"image",base64_data:"base64_data",channel:"channel"},inpaint:{dtype:"dtype",fitting:"fitting",function:"function",scale:"scale",start_at:"start_at",end_at:"end_at"},sampler:{},sigmas:{}},Ht={loaders:{optional_lora_stack:"optional_lora_stack",positive:"positive",negative:"negative"},preSampling:{pipe:"pipe",image_to_latent:"image_to_latent",latent:"latent"},kSampler:{pipe:"pipe",model:"model"},controlnet:{pipe:"pipe",image:"image",image_kps:"image_kps",control_net:"control_net",positive:"positive",negative:"negative",mask:"mask"},positive_prompt:{},ipadapter:{model:"model",image:"image",image_style:"image",attn_mask:"attn_mask",optional_ipadapter:"optional_ipadapter"},inpaint:{pipe:"pipe",image:"image",mask:"mask"},sampler:{},sigmas:{}},Wt={loaders:{pipe:"pipe",model:"model",vae:"vae",clip:null,positive:null,negative:null,latent:null},preSampling:{pipe:"pipe"},kSampler:{pipe:"pipe",image:"image"},controlnet:{pipe:"pipe",positive:"positive",negative:"negative"},positive_prompt:{text:"positive",positive:"text"},load_image:{IMAGE:"IMAGE",MASK:"MASK"},ipadapter:{model:"model",tiles:"tiles",masks:"masks",ipadapter:"ipadapter"},inpaint:{pipe:"pipe"},sampler:{SAMPLER:"SAMPLER"},sigmas:{SIGMAS:"SIGMAS"}};function Yt(e,t,s){return function(){!function(e,t,s){const o=LiteGraph.createNode(t);if(o){if($.graph.add(o),o.pos=e.pos.slice(),o.size=e.size.slice(),e.widgets.forEach((e=>{if(jt[s][e.name]){const n=jt[s][e.name];if(n){const s=(t=n,o.widgets.find((e=>"object"==typeof t?t.includes(e.name):e.name===t)));s&&(s.value=e.value,"seed_num"==e.name&&(s.linkedWidgets[0].value=e.linkedWidgets[0].value),"converted-widget"==e.type&&qt(o,s,e))}}var t})),e.inputs&&e.inputs.forEach(((t,n)=>{if(t&&t.link&&Ht[s][t.name]){const n=Ht[s][t.name];if(null===n)return;const i=o.findInputSlot(n);if(-1!==i){const s=e.graph.links[t.link];if(s){const t=e.graph.getNodeById(s.origin_id);t&&t.connect(s.origin_slot,o,i)}}}})),e.outputs&&e.outputs.forEach(((t,n)=>{if(t&&t.links&&Wt[s]&&Wt[s][t.name]){const n=Wt[s][t.name];if(null===n)return;const i=o.findOutputSlot(n);-1!==i&&t.links.forEach((t=>{const s=e.graph.links[t];if(s){const t=e.graph.getNodeById(s.target_id);t&&o.connect(i,t,s.target_slot)}}))}})),$.graph.remove(e),"easy fullkSampler"==o.type){const e=o.outputs[0].links;if(e&&e[0]){const t=$.graph._nodes.find((t=>t.inputs&&t.inputs[0]&&t.inputs[0].link==e[0]));t&&$.graph.remove(t)}}else if(Ot.includes(o.type)){const e=o.outputs[0].links;if(!e||!e[0]){const e=LiteGraph.createNode("easy kSampler");$.graph.add(e),e.pos=o.pos.slice(),e.pos[0]=e.pos[0]+o.size[0]+20;const t=o.findInputSlot("pipe");-1!==t&&o&&o.connect(0,e,t)}}o.setSize([o.size[0],o.computeSize()[1]])}}(e,t,s)}}const Vt=(e,t)=>{const s=e.prototype.getExtraMenuOptions;e.prototype.getExtraMenuOptions=function(){const e=s.apply(this,arguments);return t.apply(this,arguments),e}},Zt=(e,t,s,o,n=!0)=>{Vt(o,(function(o,i){i.unshift({content:e,has_submenu:n,callback:(e,o,n,i,a)=>Xt(e,o,n,i,a,t,s)}),"loaders"==t&&(i.unshift({content:Ce("💎 View Lora Info..."),callback:(e,t,s,o,n)=>{let i=n.widgets.find((e=>"lora_name"==e.name)).value;i&&"None"!=i&&new Tt(i).show("loras",i)}}),i.unshift({content:Ce("💎 View Checkpoint Info..."),callback:(e,t,s,o,n)=>{let i=n.widgets[0].value;i&&"None"!=i&&new Nt(i).show("checkpoints",i)}}))}))},Xt=(e,t,s,o,n,i,a)=>{const l=[];return a.map((e=>{n.type!==e&&l.push({content:`${e}`,callback:Yt(n,e,i)})})),new LiteGraph.ContextMenu(l,{event:s,callback:null,parentMenu:o,node:n}),!1},Qt="converted-widget",Kt=Symbol();function Jt(e,t,s=""){if(t.origType=t.type,t.origComputeSize=t.computeSize,t.origSerializeValue=t.serializeValue,t.computeSize=()=>[0,-4],t.type=Qt+s,t.serializeValue=()=>{if(!e.inputs)return;let s=e.inputs.find((e=>{var s;return(null==(s=e.widget)?void 0:s.name)===t.name}));return s&&s.link?t.origSerializeValue?t.origSerializeValue():t.value:void 0},t.linkedWidgets)for(const o of t.linkedWidgets)Jt(e,o,":"+t.name)}function qt(e,t,s){Jt(e,t);const{type:o}=function(e){let t=e[0];t instanceof Array&&(t="COMBO");return{type:t}}(s),n=e.size;t.options&&t.options.forceInput||e.addInput(t.name,o,{widget:{name:t.name,[Kt]:()=>s}});for(const i of e.widgets)i.last_y+=LiteGraph.NODE_SLOT_HEIGHT;e.setSize([Math.max(n[0],e.size[0]),Math.max(n[1],e.size[1])])}const $t=function(e){var t,s,o,n;const i=e.constructor.type,a=e.properties.origVals||{},l=a.title||e.title,r=a.color||e.color,d=a.bgcolor||e.bgcolor,u=e,c={size:[...e.size],color:r,bgcolor:d,pos:[...e.pos]};let p=[],h=[];if(e.inputs)for(const b of e.inputs)if(b.link){const t=b.name,s=e.findInputSlot(t),o=e.getInputNode(s),n=e.getInputLink(s);p.push([n.origin_slot,o,t])}if(e.outputs)for(const b of e.outputs)if(b.links){const e=b.name;for(const t of b.links){const s=graph.links[t],o=graph._nodes_by_id[s.target_id];h.push([e,o,s.target_slot])}}$.graph.remove(e);const m=$.graph.add(LiteGraph.createNode(i,l,c));function g(){if(u.widgets)for(let e of u.widgets)if("converted-widget"===e.type){const t=m.widgets.find((t=>t.name===e.name));for(let s of u.inputs)s.name===e.name&&qt(m,t,s.widget)}for(let e of p){const[t,s,o]=e;s.connect(t,m.id,o)}for(let e of h){const[t,s,o]=e;m.connect(t,s,o)}}let f=u.widgets_values;if(!f&&(null==(t=m.widgets)?void 0:t.length)>0)return m.widgets.forEach(((e,t)=>{const s=u.widgets[t];e.name===s.name&&e.type===s.type&&(e.value=s.value)})),void g();const y=(null==f?void 0:f.length)<=(null==(s=m.widgets)?void 0:s.length);let v=y?0:f.length-1;function _(e,t){var s,o,n,i,a,l;if(!0===e||!1===e){if((null==(s=t.options)?void 0:s.on)&&(null==(o=t.options)?void 0:o.off))return{value:e,pass:!0}}else if("number"==typeof e){if((null==(n=t.options)?void 0:n.min)<=e&&e<=(null==(i=t.options)?void 0:i.max))return{value:e,pass:!0}}else{if(null==(l=null==(a=t.options)?void 0:a.values)?void 0:l.includes(e))return{value:e,pass:!0};if(t.inputEl&&"string"==typeof e)return{value:e,pass:!0}}return{value:t.value,pass:!1}}const w=e=>{var t;const s=u.widgets[e];let o=m.widgets[e];if(o.name===s.name&&o.type===s.type){for(;y?v<f.length:v>=0;){let{value:e,pass:t}=_(f[v],o);if(t&&null!==e){o.value=e;break}v+=y?1:-1}v++,y||(v=f.length-((null==(t=m.widgets)?void 0:t.length)-1-e))}};if(y&&(null==(o=m.widgets)?void 0:o.length)>0)for(let b=0;b<m.widgets.length;b++)w(b);else if((null==(n=m.widgets)?void 0:n.length)>0)for(let b=m.widgets.length-1;b>=0;b--)w(b);g()};$.registerExtension({name:"Comfy.EasyUse.ExtraMenu",async beforeRegisterNodeDef(e,t,s){Vt(e,(function(e,s){s.unshift({content:Ce("🔃 Reload Node"),callback:(e,t,s,o,n)=>{let i=LGraphCanvas.active_canvas;if(!i.selected_nodes||Object.keys(i.selected_nodes).length<=1)$t(n);else for(let a in i.selected_nodes)$t(i.selected_nodes[a])}}),"easy ckptNames"==t.name&&s.unshift({content:Ce("💎 View Checkpoint Info..."),callback:(e,t,s,o,n)=>{n.widgets[0].value}})})),Ft.includes(t.name)&&Zt("↪️ Swap EasyPrompt","positive_prompt",Ft,e),Dt.includes(t.name)&&Zt("↪️ Swap EasyLoader","loaders",Dt,e),Ot.includes(t.name)&&Zt("↪️ Swap EasyPreSampling","preSampling",Ot,e),Gt.includes(t.name)&&Zt("↪️ Swap EasyKSampler","preSampling",Gt,e),Rt.includes(t.name)&&Zt("↪️ Swap Custom Sampler","sampler",Rt,e),Mt.includes(t.name)&&Zt("↪️ Swap Custom Sigmas","sigmas",Mt,e),Pt.includes(t.name)&&Zt("↪️ Swap EasyControlnet","controlnet",Pt,e),Bt.includes(t.name)&&Zt("↪️ Swap EasyAdapater","ipadapter",Bt,e),Ut.includes(t.name)&&Zt("↪️ Swap LoadImage","load_image",Ut,e),zt.includes(t.name)&&Zt("↪️ Swap InpaintNode","inpaint",zt,e)}});const es="➡️";$.registerExtension({name:"easy setNode",registerCustomNodes(){class e{constructor(){y(this,"defaultVisibility",!0),y(this,"serialize_widgets",!0),this.properties||(this.properties={previousName:""}),this.properties.showOutputText=e.defaultVisibility;const t=this;t.color=LGraphCanvas.node_colors.blue.color,this.addWidget("text","Constant","",((e,s,o,n,i)=>{t.validateName(t.graph),""!==this.widgets[0].value&&(this.title=es+this.widgets[0].value),this.update(),this.properties.previousName=this.widgets[0].value}),{}),this.addInput("*","*"),this.onConnectionsChange=function(e,s,o,n,i){if(1!=e||o||(this.inputs[s].type="*",this.inputs[s].name="*",this.title="Set"),n&&t.graph&&1==e&&o){const e=t.graph._nodes.find((e=>e.id==n.origin_id)).outputs[n.origin_slot],s=e.type,o=t.is_auto_link?this.widgets[0].value:e.name;"Set"===this.title&&(this.title=es+o,this.widgets[0].value=o),"*"===this.widgets[0].value&&(this.widgets[0].value=o),this.validateName(t.graph),this.inputs[0].type=s,this.inputs[0].name=o,setTimeout((e=>{this.title=es+this.widgets[0].value}),1)}this.update()},this.validateName=function(e){let s=t.widgets[0].value;if(""!=s){let o=0,n=[];do{n=e._nodes.filter((e=>e!=this&&("easy setNode"==e.type&&e.widgets[0].value===s))),n.length>0&&(s=t.widgets[0].value+o),o++}while(n.length>0);t.widgets[0].value=s,this.update()}},this.clone=function(){const t=e.prototype.clone.apply(this);return t.inputs[0].name="*",t.inputs[0].type="*",t.properties.previousName="",t.size=t.computeSize(),t},this.onAdded=function(e){this.validateName(e)},this.update=function(){if(t.graph){this.findGetters(t.graph).forEach((e=>{e.setType(this.inputs[0].type)})),this.widgets[0].value&&this.findGetters(t.graph,!0).forEach((e=>{e.setName(this.widgets[0].value)}));t.graph._nodes.filter((e=>"easy getNode"==e.type)).forEach((e=>{e.setComboValues&&e.setComboValues()}))}},this.findGetters=function(e,t){const s=t?this.properties.previousName:this.widgets[0].value;return e._nodes.filter((e=>"easy getNode"==e.type&&e.widgets[0].value===s&&""!=s))},this.isVirtualNode=!0}onRemoved(){this.graph._nodes.filter((e=>"easy getNode"==e.type)).forEach((e=>{e.setComboValues&&e.setComboValues([this])}))}}LiteGraph.registerNodeType("easy setNode",Object.assign(e,{title:"Set"})),e.category="EasyUse/Util"}}),$.registerExtension({name:"easy getNode",registerCustomNodes(){class e{constructor(){y(this,"defaultVisibility",!0),y(this,"serialize_widgets",!0),this.properties||(this.properties={}),this.properties.showOutputText=e.defaultVisibility;const t=this;t.color=LGraphCanvas.node_colors.blue.color,this.addWidget("combo","Constant","",(e=>{this.onRename()}),{values:()=>t.graph._nodes.filter((e=>"easy setNode"==e.type)).map((e=>e.widgets[0].value)).sort()}),this.addOutput("*","*"),this.onConnectionsChange=function(e,t,s,o,n){this.validateLinks(),2!=e||s?(this.onRename(),setTimeout((e=>{this.title="⬅️"+this.widgets[0].value}),1)):(this.outputs[t].type="*",this.outputs[t].name="*",this.title="Get")},this.setName=function(e){t.widgets[0].value=e,t.onRename(),t.serialize()},this.onRename=function(e=0){const s=this.findSetter(t.graph);if(s){const t=s.inputs[0].type,o=s.inputs[0].name;this.setType(t,o),this.outputs[e].type=t,this.outputs[e].name=o,this.title="⬅️"+s.widgets[0].value}else this.setType("*","*"),this.outputs[e].type="*",this.outputs[e].name="*"},this.clone=function(){const t=e.prototype.clone.apply(this);return t.size=t.computeSize(),t},this.validateLinks=function(){"*"!=this.outputs[0].type&&this.outputs[0].links&&this.outputs[0].links.forEach((e=>{const s=t.graph.links[e];s&&s.type!=this.outputs[0].type&&"*"!=s.type&&t.graph.removeLink(e)}))},this.setType=function(e,t){this.outputs[0].name=t,this.outputs[0].type=e,this.validateLinks()},this.findSetter=function(e){const t=this.widgets[0].value;return e._nodes.find((e=>"easy setNode"==e.type&&e.widgets[0].value===t&&""!=t))},this.isVirtualNode=!0}getInputLink(e){const t=this.findSetter(this.graph);if(t){const s=t.inputs[e];return this.graph.links[s.link]}throw new Error("No setter found for "+this.widgets[0].value+"("+this.type+")")}onAdded(e){}}LiteGraph.registerNodeType("easy getNode",Object.assign(e,{title:"Get"})),e.category="EasyUse/Util"}}),ee.addEventListener("easyuse-global-seed",(function(e){let t=app.graph._nodes_by_id;for(let s in t){let o=t[s];if("easy globalSeed"==o.type){if(o.widgets){const t=o.widgets.find((e=>"value"==e.name));o.widgets.find((e=>"last_seed"==e.name)).value=t.value,t.value=e.detail.value}}else if(o.widgets){const t=o.widgets.find((e=>"seed_num"==e.name||"seed"==e.name||"noise_seed"==e.name));t&&null!=e.detail.seed_map[o.id]&&(t.value=e.detail.seed_map[o.id])}}}));const ts=ee.queuePrompt;ee.queuePrompt=async function(e,{output:t,workflow:s}){s.seed_widgets={};for(let o in app.graph._nodes_by_id){let e=app.graph._nodes_by_id[o].widgets;if(e)for(let t in e)"seed_num"!=e[t].name&&"seed"!=e[t].name&&"noise_seed"!=e[t].name||"converted-widget"==e[t].type||(s.seed_widgets[o]=parseInt(t))}return await ts.call(ee,e,{output:t,workflow:s})};const ss=["easy imageSave","easy fullkSampler","easy kSampler","easy kSamplerTiled","easy kSamplerInpainting","easy kSamplerDownscaleUnet","easy kSamplerSDTurbo","easy detailerFix"];$.registerExtension({name:"Comfy.EasyUse.SaveImageExtraOutput",async beforeRegisterNodeDef(e,t,s){if(ss.includes(t.name)){const t=e.prototype.onNodeCreated;e.prototype.onNodeCreated=function(){const e=t?t.apply(this,arguments):void 0,o=this.widgets.find((e=>"filename_prefix"===e.name||"save_prefix"===e.name));return o.serializeValue=()=>ne(s,o.value),e}}else{const t=e.prototype.onNodeCreated;e.prototype.onNodeCreated=function(){const e=t?t.apply(this,arguments):void 0;return this.properties&&"Node name for S&R"in this.properties||this.addProperty("Node name for S&R",this.constructor.type,"string"),e}}}});const os=["easy wildcards","easy positive","easy negative","easy stylesSelector","easy promptConcat","easy promptReplace"],ns=["easy preSampling","easy preSamplingAdvanced","easy preSamplingNoiseIn","easy preSamplingCustom","easy preSamplingDynamicCFG","easy preSamplingSdTurbo","easy preSamplingLayerDiffusion"],is=["easy kSampler","easy kSamplerTiled","easy kSamplerInpainting","easy kSamplerDownscaleUnet","easy kSamplerSDTurbo"],as=["easy controlnetLoader","easy controlnetLoaderADV"],ls=["easy instantIDApply","easy instantIDApplyADV"],rs=["easy ipadapterApply","easy ipadapterApplyADV","easy ipadapterApplyFaceIDKolors","easy ipadapterStyleComposition"],ds=["easy pipeIn","easy pipeOut","easy pipeEdit"],us=["easy XYPlot","easy XYPlotAdvanced"],cs=["easy setNode"],ps=["Reroute","RescaleCFG","LoraLoaderModelOnly","LoraLoader","FreeU","FreeU_v2",...rs,...cs],hs={"easy seed":{from:{INT:["Reroute",...ns,"easy fullkSampler"]}},"easy positive":{from:{STRING:["Reroute",...os]}},"easy negative":{from:{STRING:["Reroute",...os]}},"easy wildcards":{from:{STRING:["Reroute","easy showAnything",...os]}},"easy stylesSelector":{from:{STRING:["Reroute","easy showAnything",...os]}},"easy promptConcat":{from:{STRING:["Reroute","easy showAnything",...os]}},"easy promptReplace":{from:{STRING:["Reroute","easy showAnything",...os]}},"easy fullLoader":{from:{PIPE_LINE:["Reroute",...ns,"easy fullkSampler",...ds,...cs],MODEL:ps},to:{STRING:["Reroute",...os]}},"easy a1111Loader":{from:{PIPE_LINE:["Reroute",...ns,...as,...ls,...ds,...cs],MODEL:ps},to:{STRING:["Reroute",...os]}},"easy comfyLoader":{from:{PIPE_LINE:["Reroute",...ns,...as,...ls,...ds,...cs],MODEL:ps},to:{STRING:["Reroute",...os]}},"easy hunyuanDiTLoader":{from:{PIPE_LINE:["Reroute",...ns,...as,...ls,...ds,...cs],MODEL:ps},to:{STRING:["Reroute",...os]}},"easy kolorsLoader":{from:{PIPE_LINE:["Reroute",...ns,...as,...ls,...ds,...cs],MODEL:ps},to:{STRING:["Reroute",...os]}},"easy pixArtLoader":{from:{PIPE_LINE:["Reroute",...ns,...as,...ls,...ds,...cs],MODEL:ps},to:{STRING:["Reroute",...os]}},"easy svdLoader":{from:{PIPE_LINE:["Reroute","easy preSampling","easy preSamplingAdvanced","easy preSamplingDynamicCFG",...ds,...cs],MODEL:ps},to:{STRING:["Reroute",...os]}},"easy zero123Loader":{from:{PIPE_LINE:["Reroute","easy preSampling","easy preSamplingAdvanced","easy preSamplingDynamicCFG",...ds,...cs],MODEL:ps},to:{STRING:["Reroute",...os]}},"easy sv3dLoader":{from:{PIPE_LINE:["Reroute","easy preSampling","easy preSamplingAdvanced","easy preSamplingDynamicCFG",...ds,...cs],MODEL:ps},to:{STRING:["Reroute",...os]}},"easy preSampling":{from:{PIPE_LINE:["Reroute",...is,...ds,...as,...us,...cs]}},"easy preSamplingAdvanced":{from:{PIPE_LINE:["Reroute",...is,...ds,...as,...us,...cs]}},"easy preSamplingDynamicCFG":{from:{PIPE_LINE:["Reroute",...is,...ds,...as,...us,...cs]}},"easy preSamplingCustom":{from:{PIPE_LINE:["Reroute",...is,...ds,...as,...us,...cs]}},"easy preSamplingLayerDiffusion":{from:{PIPE_LINE:["Reroute","easy kSamplerLayerDiffusion",...is,...ds,...as,...us,...cs]}},"easy preSamplingNoiseIn":{from:{PIPE_LINE:["Reroute",...is,...ds,...as,...us,...cs]}},"easy fullkSampler":{from:{PIPE_LINE:["Reroute",...ds.reverse(),"easy preDetailerFix","easy preMaskDetailerFix",...ns,...cs]}},"easy kSampler":{from:{PIPE_LINE:["Reroute",...ds.reverse(),"easy preDetailerFix","easy preMaskDetailerFix","easy hiresFix",...ns,...cs]}},"easy controlnetLoader":{from:{PIPE_LINE:["Reroute",...ns,...as,...ls,...ds,...cs]}},"easy controlnetLoaderADV":{from:{PIPE_LINE:["Reroute",...ns,...as,...ls,...ds,...cs]}},"easy instantIDApply":{from:{PIPE_LINE:["Reroute",...ns,...as,...ls,...ds,...cs],MODEL:ps},to:{COMBO:["Reroute","easy promptLine"]}},"easy instantIDApplyADV":{from:{PIPE_LINE:["Reroute",...ns,...as,...ls,...ds,...cs],MODEL:ps},to:{COMBO:["Reroute","easy promptLine"]}},"easy ipadapterApply":{to:{COMBO:["Reroute","easy promptLine"]}},"easy ipadapterApplyADV":{to:{STRING:["Reroute","easy sliderControl",...os],COMBO:["Reroute","easy promptLine"]}},"easy ipadapterStyleComposition":{to:{COMBO:["Reroute","easy promptLine"]}},"easy preDetailerFix":{from:{PIPE_LINE:["Reroute","easy detailerFix",...ds,...cs]},to:{PIPE_LINE:["Reroute","easy ultralyticsDetectorPipe","easy samLoaderPipe","easy kSampler","easy fullkSampler"]}},"easy preMaskDetailerFix":{from:{PIPE_LINE:["Reroute","easy detailerFix",...ds,...cs]}},"easy samLoaderPipe":{from:{PIPE_LINE:["Reroute","easy preDetailerFix",...ds,...cs]}},"easy ultralyticsDetectorPipe":{from:{PIPE_LINE:["Reroute","easy preDetailerFix",...ds,...cs]}},"easy cascadeLoader":{from:{PIPE_LINE:["Reroute","easy fullCascadeKSampler","easy preSamplingCascade",...as,...ds,...cs],MODEL:ps.filter((e=>!rs.includes(e)))}},"easy fullCascadeKSampler":{from:{PIPE_LINE:["Reroute","easy preSampling","easy preSamplingAdvanced",...ds,...cs]}},"easy preSamplingCascade":{from:{PIPE_LINE:["Reroute","easy cascadeKSampler",...ds,...cs]}},"easy cascadeKSampler":{from:{PIPE_LINE:["Reroute","easy preSampling","easy preSamplingAdvanced",...ds,...cs]}}};$.registerExtension({name:"Comfy.EasyUse.Suggestions",async setup(e){LGraphCanvas.prototype.createDefaultNodeForSlot=function(e){e=e||{};var t,s=Object.assign({nodeFrom:null,slotFrom:null,nodeTo:null,slotTo:null,position:[],nodeType:null,posAdd:[0,0],posSizeFix:[0,0]},e),o=s.nodeFrom&&null!==s.slotFrom,n=!o&&s.nodeTo&&null!==s.slotTo;if(!o&&!n)return!1;if(!s.nodeType)return!1;var i=o?s.nodeFrom:s.nodeTo,a=o?s.slotFrom:s.slotTo,l=i.type,r=!1;switch(typeof a){case"string":r=o?i.findOutputSlot(a,!1):i.findInputSlot(a,!1),a=o?i.outputs[a]:i.inputs[a];break;case"object":r=o?i.findOutputSlot(a.name):i.findInputSlot(a.name);break;case"number":r=a,a=o?i.outputs[a]:i.inputs[a];break;default:return!1}var d=a.type==LiteGraph.EVENT?"_event_":a.type,u=o?LiteGraph.slot_types_default_out:LiteGraph.slot_types_default_in;if(u&&u[d]){a.link;let e=!1;const n=o?"from":"to";if(hs[l]&&hs[l][n]&&(null==(t=hs[l][n][d])?void 0:t.length)>0){for(var c in hs[l][n][d])if(s.nodeType==hs[l][n][d][c]||"AUTO"==s.nodeType){e=hs[l][n][d][c];break}}else if("object"==typeof u[d]||"array"==typeof u[d]){for(var c in u[d])if(s.nodeType==u[d][c]||"AUTO"==s.nodeType){e=u[d][c];break}}else s.nodeType!=u[d]&&"AUTO"!=s.nodeType||(e=u[d]);if(e){var p=!1;"object"==typeof e&&e.node&&(p=e,e=e.node);var h=LiteGraph.createNode(e);if(h){if(p){if(p.properties)for(var m in p.properties)h.addProperty(m,p.properties[m]);if(p.inputs)for(var m in h.inputs=[],p.inputs)h.addOutput(p.inputs[m][0],p.inputs[m][1]);if(p.outputs)for(var m in h.outputs=[],p.outputs)h.addOutput(p.outputs[m][0],p.outputs[m][1]);p.title&&(h.title=p.title),p.json&&h.configure(p.json)}return this.graph.add(h),h.pos=[s.position[0]+s.posAdd[0]+(s.posSizeFix[0]?s.posSizeFix[0]*h.size[0]:0),s.position[1]+s.posAdd[1]+(s.posSizeFix[1]?s.posSizeFix[1]*h.size[1]:0)],o?s.nodeFrom.connectByType(r,h,d):s.nodeTo.connectByTypeOutput(r,h,d),!0}}}return!1},LGraphCanvas.prototype.showConnectionMenu=function(e){e=e||{};var t,s=Object.assign({nodeFrom:null,slotFrom:null,nodeTo:null,slotTo:null,e:null},e),o=this,n=s.nodeFrom&&s.slotFrom,i=!n&&s.nodeTo&&s.slotTo;if(!n&&!i)return!1;var a=n?s.nodeFrom:s.nodeTo,l=n?s.slotFrom:s.slotTo,r=!1;switch(typeof l){case"string":r=n?a.findOutputSlot(l,!1):a.findInputSlot(l,!1),l=n?a.outputs[l]:a.inputs[l];break;case"object":r=n?a.findOutputSlot(l.name):a.findInputSlot(l.name);break;case"number":r=l,l=n?a.outputs[l]:a.inputs[l];break;default:return!1}var d=["Add Node",null];o.allow_searchbox&&(d.push("Search"),d.push(null));var u=l.type==LiteGraph.EVENT?"_event_":l.type,c=n?LiteGraph.slot_types_default_out:LiteGraph.slot_types_default_in,p=a.type;if(c&&c[u]){const e=n?"from":"to";if(hs[p]&&hs[p][e]&&(null==(t=hs[p][e][u])?void 0:t.length)>0)for(var h in hs[p][e][u])d.push(hs[p][e][u][h]);else if("object"==typeof c[u]||"array"==typeof c[u])for(var h in c[u])d.push(c[u][h]);else d.push(c[u])}var m=new LiteGraph.ContextMenu(d,{event:s.e,title:(l&&""!=l.name?l.name+(u?" | ":""):"")+(l&&u?u:""),callback:function(e,t,i){switch(e){case"Add Node":LGraphCanvas.onMenuAdd(null,null,i,m,(function(e){n?s.nodeFrom.connectByType(r,e,u):s.nodeTo.connectByTypeOutput(r,e,u)}));break;case"Search":n?o.showSearchBox(i,{node_from:s.nodeFrom,slot_from:l,type_filter_in:u}):o.showSearchBox(i,{node_to:s.nodeTo,slot_from:l,type_filter_out:u});break;default:o.createDefaultNodeForSlot(Object.assign(s,{position:[s.e.canvasX,s.e.canvasY],nodeType:e}))}}});return!1}}}),$.registerExtension({name:"Comfy.EasyUse.TimeTaken",setup(){const e=new Map;let t=0;ee.addEventListener("executing",(s=>{if(!le("EasyUse.Nodes.Runtime",null,!0))return;const o=(null==s?void 0:s.node)||(null==s?void 0:s.detail)||null,n=$e(o);n&&(n.executionDuration="");const i=e.get(t);if(e.delete(t),t&&i){const e=Date.now()-i,s=$e(t);s&&(s.executionDuration=`${(e/1e3).toFixed(2)}${Ce("s")}`)}t=o,e.set(o,Date.now())}))},beforeRegisterNodeDef(e,t){const s=e.prototype.onDrawForeground;e.prototype.onDrawForeground=function(...e){const[t]=e;return function(e,t){if(!t)return;e.save(),e.fillStyle=LiteGraph.NODE_DEFAULT_BGCOLOR,function(e,t,s,o,n,i){e.beginPath(),e.moveTo(t+i,s),e.lineTo(t+o-i,s),e.arcTo(t+o,s,t+o,s+i,i),e.lineTo(t+o,s+n-i),e.arcTo(t+o,s+n,t+o-i,s+n,i),e.lineTo(t+i,s+n),e.arcTo(t,s+n,t,s+n-i,i),e.lineTo(t,s+i),e.arcTo(t,s,t+i,s,i),e.closePath()}(e,0,-LiteGraph.NODE_TITLE_HEIGHT-20,e.measureText(t).width+10,LiteGraph.NODE_TITLE_HEIGHT-10,4),e.fill(),function(e,t,s,o,n="#000",i=12,a="Inter"){e.font=`${i}px ${a}`,e.fillStyle=n,e.fillText(t,s,o)}(e,t,8,-LiteGraph.NODE_TITLE_HEIGHT-6,LiteGraph.NODE_TITLE_COLOR),e.restore()}(t,this.executionDuration||""),null==s?void 0:s.apply(this,e)}}});let ms=null;$.registerExtension({name:"Comfy.EasyUse.HotKeys",setup(){if(void 0!==w){w("up,down,left,right",(function(e,t){var s,o,n,i,a,l,r,d,u,c,p,h,m,g,f;e.preventDefault();if(!le("EasyUse.Hotkeys.JumpNearestNodes",null,!0))return;const y=et();if(0===y.length)return;const v=y[0];switch(t.key){case"up":case"left":let e=null;if(at(v)){const e=null==(s=v.widgets_values)?void 0:s[0],t=null==(o=v.graph)?void 0:o._nodes,n=null==t?void 0:t.find((t=>{var s;if(lt(t)){if((null==(s=t.widgets_values)?void 0:s[0])===e)return t}return null}));n&&st(n)}else if((null==(n=v.inputs)?void 0:n.length)>0){for(let t=0;t<v.inputs.length;t++)if(v.inputs[t].link){e=v.inputs[t].link;break}if(e){const t=null==(i=v.graph)?void 0:i.links;if(t[e]){const s=null==(a=t[e])?void 0:a.origin_id,o=null==(r=null==(l=v.graph)?void 0:l._nodes_by_id)?void 0:r[s];o&&st(o)}}}break;case"down":case"right":let t=null;if(lt(v)){const e=null==(d=v.widgets_values)?void 0:d[0],t=null==(u=v.graph)?void 0:u._nodes,s=null==t?void 0:t.find((t=>{var s;if(at(t)){if((null==(s=t.widgets_values)?void 0:s[0])===e)return t}return null}));s&&st(s)}else if((null==(c=v.outputs)?void 0:c.length)>0){for(let e=0;e<v.outputs.length;e++)if((null==(p=v.outputs[e].links)?void 0:p.length)>0&&v.outputs[e].links[0]){t=v.outputs[e].links[0];break}if(t){const e=null==(h=v.graph)?void 0:h.links;if(e[t]){const s=null==(m=e[t])?void 0:m.target_id,o=null==(f=null==(g=v.graph)?void 0:g._nodes_by_id)?void 0:f[s];o&&st(o)}}}}})),w("shift+up,shift+down,shift+left,shift+right",(function(e,t){e.preventDefault();if(!le("EasyUse.Hotkeys.AlignSelectedNodes",null,!0))return;const s=et();if(s.length<=1)return;const o=s;switch(t.key){case"shift+up":LGraphCanvas.alignNodes(o,"top",o[0]);break;case"shift+down":LGraphCanvas.alignNodes(o,"bottom",o[0]);break;case"shift+left":LGraphCanvas.alignNodes(o,"left",o[0]);break;case"shift+right":LGraphCanvas.alignNodes(o,"right",o[0])}ms||(ms=Ne()),ms&&ms.update()})),w("shift+g",(function(e,t){e.preventDefault();le("EasyUse.Hotkeys.AddGroup",null,!0)&&(fs(),ms||(ms=Ne()),ms&&ms.update())})),w("shift+r",(function(e,t){e.preventDefault();le("EasyUse.Hotkeys.cleanVRAMused",null,!0)&&Ie()}));const e=[];Array.from(Array(10).keys()).forEach((t=>e.push(`alt+${t}`))),w(e.join(","),(async function(e,t){e.preventDefault();if(!le("EasyUse.Hotkeys.NodesTemplate",null,!0))return;const s=t.key;let o=parseInt(s.split("+")[1]);const n=await ee.getUserData("comfy.templates.json");let i=null;if(200==n.status)try{i=await n.json()}catch(l){xe.error(Ce("Get Node Templates File Failed"))}else localStorage["Comfy.NodeTemplates"]?i=JSON.parse(localStorage["Comfy.NodeTemplates"]):xe.warn(Ce("No Node Templates Found"));if(!i)return void xe.warn(Ce("No Node Templates Found"));o=0===o?9:o-1;const a=i[o];if(a)try{const e=(null==a?void 0:a.name)||"Group",t=(null==a?void 0:a.data)?JSON.parse(a.data):[];gs((async()=>{await ie.registerFromWorkflow(t.groupNodes,{}),localStorage.litegrapheditor_clipboard=a.data,$.canvas.pasteFromClipboard(),t.groupNodes||fs(e)}))}catch(l){xe.error(l)}else xe.warn(Ce("Node template with {key} not set").replace("{key}",s))}));const t=async function(e){if(("b"===e.key||"m"==e.key)&&(e.metaKey||e.ctrlKey)){if(0===et().length)return;ms||(ms=Ne()),ms&&ms.update()}};window.addEventListener("keydown",t,!0)}}});const gs=async e=>{const t=localStorage.litegrapheditor_clipboard;await e(),localStorage.litegrapheditor_clipboard=t},fs=e=>{const t=et();if(0===t.length)return;const s=t;let o=new LiteGraph.LGraphGroup;o.title=e||"Group",((e,t=[],s=20)=>{var o,n,i,a,l,r,d,u,c,p;for(var h of(n=i=a=l=-1,r=d=u=c=-1,[e._nodes,t]))for(var m in h)r=(p=h[m]).pos[0],d=p.pos[1],u=p.pos[0]+p.size[0],c=p.pos[1]+p.size[1],"Reroute"!=p.type&&(d-=LiteGraph.NODE_TITLE_HEIGHT),(null==(o=p.flags)?void 0:o.collapsed)&&(c=d+LiteGraph.NODE_TITLE_HEIGHT,(null==p?void 0:p._collapsed_width)&&(u=r+Math.round(p._collapsed_width))),(-1==n||r<n)&&(n=r),(-1==i||d<i)&&(i=d),(-1==a||u>a)&&(a=u),(-1==l||c>l)&&(l=c);i-=Math.round(1.4*e.font_size),e.pos=[n-s,i-s],e.size=[a-n+2*s,l-i+2*s]})(o,s),$.canvas.graph.add(o)};function ys(e,t,s,o){const n=[];return e.workflow.links.forEach((e=>{s&&e[1]===t&&!n.includes(e[3])&&n.push(e[3]),o&&e[3]===t&&!n.includes(e[1])&&n.push(e[1])})),n}async function vs(e,t=!1){const s=structuredClone(await $.graphToPrompt()),o=[];if(s.workflow.nodes.forEach((e=>{o.push(e.id)})),s.workflow.links=s.workflow.links.filter((e=>o.includes(e[1])&&o.includes(e[3]))),t)for(;!$.graph._nodes_by_id[e].isChooser;)e=ys(s,e,!0,!1)[0];const n=function(e,t){const s=[],o=[t];for(;o.length>0;){const t=o.pop();s.push(t),o.push(...ys(e,t,!0,!1).filter((e=>!(s.includes(e)||o.includes(e)))))}o.push(...s.filter((e=>e!=t)));const n=[t];for(;o.length>0;){const t=o.pop();n.push(t),o.push(...ys(e,t,!1,!0).filter((e=>!(n.includes(e)||o.includes(e)))))}const i=[];return i.push(...s),i.push(...n.filter((e=>!i.includes(e)))),i}(s,e);s.workflow.nodes=s.workflow.nodes.filter((t=>(t.id===e&&t.inputs.forEach((e=>{e.link=null})),n.includes(t.id)))),s.workflow.links=s.workflow.links.filter((e=>n.includes(e[1])&&n.includes(e[3])));const i={};for(const[r,d]of Object.entries(s.output))n.includes(parseInt(r))&&(i[r]=d);const a={};for(const[r,d]of Object.entries(i[e.toString()].inputs))Array.isArray(d)||(a[r]=d);i[e.toString()].inputs=a,s.output=i;const l=$.graphToPrompt;$.graphToPrompt=()=>($.graphToPrompt=l,s),$.queuePrompt(0)}const _s=new class{constructor(){this.current_node_id=void 0,this.class_of_current_node=null,this.current_node_is_chooser=!1}update(){var e,t;return $.runningNodeId!=this.current_node_id&&(this.current_node_id=$.runningNodeId,this.current_node_id?(this.class_of_current_node=null==(t=null==(e=$.graph)?void 0:e._nodes_by_id[$.runningNodeId.toString()])?void 0:t.comfyClass,this.current_node_is_chooser="easy imageChooser"===this.class_of_current_node):(this.class_of_current_node=void 0,this.current_node_is_chooser=!1),!0)}},ws=class e{constructor(){}static idle(){return!$.runningNodeId}static paused(){return!0}static paused_here(t){return e.here(t)}static running(){return!e.idle()}static here(e){return $.runningNodeId==e}static state(){return"Paused"}};y(ws,"cancelling",!1);let bs=ws;function As(e,t){const s=new FormData;s.append("message",t),s.append("id",e),ee.fetchApi("/easyuse/image_chooser_message",{method:"POST",body:s})}function Ss(){As(-1,"__cancel__"),bs.cancelling=!0,ee.interrupt(),bs.cancelling=!1}var Es=0;function Cs(){Es+=1}const Ls=["easy kSampler","easy kSamplerTiled","easy fullkSampler"];function ks(e){const t=$.graph._nodes_by_id[e.detail.id];if(t){t.selected=new Set,t.anti_selected=new Set;const s=function(e,t){var s;return e.imgs=[],t.forEach((t=>{const s=new Image;e.imgs.push(s),s.onload=()=>{$.graph.setDirtyCanvas(!0)},s.src=`/view?filename=${encodeURIComponent(t.filename)}&type=temp&subfolder=${$.getPreviewFormatParam()}`})),null==(s=e.setSizeForImage)||s.call(e),e.imgs}(t,e.detail.urls);return{node:t,image:s,isKSampler:Ls.includes(t.type)}}}function xs(e,t,s){var o;if(e.imageRects)o=e.imageRects[t];else{const t=e.imagey;o=[1,t+1,e.size[0]-2,e.size[1]-t-2]}s.strokeRect(o[0]+1,o[1]+1,o[2]-2,o[3]-2)}class Is extends se{constructor(){super(),this.node=null,this.select_index=[],this.dialog_div=null}show(e,t){this.select_index=[],this.node=t;const s=e.map(((e,s)=>{const o=te("img",{src:e.src,onclick:e=>{this.select_index.includes(s)?(this.select_index=this.select_index.filter((e=>e!==s)),o.classList.remove("selected")):(this.select_index.push(s),o.classList.add("selected")),t.selected.has(s)?t.selected.delete(s):t.selected.add(s)}});return o}));super.show(te("div.comfyui-easyuse-chooser-dialog",[te("h5.comfyui-easyuse-chooser-dialog-title",Ce("Choose images to continue")),te("div.comfyui-easyuse-chooser-dialog-images",s)]))}createButtons(){const e=super.createButtons();return e[0].onclick=e=>{bs.running()&&Ss(),super.close()},e.unshift(te("button",{type:"button",textContent:Ce("Choose Selected Images"),onclick:e=>{As(this.node.id,[...this.node.selected,-1,...this.node.anti_selected]),bs.idle()&&(Cs(),vs(this.node.id).then((()=>{As(this.node.id,[...this.node.selected,-1,...this.node.anti_selected])}))),super.close()}})),e}}function Ns(){const e=$.graph._nodes_by_id[this.node_id];if(e){const t=[...e.selected];(null==t?void 0:t.length)>0&&e.setProperty("values",t),As(e.id,[...e.selected,-1,...e.anti_selected]),bs.idle()&&(Cs(),vs(e.id).then((()=>{As(e.id,[...e.selected,-1,...e.anti_selected])})))}}function Ts(){bs.running()&&Ss()}function Ds(e){Object.defineProperty(e,"clicked",{get:function(){return this._clicked},set:function(e){this._clicked=e&&""!=this.name}})}function Os(e){e.options||(e.options={}),e.options.serialize=!1}$.registerExtension({name:"Comfy.EasyUse.imageChooser",init(){window.addEventListener("beforeunload",Ss,!0)},setup(e){const t=LGraphCanvas.prototype.draw;LGraphCanvas.prototype.draw=function(){_s.update()&&e.graph._nodes.forEach((e=>{e.update&&e.update()})),t.apply(this,arguments)},ee.addEventListener("easyuse-image-choose",(function(e){const{node:t,image:s,isKSampler:o}=ks(e);if(o){(new Is).show(s,t)}}));const s=ee.interrupt;ee.interrupt=function(){bs.cancelling||Ss(),s.apply(this,arguments)},ee.addEventListener("execution_start",(function(){(Es>0?(Es-=1,0):(As(-1,"__start__"),1))&&e.graph._nodes.forEach((e=>{(e.selected||e.anti_selected)&&(e.selected.clear(),e.anti_selected.clear(),e.update())}))}))},async nodeCreated(e,t){if("easy imageChooser"==e.comfyClass){e.setProperty("values",[]),void 0===(null==e?void 0:e.imageIndex)&&Object.defineProperty(e,"imageIndex",{get:function(){return null},set:function(t){e.overIndex=t}}),void 0===(null==e?void 0:e.imagey)&&Object.defineProperty(e,"imagey",{get:function(){return null},set:function(t){return e.widgets[e.widgets.length-1].last_y+LiteGraph.NODE_WIDGET_HEIGHT}});const t=e.onMouseDown;e.onMouseDown=function(s,o,n){if(s.isPrimary){const t=function(e,t){var s,o;if((null==(s=e.imgs)?void 0:s.length)>1)for(var n=0;n<e.imageRects.length;n++){const s=t[0]-e.imageRects[n][0],o=t[1]-e.imageRects[n][1];if(s>0&&s<e.imageRects[n][2]&&o>0&&o<e.imageRects[n][3])return n}else if(1==(null==(o=e.imgs)?void 0:o.length)&&t[1]>e.imagey)return 0;return-1}(e,o);t>=0&&this.imageClicked(t)}return t&&t.apply(this,arguments)},e.send_button_widget=e.addWidget("button","","",Ns),e.cancel_button_widget=e.addWidget("button","","",Ts),Ds(e.cancel_button_widget),Ds(e.send_button_widget),Os(e.cancel_button_widget),Os(e.send_button_widget)}},beforeRegisterNodeDef(e,t,s){if("easy imageChooser"==(null==t?void 0:t.name)){const t=e.prototype.onDrawBackground;e.prototype.onDrawBackground=function(e){t.apply(this,arguments),function(e,t){var s,o;if(e.imgs){if(e.imageRects)for(let s=0;s<e.imgs.length;s++){t.fillStyle="#000",t.fillRect(...e.imageRects[s]);const o=e.imgs[s],i=e.imageRects[s][2],a=e.imageRects[s][3];let l=i/o.width,r=a/o.height;var n=Math.min(l,r);let d=n*o.height,u=n*o.width;const c=e.imageRects[s][0]+(i-u)/2,p=e.imageRects[s][1]+(a-d)/2,h=2;t.drawImage(o,c+h,p+h,u-2*h,d-2*h)}t.lineWidth=2,t.strokeStyle="green",null==(s=null==e?void 0:e.selected)||s.forEach((s=>{xs(e,s,t)})),t.strokeStyle="#F88",null==(o=null==e?void 0:e.anti_selected)||o.forEach((s=>{xs(e,s,t)}))}}(this,e)},e.prototype.imageClicked=function(t){"easy imageChooser"===(null==e?void 0:e.comfyClass)&&(this.selected.has(t)?this.selected.delete(t):this.selected.add(t),this.update())};const s=e.prototype.update;e.prototype.update=function(){var e;if(s&&s.apply(this,arguments),this.send_button_widget){this.send_button_widget.node_id=this.id;const t=(this.selected?this.selected.size:0)+(this.anti_selected?this.anti_selected.size:0),s=(null==(e=this.imgs)?void 0:e.length)||0;bs.paused_here(this.id)&&t>0?this.send_button_widget.name=t>1?"Progress selected ("+t+"/"+s+")":"Progress selected image":this.send_button_widget.name=t>0?t>1?"Progress selected ("+t+"/"+s+")":"Progress selected image as restart":""}if(this.cancel_button_widget){const e=bs.running();this.cancel_button_widget.name=e?"Cancel current run":""}this.setDirtyCanvas(!0,!0)}}}}),Number.prototype.div=function(e){return function(e,t){let s,o,n=0,i=0,a="string"==typeof e?e:e.toString(),l="string"==typeof t?t:t.toString();try{n=a.toString().split(".")[1].length}catch(r){}try{i=l.toString().split(".")[1].length}catch(r){}return s=Number(a.toString().replace(".","")),o=Number(l.toString().replace(".","")),s/o*Math.pow(10,i-n)}(this,e)};let Rs=[],Ms=0;const Gs={sd3:6.5,"sd3-turbo":4};class Ps extends se{constructor(){super(),this.lists=[],this.dialog_div=null,this.user_div=null}addItem(e,t){return te("div.easyuse-account-dialog-item",[te("input",{type:"text",placeholder:"Enter name",oninput:e=>{const t=Array.prototype.indexOf.call(this.dialog_div.querySelectorAll(".easyuse-account-dialog-item"),e.target.parentNode);Rs[t].name=e.target.value},value:Rs[e].name}),te("input.key",{type:"text",oninput:e=>{const t=Array.prototype.indexOf.call(this.dialog_div.querySelectorAll(".easyuse-account-dialog-item"),e.target.parentNode);Rs[t].key=e.target.value},placeholder:"Enter APIKEY",value:Rs[e].key}),te("button.choose",{textContent:Ce("Choose"),onclick:async e=>{var s,o,n;const i=Array.prototype.indexOf.call(this.dialog_div.querySelectorAll(".easyuse-account-dialog-item"),e.target.parentNode);let a=Rs[i].name,l=Rs[i].key;if(!a)return void xe.error(Ce("Please enter the account name"));if(!l)return void xe.error(Ce("Please enter the APIKEY"));let r=!0;for(let t=0;t<Rs.length;t++)if(!Rs[t].key){r=!1;break}if(!r)return void xe.error(Ce("APIKEY is not Empty"));Ms=i;const d=new FormData;d.append("api_keys",JSON.stringify(Rs)),d.append("current",Ms);const u=await ee.fetchApi("/easyuse/stability/set_api_keys",{method:"POST",body:d});if(200==u.status){const e=await u.json();if((null==e?void 0:e.account)&&(null==e?void 0:e.balance)){const i=(null==(s=e.account)?void 0:s.profile_picture)||null,a=(null==(o=e.account)?void 0:o.email)||null,l=(null==(n=e.balance)?void 0:n.credits)||0;t.replaceChildren(te("div.easyuse-account-user-info",{onclick:e=>{(new Ps).show(t)}},[te("div.user",[te("div.avatar",i?[te("img",{src:i})]:"😀"),te("div.info",[te("h5.name",a),te("h6.remark","Credits: "+l)])]),te("div.edit",{textContent:Ce("Edit")})])),xe.success(Ce("Save Succeed"))}else xe.success(Ce("Save Succeed"));this.close()}else xe.error(Ce("Save Failed"))}}),te("button.delete",{textContent:Ce("Delete"),onclick:e=>{const t=Array.prototype.indexOf.call(this.dialog_div.querySelectorAll(".easyuse-account-dialog-item"),e.target.parentNode);Rs.length<=1?xe.error(Ce("At least one account is required")):(Rs.splice(t,1),this.dialog_div.removeChild(e.target.parentNode))}})])}show(e){Rs.forEach(((t,s)=>{this.lists.push(this.addItem(s,e))})),this.dialog_div=te("div.easyuse-account-dialog",this.lists),super.show(te("div.easyuse-account-dialog-main",[te("div",[te("a",{href:"https://platform.stability.ai/account/keys",target:"_blank",textContent:Ce("Getting Your APIKEY")})]),this.dialog_div]))}createButtons(){const e=super.createButtons();return e.unshift(te("button",{type:"button",textContent:Ce("Save Account Info"),onclick:e=>{let t=!0;for(let s=0;s<Rs.length;s++)if(!Rs[s].key){t=!1;break}if(t){const e=new FormData;e.append("api_keys",JSON.stringify(Rs)),ee.fetchApi("/easyuse/stability/set_api_keys",{method:"POST",body:e}).then((e=>{200==e.status?xe.success(Ce("Save Succeed")):xe.error(Ce("Save Failed"))}))}else xe.error(Ce("APIKEY is not Empty"))}})),e.unshift(te("button",{type:"button",textContent:Ce("Add Account"),onclick:e=>{const t="Account "+Rs.length.toString();Rs.push({name:t,key:""});const s=this.addItem(Rs.length-1);this.lists.push(s),this.dialog_div.appendChild(s)}})),e}}$.registerExtension({name:"Comfy.EasyUse.API.SD3",async beforeRegisterNodeDef(e,t,s){if("easy stableDiffusion3API"==t.name){const t=e.prototype.onNodeCreated;e.prototype.onNodeCreated=async function(){var e,s,o;t&&(null==t||t.apply(this,arguments));const n=this.widgets.find((e=>["seed_num","seed"].includes(e.name))),i=this.widgets.find((e=>["control_before_generate","control_after_generate"].includes(e.name)));let a=this.widgets.find((e=>"model"==e.name));a.callback=e=>{l.value="-"+Gs[e]};const l=this.addWidget("text","cost_credit","0",(e=>{}),{serialize:!1});l.disabled=!0,setTimeout((e=>{"control_before_generate"==i.name&&0===n.value&&(n.value=Math.floor(4294967294*Math.random())),l.value="-"+Gs[a.value]}),100);let r=te("div.easyuse-account-user",[Ce("Loading UserInfo...")]);this.addDOMWidget("account","btn",te("div.easyuse-account",r)),ee.addEventListener("stable-diffusion-api-generate-succeed",(async({detail:e})=>{var t;let s=r.querySelectorAll(".remark");if(s&&s[0]){const t=(null==e?void 0:e.model)?Gs[e.model]:0;if(t){let e=function(e,t){let s,o,n,i,a,l;a="string"==typeof e?e:e.toString(),l="string"==typeof t?t:t.toString();try{s=a.split(".")[1].length}catch(r){s=0}try{o=l.split(".")[1].length}catch(r){o=0}return n=Math.pow(10,Math.max(s,o)),i=s>=o?s:o,((e*n-t*n)/n).toFixed(i)}(parseFloat(s[0].innerText.replace(/Credits: /g,"")),t);e>0&&(s[0].innerText="Credits: "+e.toString())}}await ke(1e4);const o=await ee.fetchApi("/easyuse/stability/balance");if(200==o.status){const e=await o.json();if(null==e?void 0:e.balance){const o=(null==(t=e.balance)?void 0:t.credits)||0;s&&s[0]&&(s[0].innerText="Credits: "+o)}}}));const d=await ee.fetchApi("/easyuse/stability/api_keys");if(200==d.status){let t=await d.json();if(Rs=t.keys,Ms=t.current,Rs.length>0&&void 0!==Ms){const t=Rs[Ms].key,n=Rs[Ms].name;if(t){const t=await ee.fetchApi("/easyuse/stability/user_info");if(200==t.status){const n=await t.json();if((null==n?void 0:n.account)&&(null==n?void 0:n.balance)){const t=(null==(e=n.account)?void 0:e.profile_picture)||null,i=(null==(s=n.account)?void 0:s.email)||null,a=(null==(o=n.balance)?void 0:o.credits)||0;r.replaceChildren(te("div.easyuse-account-user-info",{onclick:e=>{(new Ps).show(r)}},[te("div.user",[te("div.avatar",t?[te("img",{src:t})]:"😀"),te("div.info",[te("h5.name",i),te("h6.remark","Credits: "+a)])]),te("div.edit",{textContent:Ce("Edit")})]))}}}else r.replaceChildren(te("div.easyuse-account-user-info",{onclick:e=>{(new Ps).show(r)}},[te("div.user",[te("div.avatar","😀"),te("div.info",[te("h5.name",n),te("h6.remark",Ce("Click to set the APIKEY first"))])]),te("div.edit",{textContent:Ce("Edit")})]))}}}}}});let Bs=null;function Fs(){Bs&&(Bs.removeEventListeners(),Bs.dropdown.remove(),Bs=null)}function Us(e,t,s,o=!1){Fs(),new zs(e,t,s,o)}class zs{constructor(e,t,s,o=!1){this.dropdown=document.createElement("ul"),this.dropdown.setAttribute("role","listbox"),this.dropdown.classList.add("easy-dropdown"),this.selectedIndex=-1,this.inputEl=e,this.suggestions=t,this.onSelect=s,this.isDict=o,this.focusedDropdown=this.dropdown,this.buildDropdown(),this.onKeyDownBound=this.onKeyDown.bind(this),this.onWheelBound=this.onWheel.bind(this),this.onClickBound=this.onClick.bind(this),this.addEventListeners()}buildDropdown(){this.isDict?this.buildNestedDropdown(this.suggestions,this.dropdown):this.suggestions.forEach(((e,t)=>{this.addListItem(e,t,this.dropdown)}));const e=this.inputEl.getBoundingClientRect();this.dropdown.style.top=e.top+e.height-10+"px",this.dropdown.style.left=e.left+"px",document.body.appendChild(this.dropdown),Bs=this}buildNestedDropdown(e,t){let s=0;Object.keys(e).forEach((o=>{const n=e[o];if("object"==typeof n&&null!==n){const e=document.createElement("ul");e.setAttribute("role","listbox"),e.classList.add("easy-nested-dropdown");const i=document.createElement("li");i.classList.add("folder"),i.textContent=o,i.appendChild(e),i.addEventListener("mouseover",this.onMouseOver.bind(this,s,t)),t.appendChild(i),this.buildNestedDropdown(n,e),s+=1}else{const e=document.createElement("li");e.classList.add("item"),e.setAttribute("role","option"),e.textContent=o,e.addEventListener("mouseover",this.onMouseOver.bind(this,s,t)),e.addEventListener("mousedown",this.onMouseDown.bind(this,o)),t.appendChild(e),s+=1}}))}addListItem(e,t,s){const o=document.createElement("li");o.setAttribute("role","option"),o.textContent=e,o.addEventListener("mouseover",this.onMouseOver.bind(this,t)),o.addEventListener("mousedown",this.onMouseDown.bind(this,e)),s.appendChild(o)}addEventListeners(){document.addEventListener("keydown",this.onKeyDownBound),this.dropdown.addEventListener("wheel",this.onWheelBound),document.addEventListener("click",this.onClickBound)}removeEventListeners(){document.removeEventListener("keydown",this.onKeyDownBound),this.dropdown.removeEventListener("wheel",this.onWheelBound),document.removeEventListener("click",this.onClickBound)}onMouseOver(e,t){t&&(this.focusedDropdown=t),this.selectedIndex=e,this.updateSelection()}onMouseOut(){this.selectedIndex=-1,this.updateSelection()}onMouseDown(e,t){t.preventDefault(),this.onSelect(e),this.dropdown.remove(),this.removeEventListeners()}onKeyDown(e){const t=Array.from(this.focusedDropdown.children),s=t[this.selectedIndex];if(Bs)if(38===e.keyCode)e.preventDefault(),this.selectedIndex=Math.max(0,this.selectedIndex-1),this.updateSelection();else if(40===e.keyCode)e.preventDefault(),this.selectedIndex=Math.min(t.length-1,this.selectedIndex+1),this.updateSelection();else if(39===e.keyCode){if(e.preventDefault(),s&&s.classList.contains("folder")){const e=s.querySelector(".easy-nested-dropdown");e&&(this.focusedDropdown=e,this.selectedIndex=0,this.updateSelection())}}else if(37===e.keyCode&&this.focusedDropdown!==this.dropdown){const e=this.focusedDropdown.closest(".easy-dropdown, .easy-nested-dropdown").parentNode.closest(".easy-dropdown, .easy-nested-dropdown");e&&(this.focusedDropdown=e,this.selectedIndex=Array.from(e.children).indexOf(this.focusedDropdown.parentNode),this.updateSelection())}else if((13===e.keyCode||9===e.keyCode)&&this.selectedIndex>=0){e.preventDefault(),s.classList.contains("item")&&(this.onSelect(t[this.selectedIndex].textContent),this.dropdown.remove(),this.removeEventListeners());const o=s.querySelector(".easy-nested-dropdown");o&&(this.focusedDropdown=o,this.selectedIndex=0,this.updateSelection())}else 27===e.keyCode&&(this.dropdown.remove(),this.removeEventListeners())}onWheel(e){const t=parseInt(this.dropdown.style.top);localStorage.getItem("Comfy.Settings.Comfy.InvertMenuScrolling")?this.dropdown.style.top=t+(e.deltaY<0?10:-10)+"px":this.dropdown.style.top=t+(e.deltaY<0?-10:10)+"px"}onClick(e){this.dropdown.contains(e.target)||e.target===this.inputEl||(this.dropdown.remove(),this.removeEventListeners())}updateSelection(){Array.from(this.focusedDropdown.children).forEach(((e,t)=>{t===this.selectedIndex?e.classList.add("selected"):e.classList.remove("selected")}))}}function js(e){const t=e.min||0,s=e.max||0,o=e.step||1;if(0===o)return[];const n=[];let i=t;for(;i<=s;){if(Number.isInteger(o))n.push(Math.round(i)+"; ");else{let e=i.toFixed(3);-0==e&&(e="0.000"),/\.\d{3}$/.test(e)||(e+="0"),n.push(e+"; ")}i+=o}return s>=0&&t>=0?n:n.reverse()}let Hs={},Ws={};function Ys(e,t){String(e.id);const s=t.name,o=t.value.replace(/^(loader|preSampling):\s/,"");Ws[s]?Ws[s]!=Hs[o]&&(Ws[s]=Hs[o]):Ws={...Ws,[s]:Hs[o]}}$.registerExtension({name:"Comfy.EasyUse.XYPlot",async beforeRegisterNodeDef(e,t,s){if("easy XYPlot"===t.name){Hs=t.input.hidden.plot_dict[0];for(const e in Hs){const t=Hs[e];if(Array.isArray(t)){let s=[];for(const e of t)s.push(e+"; ");Hs[e]=s}else Hs[e]="object"==typeof t?"seed"==e?t+"; ":js(t):t+"; "}Hs.None=[],Hs["---------------------"]=[]}},nodeCreated(e){"easy XYPlot"===e.comfyClass&&(function(e){if(e.widgets)for(const t of e.widgets)if("x_axis"===t.name||"y_axis"===t.name){let s=t.value;Object.defineProperty(t,"value",{get:()=>s,set(o){o!==s&&(s=o,Ys(e,t))}})}}(e),function(e){if(e.widgets){const t=e.widgets.filter((e=>"customtext"===e.type&&!1!==e.dynamicPrompts||e.dynamicPrompts));for(const e of t){let t=function(e,t,o,n){return e&&(t[o]=e),t.map((e=>s(e,n))).filter((e=>""!==e)).join("")},s=function(e,t){if(e=o(e),n(e,t))return e+"; ";let s=i(e,t);return 1===s.length||2===s.length?s[0]:n(a(e),t)?a(e)+"; ":""},o=function(e){return e.replace(/(\n|;| )/g,"")},n=function(e,t){return t.includes(e+"; ")},i=function(e,t){return t.filter((t=>t.toLowerCase().includes(e.toLowerCase())))},a=function(e){return Number(e)?Number(e).toFixed(3):["0","0.","0.0","0.00","00"].includes(e)?"0.000":e};const l=function(){const s=e.name[0]+"_axis";let o=(null==Ws?void 0:Ws[s])||[];if(0===o.length)return;const n=e.inputEl.value,i=e.inputEl.selectionStart;let a=n.split("; ");const l=n.substring(0,i).split("; ").length-1,r=a[l].replace(/\n/g,"").toLowerCase(),d=o.filter((e=>e.toLowerCase().includes(r))).map((e=>e.replace(/; /g,"")));if(d.length>0)Us(e.inputEl,d,(s=>{const n=t(s,a,l,o);e.inputEl.value=n}));else{Fs();const s=t(null,a,l,o);e.inputEl.value=s}};e.inputEl.removeEventListener("input",l),e.inputEl.addEventListener("input",l),e.inputEl.removeEventListener("mouseup",l),e.inputEl.addEventListener("mouseup",l)}}}(e))}});const Vs=v("graphStore",{state:e=>({selectors:[],selectors_styles:{},seg_selectors:[],slider_controls:[]}),actions:{setSelectors(e){this.selectors=_(e)},setStyles(e,t){this.selectors_styles[e]||(this.selectors_styles[e]=t)},setSegSelectors(e){this.seg_selectors=_(e)},setSliderControls(e){this.slider_controls=_(e)}}}),Zs=["data-id"],Xs=[O("i",{class:"mdi mdi-trash-can"},null,-1)],Qs=O("i",{class:"mdi mdi-magnify"},null,-1),Ks=["placeholder"],Js=["onMouseenter","onMouseleave"],qs=["onClick"],$s=["name","checked"],eo=["src"],to={key:0},so=O("span",{class:"comfyui-easyuse-success"},"positive:",-1),oo={key:1},no=O("span",{class:"comfyui-easyuse-error"},"negative:",-1),io="comfyui-easyuse-selector",ao={__name:"stylesSelector",props:{id:{type:String|Number,default:""},type:{type:String,default:""},selectedStyles:{type:Array,default:[]},show:{type:Boolean,default:!1}},emits:["chooseStyle"],setup(e,{emit:t}){const s=e,o=Vs(),{selectors_styles:n}=b(o),i=k([]);x((e=>s.type),(async e=>{i.value=[],e&&await(async e=>{if(n.value[s.type])return!0;const t=await ee.fetchApi(`/easyuse/prompt/styles?name=${e}`);if(200===t.status){let e=(await t.json()).map(((e,t)=>(e.index=t,e)));return await o.setStyles(s.type,e),!0}return xe.error(Ce("Get styles list Failed")),!1})(e)&&l()}),{immediate:!0});const a=t,l=e=>{const t=s.selectedStyles,o=_(n.value[s.type]);i.value=o.sort(((e,t)=>e.index-t.index)).sort(((e,s)=>t.includes(s.name)-t.includes(e.name)))},r=k(""),d=e=>e.toLowerCase(),u=I({}),c=e=>{u.src="",u.name="",u.positive="",u.negative=""},p=async e=>{const t=await ee.fetchApi(`/easyuse/prompt/styles/image?name=${e}&styles_name=${s.type}`);if(200===t.status){const o=await t.text();if(o.startsWith("http"))return o;return`/easyuse/prompt/styles/image?name=${e}&styles_name=${s.type}`}},h=e=>{e.target.src="data:image/jpeg;base64,/9j/4QAYRXhpZgAASUkqAAgAAAAAAAAAAAAAAP/sABFEdWNreQABAAQAAAA8AAD/4QNLaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLwA8P3hwYWNrZXQgYmVnaW49Iu+7vyIgaWQ9Ilc1TTBNcENlaGlIenJlU3pOVGN6a2M5ZCI/PiA8eDp4bXBtZXRhIHhtbG5zOng9ImFkb2JlOm5zOm1ldGEvIiB4OnhtcHRrPSJBZG9iZSBYTVAgQ29yZSA5LjEtYzAwMSA3OS4xNDYyODk5Nzc3LCAyMDIzLzA2LzI1LTIzOjU3OjE0ICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOnhtcE1NPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvbW0vIiB4bWxuczpzdFJlZj0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL3NUeXBlL1Jlc291cmNlUmVmIyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgMjUuMSAoMjAyMzA5MDUubS4yMzE2IDk3OWM4NmQpICAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6RjA3NEU1QzNCNUJBMTFFRUExMUVDNkZDRjI0NzlBN0QiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6RjA3NEU1QzRCNUJBMTFFRUExMUVDNkZDRjI0NzlBN0QiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDpGMDc0RTVDMUI1QkExMUVFQTExRUM2RkNGMjQ3OUE3RCIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDpGMDc0RTVDMkI1QkExMUVFQTExRUM2RkNGMjQ3OUE3RCIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/Pv/uAA5BZG9iZQBkwAAAAAH/2wCEAAYEBAQFBAYFBQYJBgUGCQsIBgYICwwKCgsKCgwQDAwMDAwMEAwODxAPDgwTExQUExMcGxsbHB8fHx8fHx8fHx8BBwcHDQwNGBAQGBoVERUaHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fH//AABEIAIAAgAMBEQACEQEDEQH/xACLAAEAAgMBAQEAAAAAAAAAAAAABAUCAwYBBwgBAQADAQEBAAAAAAAAAAAAAAABAgMEBQYQAAEEAgECAwUHAwUAAAAAAAEAAgMEEQUhEgYxEwdBYSIyFFFxgVJyIxWRoTOxwdFiJBEBAAICAQQBBAIDAAAAAAAAAAECEQMxIUESBBOB0SIyUXGCIwX/2gAMAwEAAhEDEQA/AP1SgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICDXJYgj+d4afsVopM8KWvEcy8it1pXdMcjXO/Lnn+im2u0cwV2VniW1UXEBAQEBAQEBAQEBAQRNlc+mgyDh7zhv+5WunX5Sw37fCHM2dh48r06ank7N6rn2Ja7qa4hw5BBwQV010uK+/DsO29v/J68SOI86Jxjl95HIP4gryPc0fHfHaXu+j7Py68zzHSVquV2iAgICAgICAgICDyTr6HdHz4PTnwypjnqic46OauNbY6mGX99p+L8w9xaeV6OufHt0eXtr59M9VFb194E9LmuH3kf6rv17avO2ets7YVcuuuk/uOa3PgBlxP4BdMbq9nLPqbJ5xDbSM9azFXpyujuSO+Bo5kcf0NPyj25We2YtEzaPxdfr6519Kz+UvqEIlELBKQZQ0eYRwC7HOPxXzVsZ6cPpK5x15ZKEiAgICAgICAgICCNc1tG40CzA2XHg4j4h9zhyFpr22p+s4Z7NNL/ALRlTX+1dVFBJOJrcTI2lxZHYcBx+sldWv3bzOMVn6fZy39OkRnNo+v3aoOx9JOxks8tqwHDPS+1IW8+IzGWZVrf9DZHSMR/j9yvo656zMz9V1rdLqdYwsoVIqwd87mNAc79Tvmd+JXJt332ftMy6temlP1jCasmggICAgICAgICAgwlmiib1SPDB7zhWrWZ4VtaI5QXb2l5ojYHvLjjIGB/dbR61sZlhPtVziFb3PYdd0luCvAZbXludVZ1huZQPgyTx4/atvWj4rxaZ6d/6Ye1/t1zSI6zx/bzti5YqaOpBeg8u41n/oa14cA4ccH7lPs1jZebVn8eyPUtOrXFbR+XdYx9xa90pjeXROaSCXDj+oysZ9S+Mx1bR7uvOJ6LGOWKVgfG8PafAtOQueazHLqraJjMMlCRAQEBAQEBAQRLNp4HTFx/2/4WtKR3Y32T2Udl8j3knk/aeSu6kREPPvaZlpY3DmyY8DyrzPZWv8tkvmFv7bg12RyR1DGeeMj2KnjE9JaeUx1hi1sgaet/U7JIOMcE8Dj7FMREcK2zPKMasr5XO6fmOVt5xEOadVplYU45IAOhxa72kLm2TFuXXqrNeF1WtlwDZeHfmHguO+vHDupszylLJsICAgICAg8cMjCQiYR5IVpFmc1Q5qLXHPgfbhbV2MLaYlqNQAYA4V/kV+PDA1fcp81fjYurtYMu4CmLZRNYhtZWBAI8CqzdaKN8df3LObtIokxwe5ZzZrFUloIGFnLWHqhIgICAgICAgxMbSpyjDAwAq3kr4MTWCnzR4MX02PGHDISNmETqieWba7QABwB4KJumKNgjaFXK0VZYChYQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEHzvuv1G7k1W9s6/Xamtaq15oaonmnsCR008HntaI4K8/s4HOeEGXZXqTud7uqtG7r6kNa5HdMU9aaw9zZde+FkrHsnr1+M2MZBPIKDRe9cO2K2mjs/V0m7X61lWzq32W+ZFEbfkSSO4B+GL9zw4QWm99TqFVmjsaSu7fUtxeNM2aTmSMBbHI9zWHqHVJlnDTxjPKCJL6sea502t1D7Ouhr0rNqxNM2CSNuwnkgjAi6ZOotdEc/Egibf1j/j+7JNL9DWdWg84TWn2ywtdFKyMZb5Tg0nLyG55x48IJ3bXqe/ea/a26dFtyTXtldDUqyOdNL5VqaDHS5gwXRxMe3xz1Y9iDKP1Sa7uefUnR7TyYqUVoEU5jY6pJZIz1RY4ZiMYd7TkexBA749Wr2gtCKlrIpGs17NjK29LLWmPmMsyiFkbIZsPEdKQu6y0eAQWdD1E2L93W1tzRyCDY3paev2NaxVlhIjidMfMb5vmse1kbi9pZ7MeKDt0BAQEBAQfEPU+lFY2++q2K1uSSezTnrReVsTTmiZVYHOd9LVuQyubIwANkbxz4FA7FsQ0NrrLNXX7N0eo1+3darGDYPjb5j6prxVRajjDetsRAjj4yM4CDre2uxO7q2hqtm7nua6w9rp5tfXgoSxwyTOMr42PlrPe4Nc8jJJQRDb3Oz1fYFrcV7As0mu3u7nbWkBZ9LSfG5nlxs/yySWRiNozwcBBx9EXadGTXz62+LG41+jZS6adhzS6vfnlkEjgzEZax7T8ePFBu3nbPdUXqJZsw6S5cqbCW1YdIY2lxhhfEGMjfHtoG9HxucwPEZy4/A7kMC87aq2Kmv7mdvxuqGmklFjUU4G2Yp21rdyW00t+kJkFl88pY9vDgwNDvEoK9np73FBcHdkrt2+rZd5FjQx7O0b8WvbzDKZhN1SSse573QdeAHkN+Ichj3p2rBvZq9vUnY2tcNQPqpZYZpJ44GxXqzHdVlzZZpib73mLHViI85c1BZ6OpsIe/6/XSuntevdsz6+8+pI0/yM1dtWVr2Z644P8rmyuj6S53jxkh9aQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBB/9k="};return(t,o)=>(N(),T("div",{class:R(io+` ${io}-styles`),"data-id":e.id,onMouseleave:c},[i.value.length>0&&e.show?(N(),T(D,{key:0},[O("div",{class:R(io+"__header")},[O("div",{class:R(io+"__header_button"),onClick:o[0]||(o[0]=e=>(a("chooseStyle",[]),void(r.value="")))},Xs,2),O("div",{class:R(io+"__header_search")},[Qs,M(O("textarea",{class:"search","onUpdate:modelValue":o[1]||(o[1]=e=>r.value=e),dir:"ltr",rows:1,placeholder:P(Ce)("Type here to search styles ...")},null,8,Ks),[[G,r.value]])],2)],2),O("div",{class:R(io+"__content"),onMouseleave:l},[(N(!0),T(D,null,B(i.value,((t,o)=>(N(),T("div",{class:R(io+"-item"),key:o,onMouseenter:e=>(async e=>{if(!e.imageSrc){if(e.imageLoading)return;e.imageLoading=!0;const t=await p(e.imgName).finally((()=>e.imageLoading=!1));e.imageSrc=t}u.name="zh-CN"==Ee&&e.name_cn?e.name_cn:e.name,u.positive=e.prompt,u.negative=e.negative_prompt,u.src=e.imageSrc})(t),onMouseleave:F((e=>c()),["stop"])},[O("span",{class:R([io+"-item__tag",{hide:!(e.selectedStyles.includes(t.name)||-1!=d(t.name).indexOf(d(r.value))||t.name_cn&&-1!=d(t.name_cn).indexOf(d(r.value)))}]),onClick:e=>(e=>{let t=s.selectedStyles;t.includes(e.name)?t=t.filter((t=>t!==e.name)):t.push(e.name),a("chooseStyle",t)})(t)},[O("input",{type:"checkbox",name:t.name,checked:e.selectedStyles.includes(t.name)},null,8,$s),O("span",null,U("zh-CN"==P(Ee)&&t.name_cn?t.name_cn:t.name),1)],10,qs)],42,Js)))),128))],34),(null==u?void 0:u.src)?(N(),T("div",{key:0,class:R(io+"-preview")},[O("img",{src:u.src,ref:"image",alt:"preview",onError:h},null,40,eo),O("div",{class:R(io+"-preview__text")},[O("b",null,U(u.name),1),O("div",{class:R(io+"-preview__prompt")},[u.positive?(N(),T("h6",to,[so,O("span",null,U(u.positive),1)])):z("",!0),u.negative?(N(),T("h6",oo,[no,O("span",null,U(u.negative),1)])):z("",!0)],2)],2)],2)):z("",!0)],64)):z("",!0)],42,Zs))}},lo=["data-id"],ro=["onClick"],uo=["name","checked"],co="comfyui-easyuse-selector",po={__name:"segSelector",props:{id:{type:String|Number,default:""},type:{type:String,default:""},selected:{type:Array,default:[]},show:{type:Boolean,default:!1}},emits:["select"],setup(e,{emit:t}){const s=e,o=k([]);x((e=>s.type),(async e=>{switch(e){case"selfie_multiclass_256x256":o.value=["Background","Hair","Body","Face","Clothes","Others"];break;case"human_parsing_lip":o.value=["Background","Hat","Hair","Glove","Sunglasses","Upper-clothes","Dress","Coat","Socks","Pants","Jumpsuits","Scarf","Skirt","Face","Left-arm","Right-arm","Left-leg","Right-leg","Left-shoe","Right-shoe"]}}),{immediate:!0});const n=t;return(t,i)=>{var a;return N(),T("div",{class:R(co+` ${co}-seg`),"data-id":e.id},[(null==(a=o.value)?void 0:a.length)>0&&e.show?(N(!0),T(D,{key:0},B(o.value,((t,o)=>(N(),T("div",{class:R(co+"-item"),key:o},[O("span",{class:R(co+"-item__tag"),onClick:e=>(e=>{let t=_(s.selected);t.includes(e)?t=t.filter((t=>t!==e)):t.push(e),n("select",t)})(o)},[O("input",{type:"checkbox",name:t,checked:e.selected.includes(o)},null,8,uo),O("span",null,U(P(Ce)(t)),1)],10,ro)],2)))),128)):z("",!0)],10,lo)}}},ho=["data-id"],mo=["onMousedown","onDblclick"],go="comfyui-easyuse-slider",fo="ipadapter layer weights",yo={__name:"sliderControl",props:{id:{type:String|Number,default:""},mode:{type:String,default:""},type:{type:String,default:""},values:{type:Array,default:[]},show:{type:Boolean,default:!1}},emits:["changeValues","showSlider"],setup(e,{emit:t}){const s=e,o=t,n=(e,t,s)=>(e-t)/(s-t)*100,i=(e,t,o=void 0)=>{if(s.mode===fo){let s={3:2.5,6:1}[t]||0;return{default:12==e?s:0,min:-1,max:3,step:.05,value:void 0!==o?o:12==e?s:0,top:void 0!==o?100-n(o,-1,3)+"%":null,height:void 0!==o?n(o,-1,3)+"%":null}}};x((e=>s.mode),(async(e,t)=>{var n;if(e!==t&&e===fo)if(!t&&(null==(n=s.values)?void 0:n.length)>0){const e=s.values.map((e=>{const t=e.split(":");return i(s.values.length,t[0],parseFloat(t[1]))}));await o("changeValues",e)}else{let e="sd1"==s.type?16:12,t=Array.from({length:e},((t,s)=>i(e,s)));await o("changeValues",t)}o("showSlider")}),{immediate:!0}),x((e=>s.type),((e,t)=>{if(e!=t&&s.mode==fo){let e="sd1"==s.type?16:12,t=Array.from({length:e},((t,s)=>i(e,s)));o("changeValues",t)}}));const a=k(null),l=k(null);return j((()=>{document.onmouseup=e=>document.onmousemove=null})),(t,i)=>{var r;return N(),T("div",{class:R(go),"data-id":e.id},[(null==(r=e.values)?void 0:r.length)>0&&e.show?(N(!0),T(D,{key:0},B(e.values,((t,i)=>(N(),T("div",{class:R([go+"-item",{positive:3==i&&"sdxl"==e.type&&e.mode==fo},{negative:6==i&&"sdxl"==e.type&&e.mode==fo}]),key:i},[O("div",{class:R(go+"-item-input")},U(t.value),3),O("div",{class:R(go+"-item-scroll"),ref_for:!0,ref_key:"scroll",ref:a},[O("div",{class:R(go+"-item-bar"),ref_for:!0,ref_key:"bar",ref:l,style:H({top:t.top||100-n(t.default,t.min,t.max)+"%"}),onMousedown:e=>((e,t,n)=>{let i=e||window.event,r=a.value[n],d=l.value[n],u=_(s.values),c=i.clientY-d.offsetTop;document.onmousemove=e=>{let s=(e||window.event).clientY-c;s<0?s=0:s>r.offsetHeight-d.offsetHeight&&(s=r.offsetHeight-d.offsetHeight);let i=(t.max-t.min)/t.step,a=(r.offsetHeight-d.offsetHeight)/i;s=Math.round(s/a)*a;const l=Math.floor(s/(r.offsetHeight-d.offsetHeight)*100)+"%",p=Math.floor((r.offsetHeight-d.offsetHeight-s)/(r.offsetHeight-d.offsetHeight)*100)+"%",h=parseFloat(parseFloat(t.max-(t.max-t.min)*(s/(r.offsetHeight-d.offsetHeight))).toFixed(2));u[n]={...u[n],top:l,height:p,value:h},o("changeValues",u),window.getSelection?window.getSelection().removeAllRanges():document.selection.empty()}})(e,t,i),onDblclick:e=>((e,t,n)=>{let i=_(s.values);i[n]={...i[n],top:null,height:null,value:t.default},o("changeValues",i)})(0,t,i)},null,46,mo),O("div",{class:R(go+"-item-area"),style:H({height:t.height||n(t.default,t.min,t.max)+"%"})},null,6)],2),O("div",{class:R(go+"-item-label")},[O("span",null,U(t.label),1)],2)],2)))),128)):z("",!0)],8,ho)}}},vo={__name:"index",setup(e){const t=Vs(),{selectors:s,seg_selectors:o,slider_controls:n}=b(t),i=k({}),a=async e=>{var o,n,a,l,r,d;await ke(1);const u=Qe(e,"styles"),c=(null==(o=e.properties.values)?void 0:o.length)>0?e.properties.values:[];let p=_(s.value);p.push({id:e.id,type:u.value,value:c,show:!1});const h=p.length-1;await t.setSelectors(p);let m=null==(l=null==(a=null==(n=i.value[e.id])?void 0:n._)?void 0:a.vnode)?void 0:l.el;if(!m)return;let g=e.addDOMWidget("select_styles","btn",m);e.properties.values||e.setProperty("values",[]),p[h].show=!0,await t.setSelectors(p);let f=u.value;Object.defineProperty(u,"value",{set:s=>{f=s,p[h].type=s,e.properties.values=[],p[h].value=[],t.setSelectors(p)},get:e=>f}),Object.defineProperty(g,"value",{set:e=>{setTimeout((s=>{p[h].value=e.split(","),t.setSelectors(p)}),150)},get:t=>{var o,n;return e.properties.values=(null==(n=null==(o=s.value)?void 0:o[h])?void 0:n.value)||[],e.properties.values.join(",")}}),((null==(r=e.size)?void 0:r[0])<150||(null==(d=e.size)?void 0:d[1])<150)&&e.setSize([425,500]);const y=e.onRemoved;e.onRemoved=function(){if(y&&(null==y||y.apply(this,arguments)),void 0!==s.value.findIndex((t=>t.id==e.id))){let e=_(s.value);e.splice(h,1),t.setSelectors(e)}return y}},l=k({}),r=async e=>{var s,n,i,a;await ke(1);const r=Qe(e,"method"),d=(null==(s=e.properties.values)?void 0:s.length)>0?e.properties.values:[];let u=_(o.value);u.push({id:e.id,type:r.value,value:d,show:!1});const c=u.length-1;await t.setSegSelectors(u);let p=null==(a=null==(i=null==(n=l.value[e.id])?void 0:n._)?void 0:i.vnode)?void 0:a.el;if(!p)return;let h=e.addDOMWidget("mask_components","btn",p);e.properties.values||e.setProperty("values",[]),u[c].show=!0,await t.setSegSelectors(u);let m=r.value;Object.defineProperty(r,"value",{set:s=>{m=s,u[c].type=s,e.properties.values=[],u[c].value=[],Ke(e,Qe(e,"confidence"),"selfie_multiclass_256x256"===m),e.setSize([300,"selfie_multiclass_256x256"===m?260:500]),t.setSegSelectors(u)},get:e=>m}),Object.defineProperty(h,"value",{set:e=>{setTimeout((s=>{u[c].value=e.split(","),t.setSegSelectors(u)}),150)},get:t=>{var s;return e.properties.values=(null==(s=o.value)?void 0:s[c].value)||[],e.properties.values.join(",")}}),Ke(e,Qe(e,"confidence"),"selfie_multiclass_256x256"===m),e.setSize([300,"selfie_multiclass_256x256"===m?260:500]);const g=e.onRemoved;e.onRemoved=function(){if(g&&(null==g||g.apply(this,arguments)),void 0!==o.value.findIndex((t=>t.id==e.id))){let e=_(o.value);e.splice(c,1),t.setSegSelectors(e)}return g}},d=k({}),u=async e=>{var s,o,i,a;await ke(1);const l=Qe(e,"mode"),r=Qe(e,"model_type"),u=(null==(s=e.properties.values)?void 0:s.length)>0?e.properties.values:[];let c=_(n.value);c.push({id:e.id,type:r.value,mode:l.value,value:u,show:!1});const p=c.length-1;await t.setSliderControls(c);let h=null==(a=null==(i=null==(o=d.value[e.id])?void 0:o._)?void 0:i.vnode)?void 0:a.el;if(!h)return;let m=e.addDOMWidget("values","btn",h);e.properties.values||e.setProperty("values",[]),Object.defineProperty(m,"value",{set:function(){},get:t=>{var s;const o=(null==(s=n.value)?void 0:s[p].value)||[];return e.properties.values=o.map(((e,t)=>`${t}:${e.value}`)),e.properties.values.join(",")}}),e.setSize("sdxl"==r.value?[375,320]:[455,320]),r.callback=s=>{c=_(n.value),c[p].type!=s&&(e.setSize("sdxl"==s?[375,320]:[455,320]),c[p].value=[],c[p].type=s,t.setSliderControls(c))};const g=e.onRemoved;e.onRemoved=function(){if(g&&(null==g||g.apply(this,arguments)),void 0!==n.value.findIndex((t=>t.id==e.id))){let e=_(n.value);e.splice(p,1),t.setSliderControls(e)}return g}};return j((e=>{$.registerExtension({name:"Comfy.EasyUse.Components",async beforeRegisterNodeDef(e,t){const s=e.prototype.onNodeCreated;"easy stylesSelector"==t.name&&(e.prototype.onNodeCreated=async function(){return s&&(null==s||s.apply(this,arguments)),await a(this),s}),"easy humanSegmentation"==t.name&&(e.prototype.onNodeCreated=async function(){return s&&(null==s||s.apply(this,arguments)),await r(this),s}),"easy sliderControl"==t.name&&(e.prototype.onNodeCreated=async function(){return s&&(null==s||s.apply(this,arguments)),await u(this),s}),"easy poseEditor"==t.name&&(e.prototype.onNodeCreated=async function(){s&&(null==s||s.apply(this,arguments));const e=document.createElement("div");return e.className="comfyui-easyuse-poseEditor",e.innerHTML='<div>This node is about to be removed, you can use <a href="https://github.com/AlekPet/ComfyUI_Custom_Nodes_AlekPet" target="_blank">ComfyUI_Custom_Nodes_AlekPet</a> to replace it.</div>',this.addDOMWidget("editor","btn",e),s})}})})),(e,a)=>(N(),T(D,null,[(N(!0),T(D,null,B(P(s),((e,o)=>(N(),W(ao,{ref_for:!0,ref:t=>{t&&(i.value[e.id]=t)},type:e.type,key:o,id:e.id,show:e.show,selectedStyles:e.value,onChooseStyle:e=>((e,o)=>{let n=_(s.value);n[o].value=e,t.setSelectors(n)})(e,o)},null,8,["type","id","show","selectedStyles","onChooseStyle"])))),128)),(N(!0),T(D,null,B(P(o),((e,s)=>(N(),W(po,{ref_for:!0,ref:t=>{t&&(l.value[e.id]=t)},type:e.type,key:s,id:e.id,show:e.show,selected:e.value,onSelect:e=>((e,s)=>{let n=_(o.value);n[s].value=e,t.setSegSelectors(n)})(e,s)},null,8,["type","id","show","selected","onSelect"])))),128)),(N(!0),T(D,null,B(P(n),((e,s)=>(N(),W(yo,{ref_for:!0,ref:t=>{t&&(d.value[e.id]=t)},type:e.type,key:s,id:e.id,show:e.show,mode:e.mode,values:e.value,onChangeValues:e=>((e,s)=>{let o=_(n.value);o[s].value=e,t.setSliderControls(o)})(e,s),onShowSlider:e=>(e=>{let s=_(n.value);s[e].show=!0,t.setSliderControls(s)})(s)},null,8,["type","id","show","mode","values","onChangeValues","onShowSlider"])))),128))],64))}},_o={class:"no-result-placeholder"},wo={class:"no-result-placeholder-content"},bo={key:0},Ao={__name:"noResultsPlaceholder",props:{icon:{type:String,default:"",required:!1},iconSize:{type:String,default:"3rem",required:!1},title:{type:String,required:!0},message:{type:String,required:!1},buttonLabel:{type:String,default:"",required:!1}},emits:["action"],setup:e=>(t,s)=>(N(),T("div",_o,[Y(P(S),null,{content:V((()=>[O("div",wo,[O("i",{class:R(e.icon),style:H({"font-size":e.iconSize,"margin-bottom":".5rem"})},null,6),O("h3",null,U(e.title),1),e.message?(N(),T("p",bo,U(e.message),1)):z("",!0),e.buttonLabel?(N(),W(P(A),{key:1,label:e.buttonLabel,onClick:s[0]||(s[0]=e=>t.$emit("action")),class:"p-button-text"},null,8,["label"])):z("",!0)])])),_:1})]))},So={class:"left flex-1"},Eo={key:1,class:"edit"},Co={key:2,class:"label"},Lo={class:"right toolbar"},ko={key:0,class:"nodes"},xo={__name:"group",props:{item:{type:Object,default:{}}},emits:["mousedown","mouseup","changeMode"],setup(e){const t=e,s=Ne(),o=k(!1),n=k(null),i=k(""),a=e=>{var o,n;let i=t.item;if(!(null==(o=i.info)?void 0:o.is_edit)&&(null==(n=i.children)?void 0:n.length)>0){let e=$.canvas.graph._groups.find((e=>e.pos[0]==i.info.pos[0]&&e.pos[1]==i.info.pos[1]));e&&(e.show_nodes=!e.show_nodes,s.setGroups($.canvas.graph._groups))}},l=async()=>{let e=t.item,n=$.canvas.graph._groups.find((t=>t.pos[0]==e.info.pos[0]&&t.pos[1]==e.info.pos[1]));n?(n.is_edit=!1,n.title=i.value,await s.setGroups($.canvas.graph._groups),o.value=!1):o.value=!1};return(r,d)=>{var u,c,p;return N(),T(D,null,[O("div",{class:R("comfyui-easyuse-map-nodes-group"),onClick:a},[O("div",So,[e.item.children?(N(),T("i",{key:0,class:R(["icon",e.item.info.show_nodes?"pi pi-folder-open":"pi pi-folder"]),style:H({color:e.item.info.color})},null,6)):z("",!0),(null==(u=e.item.info)?void 0:u.is_edit)?(N(),T("div",Eo,[Y(P(E),{ref_key:"modifyRef",ref:n,modelValue:i.value,"onUpdate:modelValue":d[0]||(d[0]=e=>i.value=e),variant:"outline",size:"small",type:"text",onBlur:l,onKeydown:[Z(l,["enter"]),Z(l,["esc"])],style:{width:"100%"}},null,8,["modelValue"])])):(N(),T("div",Co,[O("span",{onDblclick:d[1]||(d[1]=F((a=>(async()=>{var e,a;if(o.value)return;let l=t.item,r=$.canvas.graph._groups.find((e=>e.pos[0]==l.info.pos[0]&&e.pos[1]==l.info.pos[1]));r&&(r.is_edit=!r.is_edit,i.value=r.is_edit?l.info.title:"",await s.setGroups($.canvas.graph._groups),o.value=!0,null==(a=null==(e=n.value)?void 0:e[0])||a.$el.focus())})(e.item)),["stop"]))},U(e.item.info.title),33)]))]),O("div",Lo,[(null==(c=e.item.children)?void 0:c.length)>0?(N(),W(P(A),{key:0,size:"small",icon:e.item.children.find((e=>e.mode==P(fe).ALWAYS))?"pi pi-eye":"pi pi-eye-slash",text:"",rounded:"",severity:"secondary",onClick:d[2]||(d[2]=F((e=>r.$emit("changeMode")),["stop"])),onMousedown:d[3]||(d[3]=F((e=>r.$emit("mousedown")),["stop"])),onMouseup:d[4]||(d[4]=F((e=>r.$emit("mouseup")),["stop"]))},null,8,["icon"])):z("",!0)])]),(null==(p=e.item.children)?void 0:p.length)>0&&e.item.info.show_nodes?(N(),T("div",ko,[X(r.$slots,"default")])):z("",!0)],64)}}},Io={key:1,class:"label error"},No={class:"right toolbar"},To={__name:"node",props:{node:{type:Object,default:{}}},emits:["mousedown","mouseup","changeMode"],setup:e=>(t,s)=>(N(),T("div",{draggable:!1,class:R(["comfyui-easyuse-map-nodes-node",{never:void 0!==e.node.mode&&e.node.mode==P(fe).NEVER},{bypass:void 0!==e.node.mode&&e.node.mode==P(fe).BYPASS}])},[void 0!==e.node.title?(N(),T("span",{key:0,class:"label",onDblclick:s[0]||(s[0]=F((t=>P(ot)(e.node.id)),["stop"]))},U(e.node.title),33)):(N(),T("span",Io,U(e.node.type),1)),O("div",No,[Y(P(A),{size:"small",icon:e.node.mode==P(fe).ALWAYS?"pi pi-eye":"pi pi-eye-slash",text:"",rounded:"",severity:"secondary",onClick:s[1]||(s[1]=F((e=>t.$emit("changeMode")),["stop"])),onMousedown:s[2]||(s[2]=F((e=>t.$emit("mousedown")),["stop"])),onMouseup:s[3]||(s[3]=F((e=>t.$emit("mouseup")),["stop"]))},null,8,["icon"])])],2))},Do={class:"title"},Oo={class:"toolbar"},Ro={key:0},Mo=["onDragstart","onDragend","onDragover"],Go={key:1,class:"no_result",style:{height:"100%"}},Po="comfyui-easyuse-map-nodes",Bo={__name:"nodesMap",emits:["handleHeader"],setup(e){const t=Ne(),{groups_nodes:s,groups:o}=b(t),n=k(!1),i=e=>{n.value=!n.value,$.canvas.graph._groups.forEach((e=>{e.show_nodes=n.value})),t.setGroups($.canvas.graph._groups)};let a,l=0,r=0,d=!1;const u=(e,s=!1)=>{if(d)return void(d=!1);const o=e.children.find((e=>e.mode==fe.ALWAYS)),n=e.children.map((e=>e.id));$.canvas.graph._nodes.forEach((e=>{n.includes(e.id)&&(e.mode=o?s?fe.NEVER:fe.BYPASS:fe.ALWAYS,e.graph.change())})),t.setNodes($.canvas.graph._nodes)},c=(e,s=!1)=>{if(d)return void(d=!1);const o=e.mode==fe.ALWAYS,n=$.canvas.graph._nodes.find((t=>t.id==e.id));n&&(n.mode=o?s?fe.NEVER:fe.BYPASS:fe.ALWAYS,n.graph.change(),t.setNodes($.canvas.graph._nodes))},p=(e,t="group")=>{l=(new Date).getTime(),clearTimeout(a),a=setTimeout((s=>{"group"==t?u(e,!0):c(e,!0)}),500)},h=e=>{r=(new Date).getTime(),r-l>500&&(d=!0),clearTimeout(a)};let m=k(null),g=k(null);k(!1);return(e,a)=>{var l,r;return N(),T("div",{class:R(Po)},[O("div",{class:R(Po+"__header"),onMousedown:a[0]||(a[0]=t=>e.$emit("handleHeader",t))},[O("div",Do,U(P(Ce)("Nodes Map",!0)),1),O("div",Oo,[(null==(l=P(o))?void 0:l.length)>0?M((N(),W(P(A),{key:0,icon:n.value?"pi pi-angle-double-down":"pi pi-angle-double-up",text:"",rounded:"",severity:"secondary",onClick:F(i,["stop"]),size:"small"},null,8,["icon"])),[[P(C),n.value?P(Ce)("Collapse All"):P(Ce)("Expand All"),void 0,{top:!0}]]):z("",!0),X(e.$slots,"icon")])],34),O("div",{class:R(Po+"__content")},[(null==(r=P(s))?void 0:r.length)>0?(N(),T("ol",Ro,[(N(!0),T(D,null,B(P(s),((e,s)=>(N(),T("li",{key:s,onDragstart:e=>((e,t)=>{m.value=t,e.currentTarget.style.opacity="0.6",e.currentTarget.style.border="1px dashed yellow",e.dataTransfer.effectAllowed="move"})(e,s),onDragend:e=>(e=>{if(e.target.style.opacity="1",e.currentTarget.style.border="1px dashed transparent","Manual drag&drop sorting"!==le("EasyUse.NodesMap.Sorting"))return void xe.warn(Ce("For drag and drop sorting, please find Nodes map sorting mode in Settings->EasyUse and change it to manual"));let s=$.canvas.graph._groups,o=s[m.value],n=s[g.value];$.canvas.graph._groups[m.value]=n,$.canvas.graph._groups[g.value]=o,t.setGroups($.canvas.graph._groups)})(e),onDragover:e=>((e,t)=>{e.preventDefault(),e.currentIndex!=m.value&&(g.value=t)})(e,s),draggable:!0},[void 0!==e.children?(N(),W(xo,{key:0,item:e,onChangeMode:t=>u(e),onMousedown:t=>p(e,"group"),onMouseup:h},{default:V((()=>[(N(!0),T(D,null,B(e.children,((e,t)=>(N(),W(To,{key:t,node:e,onChangeMode:t=>c(e),onMousedown:t=>p(e,"node"),onMouseup:h},null,8,["node","onChangeMode","onMousedown"])))),128))])),_:2},1032,["item","onChangeMode","onMousedown"])):(N(),W(To,{key:1,node:e.info,onChangeMode:t=>c(e.info),onMousedown:t=>p(e.info,"node"),onMouseup:h},null,8,["node","onChangeMode","onMousedown"]))],40,Mo)))),128))])):(N(),T("div",Go,[Y(Ao,{icon:"pi pi-sitemap",title:P(Ce)("No Nodes",!0),message:P(Ce)("No nodes found in the map",!0)},null,8,["title","message"])]))],2)])}}},Fo=[O("svg",{class:"icon",t:"1714565543756",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"22538",width:"200",height:"200"},[O("path",{d:"M871.616 64H152.384c-31.488 0-60.416 25.28-60.416 58.24v779.52c0 32.896 26.24 58.24 60.352 58.24h719.232c34.112 0 60.352-25.344 60.352-58.24V122.24c0.128-32.96-28.8-58.24-60.288-58.24zM286.272 512c-23.616 0-44.672-20.224-44.672-43.008 0-22.784 20.992-43.008 44.608-43.008 23.616 0 44.608 20.224 44.608 43.008A43.328 43.328 0 0 1 286.272 512z m0-202.496c-23.616 0-44.608-20.224-44.608-43.008 0-22.784 20.992-43.008 44.608-43.008 23.616 0 44.608 20.224 44.608 43.008a43.456 43.456 0 0 1-44.608 43.008zM737.728 512H435.904c-23.68 0-44.672-20.224-44.672-43.008 0-22.784 20.992-43.008 44.608-43.008h299.264c23.616 0 44.608 20.224 44.608 43.008a42.752 42.752 0 0 1-41.984 43.008z m0-202.496H435.904c-23.616 0-44.608-20.224-44.608-43.008 0-22.784 20.992-43.008 44.608-43.008h299.264c23.616 0 44.608 20.224 44.608 43.008a42.88 42.88 0 0 1-42.048 43.008z","p-id":"22539",fill:"currentColor"})],-1)],Uo=[O("svg",{class:"icon",t:"1714565020764",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"7999",width:"200",height:"200"},[O("path",{d:"M810.438503 379.664884l-71.187166-12.777183C737.426025 180.705882 542.117647 14.602496 532.991087 7.301248c-12.777184-10.951872-32.855615-10.951872-47.45811 0-9.12656 7.301248-204.434938 175.229947-206.26025 359.586453l-67.536542 10.951871c-18.253119 3.650624-31.030303 18.253119-31.030303 36.506239v189.832442c0 10.951872 5.475936 21.903743 12.777184 27.379679 7.301248 5.475936 14.602496 9.12656 23.729055 9.12656h5.475936l133.247772-23.729055c40.156863 47.458111 91.265597 73.012478 151.500891 73.012477 60.235294 0 111.344029-27.379679 151.500891-74.837789l136.898396 23.729055h5.475936c9.12656 0 16.427807-3.650624 23.729055-9.12656 9.12656-7.301248 12.777184-16.427807 12.777184-27.379679V412.520499c1.825312-14.602496-10.951872-29.204991-27.379679-32.855615zM620.606061 766.631016H401.568627c-20.078431 0-36.506239 16.427807-36.506238 36.506239v109.518716c0 14.602496 9.12656 29.204991 23.729055 34.680927 14.602496 5.475936 31.030303 1.825312 40.156863-9.126559l16.427807-18.25312 32.855615 80.313726c5.475936 14.602496 18.253119 23.729055 34.680927 23.729055 16.427807 0 27.379679-9.12656 34.680927-23.729055l32.855615-80.313726 16.427807 18.25312c10.951872 10.951872 25.554367 14.602496 40.156863 9.126559 14.602496-5.475936 23.729055-18.253119 23.729055-34.680927v-109.518716c-3.650624-20.078431-20.078431-36.506239-40.156862-36.506239z",fill:"currentColor","p-id":"8000"})],-1)],zo="comfyui-easyuse-toolbar",jo={__name:"index",setup(e){const t=Ne(),s=k(!1);x((e=>s.value),(e=>{e?t.watchGraph(!0):t.unwatchGraph()}));const o=k(null),n=e=>{const t=o.value;var s=e.clientX||0,n=e.clientY||0,i=t.offsetLeft,a=t.offsetTop;function l(e){var o=e.clientX,l=e.clientY,r=o-s,d=l-n;t.style.left=i+r+"px",t.style.top=a+d+"px"}document.addEventListener("mousemove",l),document.addEventListener("mouseup",(function e(){document.removeEventListener("mousemove",l),document.removeEventListener("mouseup",e)}))};return(e,t)=>(N(),T(D,null,[O("div",{class:R(["flex-c",zo])},[O("div",{class:R(["group flex-c",zo+"-icon"]),onClick:t[0]||(t[0]=e=>s.value=!s.value)},Fo,2),O("div",{class:R(["rocket flex-c",zo+"-icon"]),onClick:t[1]||(t[1]=(...e)=>P(Ie)&&P(Ie)(...e))},Uo,2)]),s.value?(N(),T("div",{key:0,ref_key:"nodesMapRef",ref:o,class:R(zo+"-nodes-map")},[Y(Bo,{onHandleHeader:n},{icon:V((()=>[M(Y(P(A),{icon:"pi pi-times",text:"",rounded:"",severity:"secondary",onClick:t[2]||(t[2]=e=>s.value=!1),size:"small"},null,512),[[P(C),P(Ce)("Close"),void 0,{top:!0}]])])),_:1})],2)):z("",!0)],64))}},Ho={__name:"index",setup(e){const t=Ne();return j((e=>{t.getAglTranslation()})),(e,t)=>(N(),T("div",{class:R("comfyui-easyuse-searchbox")}))}},Wo={__name:"index",setup(e){const t=Ne();return j((e=>{t.watchGraph()})),(e,t)=>(N(),T("div",{class:R("comfyui-easyuse-map")},[Y(Bo)]))}},Yo="Comfy.UseNewMenu",Vo={__name:"App",setup(e){const t=k(le(Yo)),s=e=>{$.extensionManager.registerSidebarTab({id:ye,icon:"pi pi-sitemap",title:Ce("Nodes Map",!0),tooltip:Ce("Nodes Map",!0),type:"custom",render:e=>{e.style.height="100%",Q(K(Wo,{}),e)}}),function(e,t=e=>{}){var s;const o=null==(s=$.ui.settings.settingsLookup)?void 0:s[e];o&&(o.onChange=e=>t(e))}(Yo,(e=>{t.value=e}))};return j((e=>{try{s()}catch(t){}})),(e,s)=>(N(),T(D,null,[Y(vo),"Disabled"==t.value?(N(),W(jo,{key:0})):z("",!0),Y(Ho)],64))}},Zo=null==(g=document.getElementsByClassName("graph-canvas-container"))?void 0:g[0],Xo=document.createElement("div");Xo.id="comfyui-easyuse-components",Zo?Zo.append(Xo):document.body.append(Xo);const Qo=J(Vo);Qo.use(q),Qo.use(L()),Qo.mount("#"+Xo.id);
